!function(l){"use strict";l.BS=function(){var e,t,n,r={},a=[],i=[],c=(e=document.body.innerText,t=document.querySelector("meta[name=keywords]"),n=t?t.content.split(","):[],e.concat(n)),o="1"===l.localStorage.epBlacklist;function s(e,o,r){var a=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var t=new RegExp("\\b"+e+"\\b","i");o.match(t)&&(r?(d("[Keyword found]: "+e),a.indexOf(e)<0&&a.push(e)):(d("[Prohibited Keyword]: "+e+" in: "+n),a.indexOf(n)<0&&a.push(n)))})}),a}function d(e){o&&console.log("%c"+e,"background: teal; color: white; padding: 3px;")}function u(e){var t,n,o;e?(t=s(i,c,!0),o="keywordsDetected"):(t=s(r,c),o="bucketDetected"),0<t.length&&(n={playerEvent:o,data:t},l.postMessage(JSON.stringify(n),"*"))}function f(e){var t=document.createElement("script");t.src="//player.performgroup.com/eplayer/assets/"+e+".json",document.head.appendChild(t),t.parentNode.removeChild(t)}return{init:f,parseWhitelist:function(e){var t,n=l.location.hostname;for(var o in e)e.hasOwnProperty(o)&&-1<o.indexOf(n)&&(a=e[o]);(t=l.location.hostname+l.location.pathname).indexOf("www.")<0&&(t="www."+t),a.some(function(e){return t.match(new RegExp(e.replace("*",".*")+"$"))})?d("[Keyword Checker]: URL is whitelisted"):(d("[Keyword Checker]: URL is not whitelisted"),f("buckets")),f("keywords")},parseBuckets:function(e){r=e,u()},parseKeywords:function(e){i=e,u("keywords")}}}(),l.addEventListener("initBrandSafety",function(){l.BS.init("urls")});var e=JSON.stringify({playerEvent:"brandSafetyReady",data:!0});l.postMessage(e,"*")}(window);