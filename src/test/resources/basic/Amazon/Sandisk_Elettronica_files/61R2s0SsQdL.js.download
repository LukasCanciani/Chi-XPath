(function(B){var E=window.AmazonUIPageJS||window.P,sa=E._namespace||E.attributeErrors,k=sa?sa("DetailPageImageBlockAssets",""):E;k.guardFatal?k.guardFatal(B)(k,window):k.execute(function(){B(k,window)})})(function(B,E,sa){B.register("postMetric",function(){return{postCountMetric:function(k){if("undefined"!==typeof k){var h=E.ue;if(h){var n=h.count(k)||0;h.count(k,n+1)}}},postTimeMetric:function(k,h){if("undefined"!==typeof k&&"undefined"!==typeof h){var n=E.ue;n&&n.count(k,h)}}}});"use strict";B.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});B.register("postEarlyMetric",function(){return null});"use strict";B.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(k,h,n,a){k=k.extend(!0,{},n,a);var e=new h(k);B.register("ImageBlockAPI",function(){return e.api});return e});"use strict";B.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(k,h,n){k=n.airyConfig;k.jsUrl&&B.load.js(k.jsUrl);k.cssUrl&&B.load.css(k.cssUrl)});"use strict";
B.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(k,h,n,a,e,F){var t={};return function(p){var d=this;d.dispatch=function(a,d){var p=t[a];e.isDefined(p)&&h.each(p,function(a,c){c.call(E,d)})};d.register=function(a,d){e.isDefined(t[a])||(t[a]=[]);"function"===typeof d&&t[a].push(d)};d.model=new n(p,d);d.view=new a(p,d,d.model);d.api=new F(p,d,d.model);d.init=function(){d.model.init();d.view.init()};d.init()}});"use strict";
B.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(k,h,n){function a(a,c,e,d,v){n.isDefined(a)&&(G.type=a);n.isDefined(c)&&(G.index=c);n.isDefined(e)&&(G.thumbnailIndex=e);n.isDefined(d)&&(G.variant=d);n.isDefined(v)&&(G.color=v)}function e(c){a("image",0,0,"MAIN",c||d.landingAsinColor||d.defaultColor)}function F(c){c=c.data;C=k.copy(G);a(c.type,c.index,c.thumbnailIndex,c.variant,c.color)}function t(a){F(a);a=k.copy(a);a.data=k.copy(G);c.dispatch("updateView",a)}function p(){C=
k.copy(G);e(G.color)}var d,c,G={},C={},N,H;return function(a,h){c=h;d=a;c.register("updateSelection",t);c.register("updateModel",F);c.register("resetModel",p);this.init=function(){e()};this.getCurrentItem=function(){return k.copy(G)};this.getPreviousItem=function(){return k.copy(C)};this.setCurrentEvent=function(a){N=a};this.getCurrentEvent=function(){return N};this.setImmersiveViewModalInstance=function(a){H=a};this.getImmersiveViewModalInstance=function(){return H}}});"use strict";B.when("ImageBlockBTF",
"postMetric").execute(function(k,h){function n(a,h,k,p,d){function c(g){"click"===g.type&&p.postCountMetric("thumbClick");"click"===g.type&&A.overrideAltImageClickAction?w.dispatch("thumbActionClick",g):w.dispatch("updateSelection",g)}function n(g){A.useClickZoom||w.dispatch("imageClick",g)}function C(g){A.useClickZoom||w.dispatch("imageHover",g)}function N(g){w.dispatch("button360Click",g)}function H(g){!k.isDefined(g)||"swatchClick"!==g.type&&"updatedData"!==g.type?(v.update(g),"swatchHover"!==
g.type&&L.getPreviousItem().thumbnailIndex!==g.data.thumbnailIndex&&p.postCountMetric(g.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",g.data)):v.render(g.data.color,!1,g.onload)}function y(g){w.dispatch("resize",g)}function I(g){k.selectThumbnail(g,m)}function q(g){var a=g.data,c;a&&"ingress"!==a.type&&"click"===g.type&&(c=g);return c}function K(g){var a=L.getCurrentItem(),c={type:"click"};c.$declarativeParent=g;c.data=a;return c}var v,A,w,L,m;return function(g,u,p){v=
this;A=g;w=u;L=p;m=h("#imageBlock #altImages ul");var k=h("#imageBlock .canvas"),b=h("#main-image-container"),f;v.subViews=[];for(u=0;u<d.length;u++)v.subViews.push(new d[u](g,p,v,w));v.render=function(g,a,Q){var c=0;m.find(".item").remove();g=g||L.getCurrentItem().color;h.each(v.subViews,function(f,d){c=d.render(g,c,k,m,b,a,Q)||c});var d=m.find(".a-button-selected").closest(".a-declarative");f=K(d)};v.init=function(){m=h("#imageBlock #altImages ul");var b=m.find(".a-button-selected").closest(".a-declarative"),
g=b.data("action"),b=b.data(g)||{};b.color=A.landingAsinColor||A.defaultColor;w.dispatch("updateModel",{data:b});v.render(b.color,!0);A.isDebug&&E.console&&console.log(A);w.register("updateView",H);w.register("selectThumbnail",I);"function"===typeof E.markFeatureInteractive&&E.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["click","hover"]},{name:"thumbnail",events:["click","hover"]}]});A.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter",
"mouseleave"],c);a.declarative("thumb-action",["click"],c);a.declarative("main-image-click",["click"],n);a.declarative("main-image-click",["mouseenter","mouseleave"],C);a.declarative("button-360-click",["click"],N);h(E).resize(y)};v.update=function(b){h.each(v.subViews,function(g,Q){Q.update(b)});A.usePeekHover&&("mouseleave"===b.type?w.dispatch("updateSelection",f):"click"===b.type&&(f=q(b)||f))}}}var a=["A","jQuery","imageBlockUtils","postMetric"].concat(k.views);B.when.apply(B,a).register("ImageBlockView",
function(){for(var a=arguments[0],h=arguments[1],k=arguments[2],p=arguments[3],d=[],c=4,G=arguments.length;c<G;c++)d.push(arguments[c]);return n(a,h,k,p,d)})});"use strict";B.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(k,h,n,a,e,F,t){function p(b,a,f,c){if(!n.isjQueryObjDefined(b.find(".a-button-selected"))){var l=g.getCurrentItem();if(!c||"chromeless-video"!==l.type||!m.autoplayVideo){c=
0;"image"===l.type&&(c=Math.max(G(l.color,l.variant),0));var d=a+c;d>=f&&(c=0,d=a);a=n.getImageHash(l.color,c,m);-1!==a&&(u.dispatch("updateModel",{data:{index:c,thumbnailIndex:d,variant:a.variant,type:"image"}}),a=b.find(".item").get(d),n.selectGivenThumbnail(h(a),b))}}}function d(b,a,f){a=m.colorImages&&m.colorImages[a];var c=b;n.isDefined(a)&&(h.each(a,function(a,g){b<m.maxAlts&&(n.createThumbnail({type:"image",index:a,thumbnailIndex:b,variant:g.variant},g.thumb,x,"imageThumbnail"),b++)}),F.isEnabled&&
t.logAltImgRequestPlacedOnThumbnails(h,F,g),p(x,c,b,f));return b}function c(b,a){if("image"===b.type){var g=h("#image-canvas-caption #canvasCaption"),f,c=m.staticStrings,l=m.colorImages,d=b.color,v=b.index;a&&m.useIV?f=c.clickToExpand:l[d]&&l[d][v].hiRes&&m.useHoverZoom?(f=m.useHoverZoomIpad?c.touchToZoom:m.useClickZoom?c.clickToZoom:c.rollOverToZoom,m.hoverZoomIndicator&&(f="\x3cimg src\x3d'"+m.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+f)):m.useIV&&(f=c.clickToExpand);g.html(f)}}function G(b,
a){return n.getIndexForVariant(b,a,m)}function C(a,g){var f;h.each(a.main,function(b,a){n.isDefined(f)||(f=parseFloat(a[1]/a[0])<=parseFloat(m.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});var c="a-dynamic-image "+f,l=n.getMaxDimensionsOfMainImage(a.main,b,m),d=l[0],v=l[1],l=h("\x3cdiv\x3e\x3c/div\x3e"),d={"max-height":d,"max-width":v};l.addClass(c).css(d).attr({"data-old-hires":a.hiRes,"data-a-manual-replacement":"true",onload:g}).data("a-dynamic-image",a.main);return l}function N(b){var a=
D.find(".swatchHoverExp");b=C(b);a.find(".imgTagWrapper").html(b);k.loadImageManually(b);return a}function H(a){var g=b.css("height");null!==g&&a.find(".imgTagWrapper").css("height",g);a.addClass("selected");m.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(m.imgTagWrapperClasses)}function y(b,a){if("image"===b.type||"unavailable"===b.type||"lazy-loaded"===b.type){var f=n.getImageHash(b.color,b.index,m);if(-1===f)return f={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},n.lazyLoadingRequired(b,
g,m)?K(b,!1,a):(u.dispatch("updateModel",f),n.showUnavailable(b.color)),-1;var l=D.find(".item.itemNo"+b.thumbnailIndex);if(!n.isjQueryObjDefined(l)){var l=b.thumbnailIndex,l=D.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+l+" maintain-height"),d=C(f,a);l.find(".placeHolder").replaceWith(d);D.find(".list").append(l);k.loadImageManually(d)}H(l);u.dispatch("loadMagnifier");c(b);m.useIV&&n.isDefined(f.hiRes)&&l.css("cursor","pointer");b.isUserGenerated&&
(l=g.getPreviousItem(),d=b.variant,n.isDefined(d)&&l.thumbnailIndex!==b.thumbnailIndex&&(F.isEnabled&&t.logAltImgRequestServed(F),e.postCountMetric("ImageThumbnailSelectedVariant:"+d),0===d.indexOf("IG")&&(e.postCountMetric("IGImageSelectedVariant:"+d),e.postCountMetric("IGImageSelectedEvent:"+b.interaction))));k.trigger("dp:image-block:update",f)}}function I(b){var a=Math.max(G(b.color,g.getCurrentItem().variant),0),a=n.getImageHash(b.color,a,m);if(-1===a)return n.lazyLoadingRequired(b,g,m)?n.lazyLoadOnHoverEnabled(m)&&
(q(".3",!0),n.spinner(D,!0),k.delay(function(){g.getCurrentEvent().data===b&&K(b,!0)},500)):n.showUnavailable(b.color),-1;var f=N(a);H(f);k.trigger("dp:image-block:update",a)}function q(b,a){a?D.css("opacity",b):h("#imageBlock").css("opacity",b)}function K(b,c,l){f=c;M=l;var d=b.color,e=m.colorToAsin[d];if(e&&e.asin){var h={};h.params={asin:e.asin,productGroupID:m.productGroupID,color:d};h.success=function(a){a?(n.ajaxState(e.asin,"success"),m.colorImages[d]=a.colorImage,n.isDefined(m.spin360ColorEnabled)&&
(m.spin360ColorEnabled[d]=a.enable360),d===b.color&&(c&&f?b===g.getCurrentEvent().data&&(v(b),I(b)):(a={type:"updatedData",data:g.getCurrentItem(),onload:l||M},u.dispatch("updateView",a))),B.register(n.rankedImagesReadyEvent(e.asin))):n.ajaxState(e.asin,"fail")};h.error=function(){n.ajaxState(e.asin,"fail")};h.indicator=n.spinner(D);n.ajaxState(e.asin,void 0)&&"fail"!==n.ajaxState(e.asin,void 0)||(q(".3",c),a.load("/gp/product/features/apparel-main-image/ranked-images.html",h),n.ajaxState(e.asin,
"sent"));return m.colorImages&&m.colorImages[d]}}function v(b,a){n.lazyLoadingRequired(b,g,m)||(h("#imageBlock").css("opacity","1"),D.css("opacity","1"),n.spinner(D,!1),D.find("li").removeClass("selected"),h("#image-canvas-caption #canvasCaption").empty(),n.hideUnavailable(),a&&D.find(".list .item").remove())}function A(){var a=D.find(".item .imgTagWrapper"),f=n.getContainerHeight(b,m.holderRatio,m.holderMaxHeight);0<f&&(b.height(f),a.height(f));D.find("img.a-dynamic-image").each(function(){var a=
h(this);a.data("a-manual-replacement")&&k.loadDynamicImage(this);var f=a.data("a-dynamic-image"),f=n.getMaxDimensionsOfMainImage(f,b,m);a.css({"max-height":f[0]+"px","max-width":f[1]+"px"})})}function w(b){c(g.getCurrentItem(),"mouseenter"===b.type)}var L,m,g,u,x,D,b,f,M,l;return function(a,f,c,h){L=this;m=a;g=f;u=h;m.colorImages[m.landingAsinColor]=m.colorImages[m.defaultColor];L.render=function(a,f,c,e,h,M,w){D=c;x=e;b=h;l=d(f,a,M);M||(a=g.getCurrentItem(),n.lazyLoadingRequired(a,g,m)&&u.dispatch("updateModel",
{data:{type:"lazy-loaded"}}));v(g.getCurrentItem(),!M);y(g.getCurrentItem(),w);return l};L.update=function(b){var a=b.data;g.setCurrentEvent(b);"ingress"!==a.type&&v(b.data,!1);"swatchHover"===b.type?a.color===g.getCurrentItem().color?y(g.getCurrentItem()):b.captured||-1===I(a)||(b.captured=!0):"image"===a.type&&(a.interaction=b.type,a.isUserGenerated=!0,"mouseenter"===b.type&&e.postCountMetric("dpcc_imageThumbHovered_"+(a.thumbnailIndex+1)+"_"+l),y(a),m.usePeekHover&&"click"!==b.type||(n.selectGivenThumbnail(b.$declarativeParent,
x),"click"===b.type&&e.postCountMetric("dpcc_imageThumbClicked_"+(a.thumbnailIndex+1)+"_"+l)))};u.register("imageHover",w);u.register("resize",A)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(k,h,n,a,e,F){function t(a){q?a.css("cursor","url('"+C.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function p(a){var c=
a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(n.isDefined(c))for(var c=c[1].split("_"),d=0;d<c.length;d++){var e=c[d].match(/^([A-Z]+)(\d+(\.\d+)?)$/);n.isDefined(e)&&(a[e[1]]=parseInt(e[2],10))}return a}function d(c,d){function k(){var a;d.useClickZoom?(a=d.offsetInClickZoom,a=[Math.min(1,Math.max(0,M[0]-(Q[0]+a))/(Q[2]-2*a)),Math.min(1,Math.max(0,M[1]-(Q[1]+a))/(Q[3]-2*a))]):a=f&&f.updatePosition();if(a&&b&&b.detailSize){var c=[b.detailSize[0]-b.rect.width,b.detailSize[1]-b.rect.height];
b.detailImage.get(0).style.left=-(a[0]*c[0])+"px";b.detailImage.get(0).style.top=-(a[1]*c[1])+"px"}}function w(b){var a=R?b.originalEvent.touches[0]||b.originalEvent.changedTouches[0]:"";M=R?[a.pageX,a.pageY]:[b.pageX,b.pageY]}function G(b){R&&b.preventDefault();w(b);d.useClickZoom?b=[Q[0],Q[1],Q[0]+Q[2],Q[1]+Q[3]]:(b=f?f.offset:c.offsetParent().offset(),b=[l[0]+b.left,l[1]+b.top,l[0]+l[2]+b.left,l[1]+l[3]+b.top]);M[0]<b[0]||M[1]<b[1]||M[0]>=b[2]||M[1]>=b[3]?(d.fadeMagnifier?fa||(fa=!0,ca=setTimeout(function(){m(!0)},
500)):d.useClickZoom||m(),aa&&(aa=!1,clearTimeout(ga))):(aa||(aa=!0,ga=setTimeout(function(){a.postCountMetric("dppc_hoverZoomOpened");e.isEnabled&&F.logHoverZoomRequestServed(e)},1E3)),d.fadeMagnifier&&fa&&(fa=!1,clearTimeout(ca)),k())}function m(a){a&&x.suppressMagnifier(!0);if(H&&(b&&b.hide(),f&&(f.destroy(),f=null),H=!1,R?(c.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),h(document).trigger("disengaged.magnifier")):h(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),
u(),a))c.one("click.magnifier touchstart.magnifier",function(b){g(b,!0)})}function g(g,e){e&&x.suppressMagnifier(!1);if(!H&&!I&&(0===B&&(a.postCountMetric("dppc_hoverTime",new Date-(E.ue&&E.ue.t0||0)),B=1),ea[N]||(a.postCountMetric("dppc_hoverMain"),ea[N]=1),l=[c.position().left,c.position().top,c.width(),c.height()],N&&(w(g),b?b.refit().show():b=new la,d.useClickZoom||(f=f||new ia),Q=b.getWindowSize(),k()),H=!0,R?(c.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",G).bind("touchend.magnifier",
m),h(document).trigger("engaged.magnifier")):(c.unbind("mousemove.magnifier"),h(document).trigger("engaged.magnifier").bind("mousemove.magnifier",G)),e)){var M=h("#zoomWindow");if(0<M.length)M.one("click.magnifier touchend.magnifier",function(b){m(!0)})}}function u(){d.useHoverZoom&&(R?c.bind("touchstart.magnifier touchmove.magnifier",g):c.bind("mousemove.magnifier",g))}var x=this,y={detailImageUrl:c.attr("data-old-hires"),location:"over",locationElement:c,prelaod:"ready",zIndex:50,offsetInClickZoom:50};
d=h.extend(y,d);d.adjustment=[10,0,-10,0];var b=null,f=null,M=null,l=null,Q=null,J={"null":1,"":1,undefined:1},H=!1,I=!1,N=d.detailImageUrl,R=d.useHoverZoomIpad||0,B=0,ea={},ia=function(){function a(f){var d=Math.round(Math.min(c.width(),b.rect.width/f));f=Math.round(Math.min(c.height(),b.rect.height/f));k.css({width:d,height:f});g=[d,f]}var f=this,g=[0,0],e=(b.detailSize&&b.detailSize[0]||5E8)/l[2],m=(b.detailSize&&b.detailSize[1]||5E8)/l[3],e=m>e?m:e;h("#magnifierLens").remove();var k=h("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});
d.generalImageUrls.zoomLensBackground&&k.css({backgroundImage:"url("+d.generalImageUrls.zoomLensBackground+")"});C.showMagnifierOnHover?t(k):k.css("cursor","pointer");f.updatePosition=function(){var b=[l[2]-g[0],l[3]-g[1]],a=0>=b[0]?.5:Math.max(0,Math.min(1,(M[0]-g[0]/2-l[0]-f.offset.left)/b[0])),c=0>=b[1]?.5:Math.max(0,Math.min(1,(M[1]-g[1]/2-l[1]-f.offset.top)/b[1])),d=l[0]+Math.round(a*b[0]),b=l[1]+Math.round(c*b[1]);k.get(0).style.left=d+"px";k.get(0).style.top=b+"px";return[a,c]};f.destroy=function(){k.remove()};
f.offset=c.offsetParent().offset();a(e);f.updatePosition();k.appendTo(c.parent());b.detailImage[0].complete||b.detailImage.load(function(){var c=b.detailImage.width()/l[2];a(c);f.updatePosition()})};ia.preload=function(){x.preload(d.generalImageUrls.lensBackgroundUrl)};var la=function(){function b(){var a={};if("over"===d.location){var a=d.useClickZoom,l={},e=h("#leftCol"),k=h("#centerCol"),M=h("#rightCol"),w=h("#hover-zoom-end"),u=h("#actionPanelContainer"),p=n.isjQueryObjDefined(e)?e.outerHeight():
k.outerHeight();l.top=n.isjQueryObjDefined(e)?e.offset().top:k.offset().top;l.bottom=p+l.top;l.right=n.isjQueryObjDefined(M)?M.offset().left:u.offset().left;l.left=a?0:e.offset().left+e.outerWidth();n.isjQueryObjDefined(w)&&w.offset().top>l.bottom&&(l.bottom=w.offset().top);a=l}else"right"===d.location&&(a=c.offset(),a={left:a.left+c.outerWidth(),top:a.top,right:a.left+c.outerWidth()+400,bottom:a.top+400});d.minHeightElement&&(a.bottom=Math.max(a.bottom,a.top+h(d.minHeightElement).outerHeight()));
a.bottom=Math.min(a.bottom,h(E).scrollTop()+h(E).height());a.left+=g[0];a.top+=g[1];a.right+=g[2];a.bottom+=g[3];a.width=a.right-a.left;a.height=a.bottom-a.top;d.enhancedHoverOverlay&&n.isDefined(E.pageXOffset)&&(l=h(E).width(),a.width=l-a.left+E.pageXOffset-18,a.height-=14);m.css({left:a.left,top:a.top,width:a.width,height:a.height});f.rect=a;return f}function a(b){var c=new Image;f.detailSize=[0,0];c.onload=function(){f.detailSize=[c.width,c.height];k()};c.src=b.attr("src");if(0<c.width&&0<c.height)f.detailSize=
[c.width,c.height];else if(d.detailImageSize)f.detailSize=d.detailImageSize;else{b=p(c.src);var g=l[2]/l[3];b.SS||b.AA?(b=b.SS||b.AA,f.detailSize=[b,b]):b.SX?f.detailSize=[b.SX,Math.round(b.SX/g)]:b.SY?f.detailSize=[Math.round(b.SY*g),b.SY]:b.SL&&(f.detailSize=1<=g?[b.SL,Math.round(b.SL/g)]:[Math.round(b.SL*g),b.SL])}}var f=this,g=d.adjustment;h("#zoomWindow").remove();var e={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:d.zIndex};d.enhancedHoverOverlay&&(e.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",
e.border="1px solid #949494",e.borderColor="rgb(148,148,148)");var m=h("\x3cdiv id\x3d'zoomWindow' /\x3e").css(e);d.fadeMagnifier&&m.fadeIn(200);d.useClickZoom&&(q?m.css("cursor",'url("'+d.zoomOutIcon+'"), auto'):(m.css("cursor","-webkit-zoom-out"),m.css("cursor","-moz-zoom-out"),m.css("cursor","zoom-out")));f.updateImage=function(b){b=h("\x3cimg id\x3d'detailImg' src\x3d'"+b+"'/\x3e").css("position","absolute");f.detailImage&&f.detailImage.remove();m.append(b);h(document).trigger("updated.magnifier");
f.detailImage=b;a(f.detailImage)};f.refit=function(){b();a(f.detailImage);return f};d.fadeMagnifier?(f.show=function(){m.fadeIn(200);return f},f.hide=function(){m.fadeOut(200);return f}):(f.show=function(){m.show();return f},f.hide=function(){m.hide();return f});f.destroy=function(){m.remove();return f};f.getWindowSize=function(){return[f.rect.left,f.rect.top,f.rect.width,f.rect.height]};f.updateImage(N);b();m.appendTo(document.body)},fa=!1,ca,aa=!1,ga;x.preload=function(b){b=h.makeArray(b);for(var a=
b.length,f=0;f<a;f++)b[f]instanceof Array?x.preload(b[f]):"string"===typeof b[f]&&b[f]&&!J[b[f]]&&(J[b[f]]=new Image,J[b[f]].src=b[f])};x.changeImage=function(a,f){H&&m();N=f;c.attr("src",a);x.preload(a);l=[c.position().left,c.position().top,c.width(),c.height()];f&&("immediately"===d.preload?x.preload(f,!0):h(E).ready(function(){x.preload(f)}),b?b.updateImage(f):c.attr("data-old-hires",f))};x.destroy=function(){c.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");h(document).unbind("mousemove.magnifier");
f&&f.destroy();f=null;b&&b.destroy();b=null};x.detailImage=function(){return b.detailImage};x.suppressMagnifier=function(b){I=b};x.isEngaged=function(){return H};x.engageMagnifier=g;x.disengageMagnifier=m;c[0].complete?u():c.one("load",u);x.preload(c.attr("src"));if(d.preload){var da=d.detailImageUrl,y=function(){x.preload(da,!0);d.useClickZoom||ia.preload()},U=d.preload;U.constructor!==Array&&(U=[U]);for(var z=0;z<U.length;z++)if("immediately"===U[z])y();else if(h(E)[U[z]])h(E)[U[z]](y);else h(E).bind(U[z],
y)}return x}function c(){if(C.useHoverZoom){var a={adjustment:[0,0,1,1],generalImageUrls:C.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:C.useHoverZoomIpad,useHoverZoom:C.useHoverZoom,useClickZoom:C.useClickZoom,fadeMagnifier:C.fadeMagnifier,zoomOutIcon:C.staticImages.zoomOutCur,enhancedHoverOverlay:C.enhancedHoverOverlay||C.atfEnhancedHoverOverlay};y&&(y.destroy(),y=void 0);var c=I.find(".image.item.selected img[data-old-hires]").not("[data-old-hires\x3d'']");
n.isjQueryObjDefined(c)?C.useClickZoom?(c.one("click.loadmagnifier touchstart.loadmagnifier",function(e){y=new d(c,a);y.engageMagnifier(e,!0)}),q?c.css("cursor",'url("'+C.staticImages.zoomInCur+'"), auto'):(c.css("cursor","-webkit-zoom-in"),c.css("cursor","-moz-zoom-in"),c.css("cursor","zoom-in"))):y=new d(c,a):e.isEnabled&&F.logHoverZoomApplicability(h,e)}}var G,C,N,H,y,I,q=navigator.userAgent.match(/msie|trident/i);return function(a,d,k,h){G=this;C=a;N=d;e.refToModel=N;H=h;G.render=function(a,c,
g,d,e,h){I=g;y&&(y.destroy(),y=void 0)};G.update=function(a){};H.register("loadMagnifier",c);H.register("resize",c)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(k,h,n,a){function e(d,e,h){d=(d=h?h:n.getColorFromState(e.getState().hovered_variations,p))&&""!==d?d:p.defaultColor;c.dispatch("updateView",{type:"swatchHover",data:{color:d}});a.postCountMetric("swatchHover")}function F(e,h,k,t){e=(e=t?t:n.getColorFromState(h.getState().selected_variations,
p))&&""!==e?e:p.defaultColor;e===d.getCurrentItem().color?"function"===typeof k&&k():(c.dispatch("updateSelection",{type:"swatchClick",data:{color:e},onload:k}),a.postCountMetric("swatchClick"))}var t,p,d,c;return function(a,h,n,H){t=this;p=a;d=h;c=H;k.on("image-block-twister-swatch-hover",e);k.on("image-block-twister-swatch-click",F);t.render=function(a,c,d,e,h){};t.update=function(a){}}});"use strict";B.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",
function(k,h,n,a,e,F){function t(b,f,c,d){!q.autoplayVideo||M||q.useChromelessVideoPlayer?!a.isjQueryObjDefined(b.find(".a-button-selected"))&&(c=K.getCurrentItem(),!d||q.prioritizeVideos||"chromeless-video"===c.type&&q.autoplayVideo)&&(d=a.getVideoHash(c.color,0,q),-1!==d&&(f+=0,v.dispatch("updateModel",{data:{index:0,thumbnailIndex:f,variant:d.variant,type:q.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),f=b.find(".item").get(f),a.selectGivenThumbnail(h(f),b))):(a.selectGivenThumbnail(b.find("img:last"),
b),a.fadeToThumbnail(b.find("img").length-1,m,b))}function p(b){var f=K.getCurrentItem().color;if(q.useChildVideos&&!q.colorToVideo[f]){var c=function(){if(b){q.colorToVideo[f]=b;var a={type:"updatedData",data:K.getCurrentItem()};v.dispatch("updateView",a)}};q.lazyLoadExperienceDisabled?c():B.when(a.rankedImagesReadyEvent(q.colorToAsin[f].asin)).execute(function(){c()})}}function d(b){if(!q.useChildVideos)return a.lazyLoadingRequired(K.getCurrentItem(),K,q)?void 0:q.videos;if(q.colorToVideo[b])return q.colorToVideo[b];
var f=q.colorToAsin[b];if(f&&f.asin){var c={};c.params={asin:f.asin,productGroupID:q.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:q.useChromelessVideoPlayer,isUDP:q.isUDP};q.isDPXFeatureEnabled||(c.success=function(b){p(b)},e.load("/gp/product/features/apparel-main-image/videos.html",c));return q.colorToVideo&&q.colorToVideo[b]}}function c(){v.dispatch("selectThumbnail",a.useTabbedImmersiveView(q)?1:0)}function G(b,f,d,g){return n.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],
streamingUrls:f.url,swfUrl:d.swfUrl,foresterMetadataParams:d.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var f=a.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";F.postCountMetric("dppc_chromelessVideo:"+f)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){c();F.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){c();F.postCountMetric("dppc_chromelessVideo:ERROR")},
ended:function(){u.seek(0)}},cuePoints:[{values:f.durationSeconds-1,type:"position",callback:function(a,f,d){a=d.durationSeconds-d.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){b.parent().css({"background-color":"transparent","z-index":-1});c();h(this).show().css("opacity",1)})}}]})}function C(b){if("chromeful-video"===b.type||"chromeless-video"===b.type){var f=a.getVideoHash(b.color,b.index,q);if(-1===f)return-1;if("chromeful-video"===
b.type){b=m.width()/m.height();var c=parseInt(f.videoWidth,10),d=parseInt(f.videoHeight,10);a.updateAspectRatio(b,c,d,w);u?(u.show(),a.loadMediaIntoAiry(u,f,x)):u=a.createAiryInstanceForChromeful(w,f,x,null,q.autoplayVideo,m,L,A);b:if(a.useTabbedImmersiveView(q)){if(1<a.getVideosCount(K.getCurrentItem().color,q)){if(a.isDefined(g)){L.show();break b}g=h('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(q.staticStrings.watchMoreVideos);L.find("#videoCaption").append(g);k.declarative.create(g,
"videoIngressClick",D)}a.playVideoInImmersiveView(q,K.getCurrentItem().color)&&(k.declarative.create(w,"videoIngressClick",D),w.children().css("z-index","-1"),w.css("display","inline-block"))}else L.find("#videoCaption").text(q.staticStrings.playVideo),L.show();f=u;q.autoplayVideo&&f&&!M&&(a.toggleVideoCaption(L),f.setVolume(0),f.show(),f.play(),M=!0)}else u?(u.show(),a.loadMediaIntoAiry(u,f,x),u.play(),L.show()):(u=G(w,f,x))&&u.play()}}function N(b,c,g){var e=d(c);c=b;a.isDefined(e)&&0<e.length&&
q.alwaysIncludeVideo&&b===q.maxAlts&&(A.find(".item:last").remove(),b--);a.isDefined(e)&&(h.each(e,function(c,d){if(b<q.maxAlts){var g=q.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",m={type:g,index:c,thumbnailIndex:b,variant:d.variant};D={type:"video-ingress",index:c,thumbnailIndex:b,variant:d.variant};a.useTabbedImmersiveView(q)&&("chromeful-video"===g&&(l+=" videoBlockIngress  videoBlockDarkIngress",d.thumb=d.thumb.replace("_PKmb-play-button-overlay-thumb","")),q.altsOnLeft||(l+=
" a-align-top"));a.createThumbnail(m,d.thumb,A,l);if(a.useTabbedImmersiveView(q)){H(A.find(".videoBlockIngress img"),q.videoIngressATFSlateThumbURL);var m=1<e.length?"multiple-videos":"one-video",h=1<e.length?e.length+" "+q.staticStrings.multipleVideos:q.staticStrings.singleVideo;h&&A.find(".videoBlockIngress").append(A.find("#videoCount_template").clone().text(h).attr("id","videoCount")).addClass(m)}f||(f=!0,F.postCountMetric("chromeless-video"===g?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));
b++}if(a.useTabbedImmersiveView(q))return!1}),t(A,c,b,g));return b}function H(b,a){var f=b.attr("src");if(f&&a){b.attr("src",a);var c=new Image;c.onload=function(a){b.attr("src",f)};c.src=f}}function y(b){u&&u.pause();b.data=D;b.clickTimeStamp=b.$event.timeStamp;var a="a"===b.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";v.dispatch("imageClick",b);F.postTimeMetric("dpcc_vse_videoingressclick",b.$event.timeStamp);F.postCountMetric(a)}var I,q,K,v,A,w,L,m,g,u,x,D,b,f=!1,M=!1,l="videoThumbnail";
return function(f,c,d,g){I=this;q=f;K=c;v=g;x=q.airyConfig;q.colorToVideo={};q.colorToVideo[q.landingAsinColor]=q.colorToVideo[q.defaultColor]=q.videos;I.render=function(f,c,d,g,e,l){A=g;w=e.find("#main-video-container");L=w.parent().find("#video-canvas-caption");m=h("#main-image-container");q.useChromelessVideoPlayer||w.addClass("chromeful-container");b=N(c,f,l);C(K.getCurrentItem());a.useTabbedImmersiveView(q)&&k.declarative("videoIngressClick",["click"],y);return b};I.update=function(f){var c=
f.data;"ingress"!==c.type&&u&&(u.hide(),w.parent().css("z-index",-1),L.hide());if("swatchHover"===f.type)c.color===K.getCurrentItem().color?C(K.getCurrentItem()):f.captured||a.lazyLoadingRequired(c,K,q)&&!a.lazyLoadOnHoverEnabled(q)&&C(K.getCurrentItem());else if("chromeful-video"===c.type||"chromeless-video"===c.type)"mouseenter"===f.type&&F.postCountMetric("dpcc_videoThumbHovered_"+(c.thumbnailIndex+1)+"_"+b),C(c),q.usePeekHover&&"click"!==f.type||(a.selectGivenThumbnail(f.$declarativeParent,A),
"click"===f.type&&a.useTabbedImmersiveView(q)&&(F.postCountMetric("dpcc_videoThumbClicked_"+(c.thumbnailIndex+1)+"_"+b),D.action="videoIngressClick",D.clickTimeStamp=f.$event.timeStamp,v.dispatch("videoIngressClick",D),F.postTimeMetric("dpcc_vse_videoingressclick",f.$event.timeStamp)))};if(q.isDPXFeatureEnabled)k.on("triggerVideoAjax",p)}});"use strict";B.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",
function(k,h,n,a,e,F,t,p,d,c){function G(b){return b.hiRes||b.large||b.main[b.main.length-1]}function C(){r.find("#ivTitle").click(function(){ja.hide()})}function N(){P=Pa?{type:"360-spin"}:V.getCurrentItem()}function H(){var b=r.find("#ivStage"),a=ja.$container.find(".a-popover-wrapper"),f=a.find(".a-popover-inner"),a=a.height()-c.getDimension(f,"padding-top")-c.getDimension(f,"padding-bottom");r.css("height",a);var f=r.find("#ivTitle").outerHeight(!0),d=r.find("#ivVariationSelection").outerHeight(!0),
g=r.find("#ivMediaSelection").outerHeight(!0),e=r.find("#ivThumbs"),l=c.getDimension(e,"margin-top")+c.getDimension(e,"margin-bottom");e.css("height",a-f-d-g-l);r.find("#ivLargeImage").css("height",a);b.css("width",r.width()-c.getDimension(r,"padding-left")-c.getDimension(r,"padding-right")-r.find("#ivThumbColumn").width()-c.getDimension(b,"margin-left")-c.getDimension(b,"margin-right"))}function y(){r.find("#ivMediaSelect").change(function(){var b=a(this).val();"all"===b?(r.find("#ivVideoList").hide(),
r.find("#ivThumbs").show(),r.find(".ivThumbVideo").show(),"chromeful-video"===P.type&&r.find("#ivVideo_"+P.index).click()):"images"===b?(r.find("#ivVideoList").hide(),r.find("#ivThumbs").show(),r.find(".ivThumbVideo").hide(),"chromeful-video"===P.type&&(0===ba&&0===W?r.find("#iv360").click():0===ba?r.find("#ivHeroImage_0").click():r.find("#ivImage_0").click())):"videos"===b&&(r.find("#ivVideoList").show(),r.find("#ivThumbs").hide(),"chromeful-video"!==P.type?r.find("#ivVideoList_0").click():r.find("#ivVideoList_"+
P.index).click())})}function I(){var b=r.find("#ivStage").find("#ivLargeImage"),a=b.width(),f=b.height(),c=b.find(".fullscreen");c.removeAttr("style");var d=c.width(),g=c.height();0<c.length&&(c[0].naturalWidth&&(d=c[0].naturalWidth),c[0].naturalHeight&&(g=c[0].naturalHeight));b.css("cursor","auto");var d=0===d?1:d,g=0===g?1:g,e=Math.min(a/d,f/g),l=g*e,m=d*e;1>e?(Qa?b.css("cursor","url('"+z.staticImages.zoomIn+"'), auto"):(b.css("cursor","-webkit-zoom-in"),b.css("cursor","-moz-zoom-in"),b.css("cursor",
"zoom-in")),Ba=!0):Ba=!1;d=Math.min(m,d);g=Math.min(l-20,g);c.css({"margin-top":(f-g)/2,"margin-left":(a-d)/2,height:g,width:d});b.css("visibility","visible");Ca=!1}function q(b){var a=r.find("#ivLargeImage");a.css("visibility","hidden");a.empty();c.animateStageIn(a);a.append(b);I()}function K(){X&&X.pause();r.find("#ivLarge360").css("display","none");r.find("#ivLargeVideo").css("display","none");r.find("#ivLargeImage").css("display","none");u()}function v(b){K();r.find("#ivLargeImage").css("display",
"block");var f;"hero-image"===b?e.isDefined(ha)&&(f=G(ha[P.index])):e.isDefined(na)&&(f=G(na[P.index]));if(e.isDefined(f)){r.find(".fullscreen").remove();var d=a("\x3cimg\x3e").attr("src",f).addClass("fullscreen"),g=r.find("#ivLargeImage");c.animateStageOut(g,function(){d.load(function(){q(d)});if(d[0].complete)q(d);else{g.empty();var b=(g.height()-104)/2,f=(g.width()-80)/2;a("\x3cimg\x3e").attr("src",z.staticImages.spinner).css({position:"relative",top:b+"px",left:f+"px"}).appendTo(g)}})}}function A(){var b=
parseInt(P.index,10)+1;b>=ma.length||r.find("#ivVideo_"+b).click()}function w(){var b;e.isDefined(ma)&&(b=ma[P.index]);if(e.isDefined(b)){K();var a=r.find("#ivLargeVideo").css("display","block");X?(X.isDetached()&&X.attach(a[0]),e.loadMediaIntoAiry(X,b,ya),X.show()):(X=e.createAiryInstanceForChromeful(a,b,ya,"ImmersiveView"),ya.enableContinuousPlay&&X.bind("ended",A));X.play({isAsync:!0})}}function L(){N();var b;b="hero-image"===P.type?r.find("#ivHeroImage_"+P.index):"image"===P.type?r.find("#ivImage_"+
P.index):"chromeful-video"===P.type||"chromeless-video"===P.type?r.find("#ivVideo_"+P.index):"360-spin"===P.type?r.find("#iv360"):e.isDefined(ha)?r.find("#ivHeroImage_"+P.index):r.find("#ivImage_"+P.index);e.isjQueryObjDefined(b)||(b=r.find("#ivImage_0"));m(b)}function m(b){r.find(".ivThumb").removeClass("selected");b.addClass("selected");b.hasClass("ivThumbVideo")?(P.type="chromeful-video",P.index=b.attr("id").split("_")[1],w()):b.hasClass("ivHeroImage")?(P.type="hero-image",P.index=b.attr("id").split("_")[1],
v(P.type)):b.hasClass("iv360Image")?(P.type="360-spin",P.index=0,g()):(P.type="image",P.index=b.attr("id").split("_")[1],v(P.type))}function g(){K();r.find("#ivLarge360").css("display","block");M();var b=r.find("#ivLarge360");b.css({opacity:0});setTimeout(function(){b.css({opacity:.4});c.animateStageIn(b)},200);D();t.postCountMetric("dppc_click360");ta=Date.now()}function u(){0<ta&&(x("dppc_duration360",Date.now()-ta),ta=0)}function x(b,a){E.ue&&E.ue.count(b,a)}function D(){if(0<ra){var b=r.find(".iv360Hint");
b.removeClass("iv360HintFaded");b.animate({opacity:1},200)}}function b(f,c){if(ra<f.length){var d=a("\x3cimg /\x3e").css({display:"block",width:6*oa+"px",height:ua+"px"});d.hide();c.append(d);d.get(0).onload=function(){c.closest(document.documentElement).length&&(ra++,1===ra&&(D(),0<ta&&x("dppc_loadTime360",Date.now()-ta)),0<Ga&&x("dppc_perSpriteloadTime360",Date.now()-Ga),r.find("#iv360Spinner").hide(),d.show(),za=5*S.imageLocations[Math.floor(Aa/S.imageLocations[0].length)][Aa%S.imageLocations[0].length],
b(f,c))};d.attr("src",f[ra].replace(/(\._SP)\d+(,)\d+/,"$1"+va+"$2"+wa));Ga=Date.now()}}function f(b){if(e.isDefined(S.spriteWidthSizes)&&0<S.spriteWidthSizes.length){var a=S.spriteWidthSizes,f=a.length,c=a[0],d=a[f-1];if(b<=c)return c;if(b>d)return d;for(c=0;c<f;c++)if(b>a[c]&&b<=a[c+1])return a[c+1]}else return b}function M(){var b=r.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),
height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",z.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),Ha=!0,l())}function l(){if(e.isDefined(S.spriteURLs)&&e.isDefined(r)&&Ha&&!Ia){var c=r.find("#ivLarge360"),d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",
width:"100%",bottom:0,opacity:0,display:"block"});e.isDefined(S.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",S.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(z.staticStrings.dragToSpin).appendTo(d);d.appendTo(c);var d=S.imageWidth,g=S.imageHeight,l=c.parent().width(),m=c.parent().height(),h=0,k=0;d/g>l/m?(va=f(l),wa=Math.round(g/d*va),oa=Math.ceil(l),ua=Math.ceil(wa/va*l),k=(m-ua)/2):(wa=
f(m),va=Math.round(d/g*wa),ua=Math.ceil(m),oa=Math.ceil(va/wa*m),h=(l-oa)/2);c.css({"margin-left":h,"margin-top":k,width:oa+"px",height:ua+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*oa+"px");b(S.spriteURLs,r.find("#image-360-sprites"),0);d=r.find("#ivLarge360");d.bind("mousedown",T);d.bind("touchstart",Q);d.bind("touchmove",J);d.bind("touchend",B);a(document).bind("mousemove",Y);a(document).bind("mouseup",R);e.isDefined(z.staticImages.grab)&&c.css("cursor",
"url('"+z.staticImages.grab+"'), auto");Ia=!0}}function Q(b){Da=!0;Ja=b.originalEvent.targetTouches[0].clientX}function J(b){Da&&(Z(b.originalEvent.targetTouches[0].clientX-Ja),Ja=b.originalEvent.targetTouches[0].clientX)}function B(b){Da&&(Da=!1)}function T(b){Ea=!0;Ka=b.originalEvent.clientX;e.isDefined(z.staticImages.grabbing)&&(b=r.find("#ivLarge360"),b.css("cursor","url('"+z.staticImages.grabbing+"'), auto"),b.parents(".a-declarative").last().css("cursor","url('"+z.staticImages.grabbing+"'), auto"));
return!1}function Y(b){Ea&&(Z(b.originalEvent.clientX-Ka),Ka=b.originalEvent.clientX)}function R(b){Ea&&(Ea=!1,e.isDefined(z.staticImages.grab)&&(b=r.find("#ivLarge360"),b.css("cursor","url('"+z.staticImages.grab+"'), auto"),b.parents(".a-declarative").last().css("cursor","auto")))}function Z(b){for(b=za-=b/oa*180;0>b;)b+=360;for(;360<b;)b-=360;za=b;var a;b=360;for(var f=0;f<ra;f++)for(var c=0;c<S.imageLocations[f].length;c++){var d=Math.abs(za-5*S.imageLocations[f][c]);d<b&&(b=d,a=f*S.imageLocations[0].length+
c)}a!==Aa&&(b=Math.floor(a/S.imageLocations[0].length),b!==Math.floor(Aa/S.imageLocations[0].length)&&(e.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),f=r.find("#image-360-sprites").children(),La.drawImage(f[b],0,0)),b=r.find(".iv360Hint").not(".iv360HintFaded"),e.isDefined(b)&&(b.addClass("iv360HintFaded"),b.animate({opacity:0},750)));Aa=a;b=a%S.imageLocations[0].length*-1*oa;a=-1*Math.floor(a/S.imageLocations[0].length)*ua;f=r.find("#ivLarge360").children("#image-360-sprites");
f.css("-webkit-transform","translate3d("+b+"px, "+a+"px, 0)");f.css("transform","translate3d("+b+"px, "+a+"px, 0)")}function ea(){r.delegate(".ivThumb","click",function(){var b=a(this);m(b)});r.delegate(".ivThumbVideoListOuter","click",function(){r.find(".ivThumbVideoListOuter").removeClass("selected");var b=a(this);b.addClass("selected");P.type="chromeful-video";P.index=b.attr("id").split("_")[1];w()})}function ia(){X&&!X.isDetached()&&(ya.volume=X.getVolume(),X.detach(),!document.all||E.atob||document.addEventListener||
(X=null));r.find("#ivLargeImage").empty();u()}function la(b,a){return 0<a?a/2:Math.min(0,Math.max(a,b))}function fa(b){var a=xa.top-(b.pageY-Ma[1])*Na;b=la(xa.left-(b.pageX-Ma[0])*Na,Fa.left);a=la(a,Fa.top);r.find(".fullscreen").css({left:b,top:a})}function ca(){r.delegate("#ivLargeImage","click",function(b){if(Ca)I();else if(Ba){r.find(".fullscreen").removeAttr("style");if(Ba){var a=r.find("#ivLargeImage"),f=a.find(".fullscreen");Qa?a.css("cursor","url('"+z.staticImages.zoomOut+"'), auto"):(a.css("cursor",
"-webkit-zoom-out"),a.css("cursor","-moz-zoom-out"),a.css("cursor","zoom-out"));Ca=!0;var c=r.find("#ivLargeImage");Fa.left=c.width()-f.width();Fa.top=c.height()-f.height();var c=a.height()/2,d=a.width()/2;Ma=[a.offset().left+d,a.offset().top+c];xa.top=c-f.height()/2;xa.left=d-f.width()/2;f.css({position:"relative",left:xa.left,top:xa.top});Na=Math.max(f.height()/a.height(),f.width()/a.width())}fa(b)}});r.delegate("#ivLargeImage","mousemove",function(b){Ca&&fa(b)})}function aa(b){if(e.isImmersiveViewEnabled(z,
V.getCurrentItem().color)){Pa=e.isDefined(b)&&"button-360-click"===b.action;p.isEnabled&&d.logImmersiveViewRequestServed(p);t.postCountMetric("dppc_immersiveViewOpened");if(e.isDefined(ja))ja.show();else{b=a("#auiImmersiveViewDiv");var f=a(E).height()-150,g=a(E).width()-75;ja=h.create(b,{name:"immersiveView",activate:"onclick",width:g,height:f,popoverLabel:"ImmersiveView",hideHeader:!0});b.click()}if(Oa){r=a("#ivMain");b=V.getCurrentItem().color;na=z.colorImages[b];ha=z.heroImage[b];ma=z.useChildVideos?
z.colorToVideo[b]:z.videos;sa=da()&&z.spin360ColorEnabled[b];S=da()?z.spin360ColorData[b]:void 0;N();ka=W=qa=ba=0;e.isDefined(ha)&&(W=ha.length);e.isDefined(na)&&(ba=na.length);e.isDefined(ma)&&(qa=ma.length);sa&&(ka=1);c.populateTitle(r.find("#ivTitle"),45,z);c.populateVariationSelection(r.find("#ivVariationSelection"));b=r.find("#ivMediaSelect");0===ba+ka||0===qa?(b.parent().hide(),r.find("#ivThumbs").addClass("noMediaSelection")):(b.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",
!0).text(z.staticStrings.allMedia+" ("+(W+ba+ka+qa)+")").appendTo(b),a("\x3coption/\x3e").attr("value","images").text(z.staticStrings.images+" ("+(W+ba+ka)+")").appendTo(b),a("\x3coption/\x3e").attr("value","videos").text(z.staticStrings.videos+" ("+qa+")").appendTo(b),b.parent().show(),b.val("all"));b=r.find("#ivThumbs");b.find(".ivRow").not(".placeholder").remove();for(var f=W+ba+qa+ka,l=g=0;g<f;)for(var m=b.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(b),M=0;3>M&&g<f;M++,
g++,l++)if(l<W){var w=ha[g].thumb,u=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+g).appendTo(m);u.find(".ivThumbImage").css("background",'url("'+c.getResizedThumbnailURL(w)+'") center no-repeat')}else if(l>=W&&l<ba+W)w=na[g-W].thumb,u=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(g-W)).appendTo(m),u.find(".ivThumbImage").css("background",'url("'+c.getResizedThumbnailURL(w)+'") center no-repeat');
else if(l>=W+ba&&l<ba+W+ka)u=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(m),u.find(".ivThumbImage").css("background",'url("'+(e.isDefined(z.staticImages.icon360)?c.getResizedThumbnailURL(z.staticImages.icon360,!0):"")+'") center no-repeat');else if(w=ma[g-ba-W-ka],u=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(g-ba-W-ka)).appendTo(m),u.find(".ivThumbImage").css("background",
'url("'+w.thumbUrl+'") center no-repeat'),e.isDefined(w)){var q={position:"triggerTop"},n=r.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");n.find(".ivVideoPopoverTitle").text(w.title);n.find(".ivVideoPopoverDuration").text(w.durationTimestamp);q.inlineContent=n[0];k.declarative.create(u,"a-tooltip",q)}b=r.find("#ivVideoList");b.find(".ivThumbVideoListOuter").not(".placeholder").remove();f=b.find(".placeholder");for(g=0;g<qa;g++)l=ma[g],m=f.clone().removeClass("placeholder").appendTo(b),
m.attr("id","ivVideoList_"+g),m.find(".ivThumbImage").css("background",'url("'+l.thumbUrl+'") center no-repeat'),m.find(".ivThumbTitle").text(l.title),m.find(".ivThumbDuration").text(l.durationTimestamp);r.find("#ivLarge360").empty();ra=0;Ia=Ha=!1;ya=z.airyConfig;Oa=!1;Ra()}}}function ga(b){var a=z.colorToAsin[b],f={},c=500;if(a&&a.asin){f.params={asin:a.asin};var d="360"+a.asin,g=Date.now();f.success=function(a){x("dppc_asyncRequestTime360",Date.now()-g);a&&e.isDefined(a.spin360.spin360Model)?(e.ajaxState(d,
"success"),z.spin360ColorData[b]=a.spin360.spin360Model,b===V.getCurrentItem().color&&(S=z.spin360ColorData[b],l())):f.error()};f.error=function(){t.postCountMetric("dppc_asyncFailed360");x("dppc_asyncRequestTime360",Date.now()-g);c*=2;16E3>=c?setTimeout(function(){g=Date.now();F.load("/gp/product/features/apparel-main-image/360.html",f)},c):e.ajaxState(d,"fail")};e.ajaxState(d)&&"fail"!==e.ajaxState(d)||(F.load("/gp/product/features/apparel-main-image/360.html",f),e.ajaxState(d,"sent"))}}function da(){return e.isDefined(z.spin360ConfigEnabled)&&
z.spin360ConfigEnabled}var U,z,V,pa,ja,r,ha,na,ma,W,ba,qa,ka,P,X,ya,S,sa,oa,ua,wa,va,Ka,Ja,Pa=!1,Ha=!1,Ia=!1,za=0,Aa=0,ta=0,Ga=0,Ea=!1,Da=!1,ra=0,La,Qa=navigator.userAgent.match(/msie|trident/i),Oa=!0,Ca=!1,Ba=!1,Fa={},xa={},Na,Ma,Ra=k.once(function(){y();ea();ca();k.on("a:popover:afterUpdatePosition:immersiveView",H);k.on("a:popover:afterShow:immersiveView",L);k.on("a:popover:afterHide:immersiveView",ia);C()});return function(b,f,d,g){U=this;z=b;V=f;p.refToModel=V;pa=g;da()&&(z.spin360ColorData[z.landingAsinColor]=
z.spin360ColorData[z.defaultColor],z.spin360ColorEnabled[z.landingAsinColor]=z.spin360ColorEnabled[z.defaultColor]);e.isDefined(z.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",c.addStyleCodeToURL(z.staticImages.icon360,"_FMpng_RI_"));U.render=function(b,a,f,c,d,g){Oa=!0;da()&&z.spin360ColorEnabled[b]&&!e.isDefined(z.spin360ColorData[b])&&(z.spin360ColorData[b]={},ga(b));e.isImmersiveViewEnabled(z,V.getCurrentItem().color)&&da()&&z.spin360ColorEnabled[b]&&
(a===z.maxAlts&&(b=c.find(".item.imageThumbnail"),f=c.find(".item.videoThumbnail"),e.isDefined(f)&&1<f.length?f.last().remove():b.last().remove(),a--),b=c.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),k.declarative.create(b,"button-360-click"),c.append(b),a++,t.postCountMetric("dppc_display360"));return a};U.update=function(b){};pa.register("imageClick",aa);pa.register("button360Click",aa)}});"use strict";B.when("A","a-modal","a-tooltip",
"jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(k,h,n,a,e,F,t,p,d,c){function G(){var d=I.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),g=d.find(".a-popover-inner"),d=d.height()-c.getDimension(g,"padding-top")-c.getDimension(g,"padding-bottom");a("#iv-tab-view-container").css("height",d);v=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==
a(this).css("display")}).length;1<v?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),g=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),d-=g):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();a("#iv-tab-view-container .iv-tab-content").css("height",d);k.trigger("dp:image-block:immersive-view:resize")}function C(){k.trigger("dp:image-block:immersive-view:reset")}function N(c){if(e.isImmersiveViewEnabled(y,I.getCurrentItem().color)){p.isEnabled&&d.logImmersiveViewRequestServed(p);
t.postCountMetric("dppc_immersiveViewOpened");e.isDefined(c)&&("button-360-click"===c.action?a("#iv360TabHeading").click():"videoIngressClick"===c.action?(A=c.clickTimeStamp,a("#ivVideosTabHeading").click()):a("#ivImagesTabHeading").click());var g=I.getImmersiveViewModalInstance();if(e.isDefined(g))g.show();else{c=a("#auiImmersiveViewDiv");var g=Math.min(Math.max(a(E).height()-150,540),1080),u=Math.min(Math.max(a(E).width()-75,990),1980),g=h.create(c,{name:"immersiveView",activate:"onclick",width:u,
height:g,popoverLabel:"ImmersiveView",hideHeader:!0});I.setImmersiveViewModalInstance(g);c.click()}K&&(K=!1,w(),k.trigger("dp:image-block:immersive-view:init"))}}var H,y,I,q,K=!0,v=0,A,w=k.once(function(){k.on("a:popover:afterUpdatePosition:immersiveView",G);k.on("a:popover:afterShow:immersiveView",G);k.on("a:popover:afterHide:immersiveView",C)}),L=k.once(function(){var c=a("#iv-tab-view-container ul.iv-tab-views li");c.bind("click",function(d){var e=c.filter(".iv-active");e.attr("id")!==a(this).attr("id")&&
k.trigger("dp:ivTabs:"+e.find("a").attr("data-iv-tab-view")+":deselect",d);c.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();e=a(this).find("a").attr("data-iv-tab-view");a("#"+e).show();"ivVideosTab"===e&&(d.clickTimeStamp=A||d.timeStamp);k.trigger("dp:ivTabs:"+e+":select",d);t.postCountMetric("dppc_"+e);return!1})});return function(a,c,d,h){H=this;y=a;I=c;p.refToModel=I;q=h;H.render=function(a,b,f,c,d,g){t.postCountMetric("dpcc_altThumbs_"+
b);K=!0};H.update=function(a){};H.getTitle=function(){};H.getVariationSelectionInfo=function(){};L();q.register("imageClick",N);q.register("button360Click",N);e.useTabbedImmersiveView(y)&&q.register("videoIngressClick",N)}});"use strict";B.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(k,h,n){return{load:function(a,e){e=e||{};e.timeout=e.timeout||4E3;k.ajax(a,e)}}});"use strict";B.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric",
"postEarlyMetric").register("imageBlockUtils",function(k,h,n,a,e,F,t,p){function d(b){return null!==b&&"undefined"!==typeof b}function c(b){var a=0;h.each(b,function(b,c){var d=parseInt(c[1],10);d>a&&(a=d)});return a}function G(b){var a=0;h.each(b,function(b,c){var d=parseInt(c[0],10);d>a&&(a=d)});return a}function C(b,a,d){a=a.width();if(d.naturalMainImageSize)return a;b=c(b);0<b&&(a=Math.min(a,b));return a}function N(b,a,c){a=a.height();if(c.naturalMainImageSize)return a;b=G(b);0<b&&(a=Math.min(a,
b));return a}function H(b){var a;h.each(b,function(b,c){d(a)||(a=c[1]/c[0])});return a||1}function y(b,a,c){a.fadeTo(500,0,function(){q(b,c);a.fadeTo(500,1)})}function I(b){b&&b.toggle()}function q(b,a){var c=a.find("img");d(c[b])&&h(c[b]).click()}function K(b,a){D[b]=a?a:D[b];return D[b]}function v(b,a,c){c=c||x;c=c.colorImages;if(1>c.length||!d(c[b])||!d(a))return-1;var g=-1;h.each(c[b],function(b,c){c.variant===a&&(g=b)});return g}function A(b,a,c){c=c||x;c=c.colorImages;return!(d(c)&&d(c[b])&&
d(c[b][a])&&d(c[b][a].main))||1>h.map(c[b][a].main,function(b,a){return a}).length?-1:c[b][a]}function w(b,a,c,d){d.parent().css("z-index",2);0!==c&&0!==a&&(a/=c,b>a?d.css("width",a/b*100+"%"):d.css("height",b/a*100+"%"))}function L(b,a){var c;if(c=b.useIV)c=b.colorImages&&b.colorImages[a]&&0<b.colorImages[a].length?!0:!1;t.isEnabled&&(t.IVApplicaple=c,p.logImmersiveViewApplicability(h,t));return c}function m(b){return b.playVideoInImmersiveView&&"false"!==b.playVideoInImmersiveView}var g,u,x=h.extend(!0,
{},e,F),D={};return{isDefined:d,isUndefinedOrEmpty:function(b){return d(b)?"object"===typeof b&&0===Object.keys(b).length:!0},isDefinedAndNotEmpty:function(b){return d(b)?"object"===typeof b&&0<Object.keys(b).length:!1},isjQueryObjDefined:function(b){return 0!==b.length},getAspectRatio:H,getMaxHeightOfMainImage:N,getMaxWidthOfMainImage:C,getMaxDimensionsOfMainImage:function(b,a,c){var d=N(b,a,c);a=C(b,a,c);b=H(b);c=a/b;a=Math.min(a,d*b);d=Math.min(d,c);return[d,a]},getContainerHeight:function(b,a,
c){var g=b.get(0);b=0;if(d(g)){b=g.offsetWidth/a;b=Math.min(b,c);var e;a=x.mainImageHeightPartitions;c=x.mainImageMaxSizes;if(d(c)&&d(a)){for(var m=0,h=E.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,g=0;g<a.length;g++)h>a[g]&&(m=g+1);c.length>=m&&(e=c[m])}d(e)&&(b=Math.min(e[1],b))}return b},getColorFromState:function(b,a){if(b){a=a||x;var c="";h.each(a.visualDimensions,function(a,d){b[d]&&(c+=" "+b[d])});return c&&c.substring(1)}},createThumbnail:function(b,a,c,
g){var e=c.find(".template").clone().removeClass("template").addClass("item"),m=document.createElement("img");m.src=a;e.find(".placeHolder").replaceWith(m);(a=b.heroVideoVariant)&&"hero-image"===b.type&&b.variant===a&&e.addClass("heroImageThumbnail");d(g)&&e.addClass(g);k.declarative.create(e,"thumb-action",b);c.append(e)},selectGivenThumbnail:function(b,a){var c=b.find(".a-button");a.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},
createAiryInstanceForChromeful:function(b,c,d,e,m,k,w,p){var q=h.extend({},d.foresterMetadataParams);null!==e&&(q.method+="."+e);var t=[];c.disabledViewIds&&(t=c.disabledViewIds);return n.embed({parentElement:b[0],streamingUrls:c.url,contentId:c.mediaObjectId,contentMinAge:Number(c.minimumAge||"")||0,contentTitle:c.title,swfUrl:d.swfUrl,foresterMetadataParams:q,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:c.slateUrl,postMediaSlate:c.slateUrl},videoAds:d.videoAds,
bindings:{play:function(){"ImmersiveView"===e?g||(g=!0,a.postCountMetric("dppc_chromefulVideoPlayedIV")):u||(u=!0,a.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(b,a,c){m&&(y(0,k,p),I(w))}}],disabledViewIds:t})},loadMediaIntoAiry:function(b,a,c){b&&b.getMediaSourceInfo()!==a.url&&b.loadMedia({mediaSourceInfo:a.url,contentId:a.mediaObjectId,contentMinAge:Number(a.minimumAge||"")||0,contentTitle:a.title,slateImages:{preloadSlate:a.slateUrl,
postMediaSlate:a.slateUrl}})},showUnavailable:function(b){b&&(h("#imageBlock .unvailableVariation").html(b),h("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){h("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:y,toggleVideoCaption:I,selectThumbnail:q,spinner:function(b,a){var c=h("#imageBlock .a-spinner").parent();0===c.length&&(c=h("\x3cdiv\x3e\x3c/div\x3e").append(h("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),b.append(c),c.css({position:"absolute",
left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));a?c.show():c.hide();return c},rankedImagesReadyEvent:function(b){return"ranked-images-ready-for-"+b},ajaxState:K,getIndexForVariant:v,getImageHash:A,lazyLoadingRequired:function(b,a,c){a=Math.max(v(b.color,a.getCurrentItem().variant,c),0);
a=-1!==A(b.color,a,c);b=c.colorToAsin[b.color]&&c.colorToAsin[b.color].asin;b=!b||"success"!==K(b);return!c.lazyLoadExperienceDisabled&&!a&&b},lazyLoadOnHoverEnabled:function(b){return!b.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:w,repositionVideoBanner:function(b,a,c,d){setTimeout(function(){var c=b.width()/b.height();w(c,16,9,a)},d||0)},getVideosCount:function(b,a){return a.useChildVideos&&a.colorToVideo[b]?a.colorToVideo[b].length:a.videos?a.videos.length:0},getVideoHash:function(b,a,
c){if(c.useChildVideos){if(!d(c.colorToVideo))return-1;b=c.colorToVideo[b]}else b=c.videos;return d(b)&&d(b[a])&&d(b[a].url)?b[a]:-1},isImmersiveViewEnabled:L,playVideoInImmersiveView:function(b,a){return L(b,a)&&m(b)},useTabbedImmersiveView:m}});"use strict";B.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(k,h,n,a,e){function F(c,d,e,g){if(!n.isjQueryObjDefined(c.find(".a-button-selected"))){var k=I.getCurrentItem();if(!g||"chromeless-video"!==
k.type||!y.autoplayVideo){g=0;if("hero-image"===k.type){g=p(k.color,k.variant);if(-1===g)return;g=-1!==g?g:0}var t=d+g;t>=e&&(g=0,t=d);d=a.getHeroImageHash(y,k.color,g);-1!==d&&(q.dispatch("updateModel",{data:{index:g,thumbnailIndex:t,variant:d.variant,type:"hero-image"}}),d=c.find(".item").get(t),n.selectGivenThumbnail(h(d),c))}}}function t(a,c,d){if("hero-video"===I.getCurrentItem().type)return a;c=y.heroImage&&y.heroImage[c];var g=a;n.isDefined(c)&&(h.each(c,function(c,d){a<y.maxAlts&&(n.createThumbnail({type:"hero-image",
index:c,thumbnailIndex:a,variant:d.variant},d.thumb,K,"imageThumbnail"),a++)}),F(K,g,a,d));return a}function p(a,c){var d=y.heroImage;if(1>d.length||!n.isDefined(d[a])||!n.isDefined(c))return-1;var g=-1;h.each(d[a],function(a,d){d.variant===c&&(g=a)});return g}function d(){if(v.length&&y.repositionHeroImage){var c=a.getHeroDimParams(y,I.getCurrentItem()),d;n.isDefined(c)&&(d=n.isDefined(c.xPos)?c.xPos+"px "+c.yPos+"px ":"center "+c.yPos+"px ",v.css({"background-position":d,"background-size":c.width+
"px "+c.height+"px ","max-width":c.width+"px ","min-height":c.height+"px ",filter:"","-ms-filter":""}))}}function c(c,d,e,g){if(v.length&&c&&d){if("function"===typeof e||g){var h=new Image;h.onload=g?function(){v.css("background-image",'url("'+c+'")')}:e;h.src=c}e=d[1];var h=d[0],k;g||v.css({"background-image":'url("'+c+'")'});y.repositionHeroImage&&(d=a.getHeroDimParams(y,I.getCurrentItem(),d),n.isDefined(d)&&(e=d.width,h=d.height,k=n.isDefined(d.xPos)?d.xPos+"px "+d.yPos+"px ":"center "+d.yPos+
"px "));v.css({"background-position":k,"background-size":e+"px "+h+"px ","max-width":e+"px ","min-height":h+"px ",filter:"","-ms-filter":""})}}function G(d,e,m,g){d=a.getHeroImageHash(y,d,e);if(-1===d)return-1;e=h.map(d.main,function(a,c){return c})[0];c(e,d.main[e],m,g)}function C(c,d,e){if("hero-image"!==c.type)return-1;var g=p(c.color,I.getCurrentItem().variant),g=-1!==g?g:0;if(-1===a.getHeroImageHash(y,c.color,g))return-1;var h=I.getCurrentItem();c.thumbnailIndex=h.thumbnailIndex;c.type=h.type;
c.variant=h.variant;c.index=g;N(c,d,e)}function N(c,d,e){var g=a.getHeroImageHash(y,c.color,c.index),h;h=c&&A&&k.equals(c,A)?!0:!1;A||(A=c);if(!h&&c||d)G(c.color,c.index,d,e),A=c;v.removeClass("hide-background");k.trigger("dp:image-block:update",g)}var H,y,I,q,K,v,A={};return function(a,c,e,g){H=this;y=a;I=c;q=g;y.heroImage[y.landingAsinColor]=y.heroImage[y.defaultColor];H.render=function(a,c,d,b,g,e,l){K=b;v=h("#heroImage");a=t(c,a,e);C(I.getCurrentItem(),l,e);return a};H.update=function(a){var c=
a.data;"ingress"!==c.type&&v.addClass("hide-background");"swatchHover"===a.type?a.captured||(c.type=I.getCurrentItem().type,-1!==C(c)&&(a.captured=!0)):"hero-image"===c.type&&(N(c),"click"!==a.type&&y.usePeekHover||n.selectGivenThumbnail(a.$declarativeParent,K))};q.register("resize",d)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(k,h,n,a,e){var F,t,p,d;return function(a,e,h,N){F=this;t=a;p=N;F.render=
function(a,c,e,h,p,G,C){d=h;F=this;e=t.maxAlts;h=c;p=t.colorImages[a]?t.colorImages[a].length:0;p+=n.getVideosCount(a,t);a=t.heroImage[a];G=0;a&&(G=a.length);a=p+G;a>e&&(e=a-e,a=d.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),e+="+",h={type:"ingress",index:0,thumbnailIndex:c,variant:""},a.find("#altIngressText").append(e),k.declarative.create(a,"thumb-action",h),d.append(a),h=c++);return h};F.update=function(a){"ingress"===a.data.type&&
"click"===a.type&&p.dispatch("imageClick",a)}}});"use strict";B.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(k,h,n){return function(a,e,h){this.getImageHash=function(e){var k=h.getCurrentItem();e=n.getIndexForVariant(k.color,e||"MAIN",a);return n.getImageHash(k.color,e,a)};this.onImageUpdateForTwister=function(a){e.register("updateSelection",function(e){"swatchClick"===e.type&&"function"===typeof a&&a()})}}});"use strict";B.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",
function(k,h,n){function a(a,e){var d;if(e.repositionHeroImage){d=a[1];var c=a[0];if(768>=(E.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))d*=.7,c*=.7;else{var h=((E.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,h=Math.max(Math.min(h,1),0);d*=.7+.3*h;c*=.7+.3*h}d=[d,c]}return d}function e(a,e,d){var c;if(d.repositionHeroImage){var h=E.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;
if(n.isDefined(d)){c=Math.max((h-Math.min(1500,a))/2,0);var k=Math.max((h-a)/2,0);c-=k;h=Math.max(Math.min(h,1500),1024);c=c+(h-420-23)/2-a/e[1]*d}}return c}function F(a,e,d){a=a.heroImage;return!(n.isDefined(a)&&n.isDefined(a[e])&&n.isDefined(a[e][d])&&n.isDefined(a[e][d].main))||1>h.map(a[e][d].main,function(a,d){return d}).length?-1:a[e][d]}return{getHeroImageHash:F,getHeroDimParams:function(k,p,d){if(k.repositionHeroImage){if(!n.isDefined(d)){d=F(k,p.color,p.index);if(-1===d)return;p=h.map(d.main,
function(a,d){return d})[0];d=d.main[p]}p=a(d,k);k=e(p[0],d,k);return{height:p[1],width:p[0],xPos:k,yPos:75}}}}});"use strict";B.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(k,h,n,a,e,F,t){function p(a,d){var e=k.copy(a);if(t.isDefined(a)&&a.length>d){try{for(var h=-1,n=0;n<a.length;n++){var p=a.charAt(n);if(" "===p||"."===p||"?"===p||";"===p||","===p||":"===p)h=n;if(n===d-4){e=a.substring(0,-1===h?n:h);break}}}catch(I){e=
a.substring(0,d-3)}e+="..."}return e}function d(a,d){var e=a.lastIndexOf(".");return a="_"===a.charAt(e-1)?a.substring(0,e-1)+d+a.substring(e):a.substring(0,e)+"."+d+a.substring(e)}return{getDimension:function(a,d){var e=parseInt(a.css(d),10);return isNaN(e)?0:e},attachTabSelectHandler:function(a,d){k.on("dp:ivTabs:"+a+":select",d)},attachTabDeselectHandler:function(a,d){k.on("dp:ivTabs:"+a+":deselect",d)},attachImmersiveViewResizeHandler:function(a){k.on("dp:image-block:immersive-view:resize",a)},
detachImmersiveViewResizeHandler:function(a){k.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){k.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(a){h("#"+a).hide()},unhideTabHeading:function(a){h("#"+a).show()},addStyleCodeToURL:d,getResizedThumbnailURL:function(a,e){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,
"");var h="_AA50_";e&&(h+="FMpng_RI_");return d(a,h)},populateVariationSelection:function(a){if(t.isDefined(E.DetailPage)&&t.isDefined(E.DetailPage.StateController)){a.empty();var d=E.DetailPage.StateController.getState(),e=d.variation_label_order,k;for(k in e)if(e.hasOwnProperty(k)){var n=e[k],p=d.selected_variations[n],n=d.variation_display_labels[n];p&&h("\x3cdiv/\x3e").addClass("ivVariations").text(n+":"+p).appendTo(a)}}},populateTitle:function(a,d,e){a.attr("title",e.title);a.text(p(e.title,
d))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,d){a.animate({opacity:.4},100,d)},logError:function(a,d,e,h){E.ueLogError&&E.ueLogError(h,{logLevel:a,attribution:d,message:e})}}});"use strict";B.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(k,h,n,a,e,F,t,p){function d(){var a=m.getCurrentItem().color;x=L.colorImages[a];u=L.heroImage[a];
D=b=0;e.isDefined(u)&&(D=u.length);e.isDefined(x)&&(b=x.length)}function c(a){return a.hiRes||a.large||a.main[a.main.length-1]}function G(){var a=g.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,h=Math.min(b/e,c/f),k=f*h,l=e*h;1>h?(B?a.css("cursor","url('"+L.staticImages.zoomIn+
"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),J=!0):J=!1;e=Math.min(l,e);f=Math.min(k-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");Q=!1}function C(a){var b=g.find("#ivLargeImage");b.css("visibility","hidden");b.empty();p.animateStageIn(b);b.append(a);G()}function E(b){g.find("#ivLargeImage").css("display","none");g.find("#ivLargeImage").css("display","block");var d;"hero-image"===
b?e.isDefined(u)&&(d=c(u[f.index])):e.isDefined(x)&&(d=c(x[f.index]));if(e.isDefined(d)){g.find(".fullscreen").remove();var h=a("\x3cimg\x3e").attr("src",d).addClass("fullscreen"),k=g.find("#ivLargeImage");p.animateStageOut(k,function(){h.load(function(){C(h)});if(h[0].complete)C(h);else{k.empty();var b=(k.height()-104)/2,c=(k.width()-80)/2;a("\x3cimg\x3e").attr("src",L.staticImages.spinner).css({position:"relative",top:b+"px",left:c+"px"}).appendTo(k)}})}}function H(a){g.find(".ivThumb").removeClass("selected");
a.addClass("selected");a.hasClass("ivHeroImage")?f.type="hero-image":f.type="image";f.index=a.attr("id").split("_")[1];E(f.type);t.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(f.index,10)+1)+"_"+(D+b))}function y(){g.delegate(".ivThumb","click",function(){var b=a(this);H(b)})}function I(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function q(a){var b=T.top-(a.pageY-R[1])*Y;a=I(T.left-(a.pageX-R[0])*Y,O.left);b=I(b,O.top);g.find(".fullscreen").css({left:a,top:b})}function K(){g.delegate("#ivLargeImage",
"click",function(a){if(Q)G();else if(J){g.find(".fullscreen").removeAttr("style");if(J){var b=g.find("#ivLargeImage"),c=b.find(".fullscreen");B?b.css("cursor","url('"+L.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Q=!0;var d=g.find("#ivLargeImage");O.left=d.width()-c.width();O.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;R=[b.offset().left+e,b.offset().top+d];T.top=d-c.height()/2;T.left=e-c.width()/2;
c.css({position:"relative",left:T.left,top:T.top});Y=Math.max(c.height()/b.height(),c.width()/b.width())}q(a);t.postCountMetric("dpcc_iv_largeImageCLick")}});g.delegate("#ivLargeImage","mousemove",function(a){Q&&q(a)})}function v(){g.find("#ivLargeImage").empty()}function A(c){if(l){g=a("#ivMain");d();f=m.getCurrentItem();p.populateTitle(g.find("#ivTitle"),160,L);p.populateVariationSelection(g.find("#ivVariationSelection"));c=g.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var h=
D+b,k=0,n=0;k<h;)for(var q=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),v=0;4>v&&k<h;v++,k++,n++)if(n<D){var y=u[k].thumb,t=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+k).appendTo(q);t.find(".ivThumbImage").css("background",'url("'+p.getResizedThumbnailURL(y)+'") center no-repeat')}else n>=D&&n<b+D&&(y=x[k-D].thumb,t=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+
(k-D)).appendTo(q),t.find(".ivThumbImage").css("background",'url("'+p.getResizedThumbnailURL(y)+'") center no-repeat'));Z();l=!1}c=a("#ivImagesTab").height();g.css("height",c);h=g.find("#ivTitle").outerHeight(!0);k=g.find("#ivVariationSelection").outerHeight(!0);n=g.find("#ivThumbs");q=p.getDimension(n,"margin-top")+p.getDimension(n,"margin-bottom");n.css("height",c-h-k-q);g.find("#ivLargeImage").css("height",c);c=g.find("#ivStage");h=g[0]&&g[0].getBoundingClientRect&&Math.floor(g[0].getBoundingClientRect().width)||
g.width();c.css("width",h-p.getDimension(g,"padding-left")-p.getDimension(g,"padding-right")-g.find("#ivThumbColumn").width()-p.getDimension(c,"margin-left")-p.getDimension(c,"margin-right"));f=m.getCurrentItem();c="hero-image"===f.type?g.find("#ivHeroImage_"+f.index):"image"===f.type?g.find("#ivImage_"+f.index):e.isDefined(u)?g.find("#ivHeroImage_"+f.index):g.find("#ivImage_"+f.index);e.isjQueryObjDefined(c)||(c=g.find("#ivImage_0"));H(c)}var w,L,m,g,u,x,D,b,f,B=navigator.userAgent.match(/msie|trident/i),
l=!0,Q=!1,J=!1,O={},T={},Y,R,l=!0,Z=k.once(function(){y();K();p.attachImmersiveViewResizeHandler(A);p.attachTabDeselectHandler("ivImagesTab",v)});return function(c,e,f,g){w=this;L=c;m=e;w.render=function(c,e,f,g,h,k){l=!0;d();0===D+b?p.hideTabHeading("ivImagesTabHeading"):p.unhideTabHeading("ivImagesTabHeading");1===D+b?a("#ivThumbs").hide():a("#ivThumbs").show()};w.update=function(a){};p.attachTabSelectHandler("ivImagesTab",A)}});"use strict";B.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils",
"ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(k,h,n,a,e,F,t,p,d,c){function G(){m.delegate(".ivThumb","click",function(){var b=a(this);m.find(".ivThumb").removeClass("selected");b.addClass("selected");b.hasClass("ivThumbVideo")&&(g.type="chromeful-video",g.index=b.attr("id").split("_")[1])})}function C(){var b=a("#ivVideosTab").height();m.css("height",b);var c=m.find(".vse-video-block");
x=b-p.getDimension(m,"padding-top")-p.getDimension(m,"padding-bottom");c.css({"max-height":b,overflow:"hidden"});if(Q)m.css({"max-width":Math.floor(1.77*x)});else{var b=m.find(".vse-airy-container"),c=m.find(".vse-ib-metadata"),d=Math.floor(x-p.getDimension(c,"height")),e=Math.floor(1.77*d);b.css({"max-height":d,"max-width":e});c.css("max-width",e);J&&(b=m.find(".vse-vertical-scroll"),c=p.getDimension(b,"margin-top")+p.getDimension(b,"margin-bottom"),b.css("max-height",x-c))}}function B(){H();u&&
u.pause();O=!1;M=!0;f=null}function H(){O=!1;u&&u.pause()}function y(b){f=b.clickTimeStamp;l&&(c.get(k,"#ivVideoBlock",L,Z,ea),m=a("#ivVideoBlock"),w.getCurrentItem(),g=w.getCurrentItem(),T());C();O=!0;l=!1;K()}function I(b){l&&(m=a("#ivVideoBlock"),w.getCurrentItem(),g=w.getCurrentItem(),T());O&&K();C()}function q(a){u=a.airy;O&&u.play({isAsync:!0})}function K(){if(u&&(u.play({isAsync:!0,eventTimestamp:f||(new Date).getTime()}),t.postCountMetric("dpcc_vse_videoBlock_video_played"),M)){var a=E.ue;
a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,t.postTimeMetric("dpcc_vse_vitff",a),M=!1)}}var v,A,w,L,m,g,u,x,D,b,f,M=!0,l=!0,Q=!1,J=!1,O=!1,T=k.once(function(){G();p.attachImmersiveViewResizeHandler(I);p.attachTabDeselectHandler("ivVideosTab",H);p.attachImmersiveViewResetHandler(B)}),Y=function(b,c,d){a("#ivVideoBlockSpinner").addClass("aok-hidden");t.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+c.placement);b=w.getCurrentItem().color;b=e.getVideoHash(b,0,A);u||(u=
e.createAiryInstanceForChromeful(a("#ivVideoBlock"),b,A.airyConfig,"ImmersiveView"));Q=!0;a("#ivVideoBlock").css({"max-width":1.77*x,margin:"0 auto"});O&&Q&&u.play({isAsync:!0})},R=function(b,d,e){l||c.get(b,"#ivVideoBlock",L,Z,ea);a("#ivVideoBlockSpinner").addClass("aok-hidden")},Z=function(a,b,c){J=!0;C();O&&K()},ea=function(a,b,c){t.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,c,f,g){v=this;A=a;w=c;v.render=function(a,
c,f,g,h,m){a=w.getCurrentItem().color;c=e.getVideoHash(a,0,A);D=A.colorToAsin[a]&&A.colorToAsin[a].asin;D=e.isDefined(D)?D:A.mediaAsin;b=null!==A.vseVideoDataSourceTreatment&&"T1"===A.vseVideoDataSourceTreatment?"ASIN":"physicalID";l=!0;-1===c?p.hideTabHeading("ivVideosTabHeading"):(p.unhideTabHeading("ivVideosTabHeading"),L={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:D,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,
contentIDType:b,videoURL:c.url,imageURL:c.slateUrl},requestId:A.dpRequestId,metadata:{ProductTitle:A.title}},d.get(k,"#ivVideoBlock",L,R,Y))};v.update=function(a){};p.attachTabSelectHandler("ivVideosTab",y);k.on("vseAiry",q)}});"use strict";B.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(k,h,n,a,e,F,t,p,d){function c(){var b=a("#iv360Tab").height();J.css("height",
b);var c=J.find("#ivTitle360").outerHeight(!0),e=J.find("#ivVariationSelection360").outerHeight(!0),f=J.find("#ivThumbs360"),g=d.getDimension(f,"margin-top")+d.getDimension(f,"margin-bottom");f.css("height",b-c-e-g);b=J.find("#ivStage360");c=J[0]&&J[0].getBoundingClientRect&&Math.floor(J[0].getBoundingClientRect().width)||J.width();b.css("width",c-d.getDimension(J,"padding-left")-d.getDimension(J,"padding-right")-J.find("#ivThumbColumn360").width()-d.getDimension(b,"margin-left")-d.getDimension(b,
"margin-right"))}function B(){y();var a=J.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});d.animateStageIn(a)},200);C()}function C(){if(0<V){var a=J.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function E(b,c){if(V<b.length){var d=a("\x3cimg /\x3e").css({display:"block",width:6*T+"px",height:Y+"px"});d.hide();c.append(d);d.get(0).onload=function(){c.closest(document.documentElement).length&&(V++,1===V&&(C(),0<ga&&(t.time("dppc_loadTime360",
Date.now()-ga,l.mediaAsin),p.postTimeMetric("dppc_loadTime360",Date.now()-ga))),0<da&&(t.time("dppc_perSpriteloadTime360",Date.now()-da,l.mediaAsin),p.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-da)),J.find("#iv360Spinner").hide(),d.show(),ca=5*O.imageLocations[Math.floor(aa/O.imageLocations[0].length)][aa%O.imageLocations[0].length],E(b,c))};d.attr("src",b[V].replace(/(\._SP)\d+(,)\d+/,"$1"+Z+"$2"+R));da=Date.now()}}function H(a){if(e.isDefined(O.spriteWidthSizes)&&0<O.spriteWidthSizes.length){var b=
O.spriteWidthSizes,c=b.length,d=b[0],f=b[c-1];if(a<=d)return d;if(a>f)return f;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function y(){var b=J.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",
l.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),la=!0,I())}function I(){if(e.isDefined(O.spriteURLs)&&e.isDefined(J)&&la&&!fa){var b=J.find("#ivLarge360"),c=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});e.isDefined(O.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",
O.staticImages.hint360).appendTo(c);a("\x3cdiv\x3e").css({"text-align":"center"}).text(l.staticStrings.dragToSpin).appendTo(c);c.appendTo(b);var c=O.imageWidth,d=O.imageHeight,f=b.parent().width(),g=b.parent().height(),h=0,k=0;c/d>f/g?(Z=H(f),R=Math.round(d/c*Z),T=Math.ceil(f),Y=Math.ceil(R/Z*f),k=(g-Y)/2):(R=H(g),Z=Math.round(c/d*R),Y=Math.ceil(g),T=Math.ceil(Z/R*g),h=(f-T)/2);b.css({"margin-left":h,"margin-top":k,width:T+"px",height:Y+"px",overflow:"hidden",position:"relative"});b.children("#image-360-sprites").css("width",
6*T+"px");E(O.spriteURLs,J.find("#image-360-sprites"),0);c=J.find("#ivLarge360");c.bind("mousedown",A);c.bind("touchstart",q);c.bind("touchmove",K);c.bind("touchend",v);a(document).bind("mousemove",w);a(document).bind("mouseup",L);e.isDefined(l.staticImages.grab)&&b.css("cursor","url('"+l.staticImages.grab+"'), auto");fa=!0}}function q(a){z=!0;ia=a.originalEvent.targetTouches[0].clientX}function K(a){z&&(m(a.originalEvent.targetTouches[0].clientX-ia),ia=a.originalEvent.targetTouches[0].clientX)}function v(a){z&&
(z=!1)}function A(a){U=!0;ea=a.originalEvent.clientX;e.isDefined(l.staticImages.grabbing)&&(a=J.find("#ivLarge360"),a.css("cursor","url('"+l.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+l.staticImages.grabbing+"'), auto"));return!1}function w(a){U&&(m(a.originalEvent.clientX-ea),ea=a.originalEvent.clientX)}function L(a){U&&(U=!1,e.isDefined(l.staticImages.grab)&&(a=J.find("#ivLarge360"),a.css("cursor","url('"+l.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"auto")))}function m(a){ca-=a/T*180;ja&&(t.count("dppc_360dragToSpin",l.mediaAsin),p.postCountMetric("dppc_360dragToSpin"));ja=!1;for(a=ca;0>a;)a+=360;for(;360<a;)a-=360;ca=a;var b;a=360;for(var c=0;c<V;c++)for(var d=0;d<O.imageLocations[c].length;d++){var f=Math.abs(ca-5*O.imageLocations[c][d]);f<a&&(a=f,b=c*O.imageLocations[0].length+d)}b!==aa&&(a=Math.floor(b/O.imageLocations[0].length),a!==Math.floor(aa/O.imageLocations[0].length)&&(e.isDefined(pa)||(pa=document.createElement("canvas").getContext("2d")),
c=J.find("#image-360-sprites").children(),pa.drawImage(c[a],0,0)),a=J.find(".iv360Hint").not(".iv360HintFaded"),e.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));aa=b;a=b%O.imageLocations[0].length*-1*T;b=-1*Math.floor(b/O.imageLocations[0].length)*Y;c=J.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function g(){if(ha){J=a("#ivMain360");var b=Q.getCurrentItem().color;
x()&&D(b);O=x()?l.spin360ColorData[b]:void 0;d.populateTitle(J.find("#ivTitle360"),160,l);d.populateVariationSelection(J.find("#ivVariationSelection360"));J.find("#ivLarge360").empty();V=0;fa=la=!1;aa=ca=0;na();ha=!1}0!==a("#iv360Tab").height()&&(d.detachImmersiveViewResizeHandler(g),c(),B(),ga=Date.now(),r=ja=!0,t.count("dppc_click360",l.mediaAsin),p.postCountMetric("dppc_click360"))}function u(a){var b=l.colorToAsin[a],c={},d=500;if(!b||!b.asin)if(a===l.defaultColor)b={asin:l.winningAsin};else return;
c.params={asin:b.asin};var f="360"+b.asin,g=Date.now();c.success=function(b){t.time("dppc_asyncRequestTime360",Date.now()-g,l.mediaAsin);p.postTimeMetric("dppc_asyncRequestTime360",Date.now()-g);b&&e.isDefined(b.spin360.spin360Model)?(e.ajaxState(f,"success"),l.spin360ColorData[a]=b.spin360.spin360Model,a===Q.getCurrentItem().color&&(O=l.spin360ColorData[a],I())):c.error()};c.error=function(){t.count("dppc_asyncFailed360",l.mediaAsin);p.postCountMetric("dppc_asyncFailed360");t.time("dppc_asyncRequestTime360",
Date.now()-g,l.mediaAsin);p.postTimeMetric("dppc_asyncRequestTime360",Date.now()-g);d*=2;16E3>=d?setTimeout(function(){g=Date.now();F.load("/gp/product/features/apparel-main-image/360.html",c)},d):e.ajaxState(f,"fail")};e.ajaxState(f)&&"fail"!==e.ajaxState(f)||(F.load("/gp/product/features/apparel-main-image/360.html",c),e.ajaxState(f,"sent"))}function x(){return e.isDefined(l.spin360ConfigEnabled)&&l.spin360ConfigEnabled}function D(a){return e.isDefinedAndNotEmpty(l.spin360ColorData[a])?!0:l.spin360ColorEnabled.hasOwnProperty(a)?
l.landingAsinColor===l.defaultColor?b():l.spin360ColorEnabled[a]:b()}function b(){return e.isDefined(l.spin360LazyLoadEnabled)&&l.spin360LazyLoadEnabled}function f(){r&&(t.time("dppc_duration360",Date.now()-ga,l.mediaAsin),p.postTimeMetric("dppc_duration360",Date.now()-ga),r=!1)}var M,l,Q,J,O,T,Y,R,Z,ea,ia,la=!1,fa=!1,ca=0,aa=0,ga=0,da=0,U=!1,z=!1,V=0,pa,ja=!0,r=!1,ha=!0,na=k.once(function(){d.attachImmersiveViewResizeHandler(g);d.attachImmersiveViewResizeHandler(c);d.attachImmersiveViewResetHandler(f);
d.attachTabDeselectHandler("iv360Tab",f)});return function(c,f,h,m){M=this;l=c;Q=f;x()&&!b()&&(l.spin360ColorData[l.landingAsinColor]=l.spin360ColorData[l.defaultColor],l.spin360ColorEnabled[l.landingAsinColor]=l.spin360ColorEnabled[l.defaultColor]);e.isDefined(l.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",d.addStyleCodeToURL(l.staticImages.icon360,"_FMpng_RI_"));M.render=function(b,c,f,g,h,m){if(b===l.landingAsinColor||l.spin360ColorEnabled.hasOwnProperty(b))return ha=
!0,x()&&D(b)?(e.isUndefinedOrEmpty(l.spin360ColorData[b])&&(l.spin360ColorData[b]={},u(b)),a("#ivThumbs360").hide(),d.unhideTabHeading("iv360TabHeading")):d.hideTabHeading("iv360TabHeading"),e.isImmersiveViewEnabled(l,Q.getCurrentItem().color)&&x()&&D(b)&&(c===l.maxAlts&&(b=g.find(".item.imageThumbnail"),f=g.find(".item.videoThumbnail"),e.isDefined(f)&&1<f.length?f.last().remove():b.last().remove(),c--),b=g.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),
k.declarative.create(b,"button-360-click"),g.append(b),c++,t.count("dppc_display360",l.mediaAsin),p.postCountMetric("dppc_display360")),c};M.update=function(a){};d.attachTabSelectHandler("iv360Tab",g)}});B.register("nexusLogger360",function(){return{count:function(k,h){E.ue&&E.ue.event({asin:h,metricName:k,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(k,h,n){E.ue&&E.ue.event({asin:n,metricName:k,metricValue:h},"hit-360","hit360.clientEvent.3")}}});"use strict";B.when("postMetric",
"imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(k,h){try{var n=E.location.host,a={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},e=n.split(".")[1],F=-1===n.indexOf(".proxy.amazon.com")?"/vap/ew/":void 0!==a[e]?a[e]:"https://www.amazon.com/vap/ew/",t="vse_lazyLoaderHook:success:",p="vse_lazyLoaderHook:error:",d="vse_preLoaderHook:success:",c="vse_preLoaderHook:error:",G=4E3,C=3}catch(N){h.logError("FATAL","vse_ns_desktop","[Domain] ",N)}B.register("vse_ns_preLoaderHook",
function(){function a(e,n){try{var p=e.A,t=e.block,v=e.request,A=e.handleFailure,w=e.handleSuccess,B=p.$;n--;var m=C-n-1,g=p.now();p.ajax(F+"componentbuilder",{params:v,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:v.timeout||G,withCredentials:!0,success:function(a){var c=p.now()-g;k.postTimeMetric(d,c);k.postCountMetric(d+v.page+":"+v.placement+":"+m);B(t).html(a);w(p,v,a)},error:function(d){k.postCountMetric(c+v.page+":"+v.placement+":"+m);(0===d.http.status||
500<=d.http.status&&599>=d.http.status)&&0<n?a(e,n):(k.postCountMetric(c,1),A(p,v,d))}})}catch(u){h.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",u)}}return{get:function(c,d,e,h,k){a({A:c,block:d,request:e,handleFailure:k,handleSuccess:h},C)}}});B.register("vse_ns_lazyLoaderHook",function(){function a(c,d,e){try{var n=c.A,v=c.context,A=c.handleFailure,w=c.handleSuccess;d.attr("data-configuration");var B=atob(d.attr("data-configuration")),m=JSON.parse(B),g={pageContext:v,configuration:m},
u=n.now();e--;var x=C-e-1;n.ajax(F+"subcomponent/"+m.type,{params:g,paramsFormat:"json",method:"post",contentType:"application/json",timeout:v.timeout||G,withCredentials:!0,success:function(a){var c=n.now()-u;k.postTimeMetric(t,c);k.postCountMetric(t+v.page+":"+v.placement+":"+m.type+":"+x);d.html(a);w(n,g,a)},error:function(b){k.postCountMetric(p+v.page+":"+v.placement+":"+m.type+":"+x);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<e?a(c,d,e):(k.postCountMetric(p,1),A(n,g,b))}})}catch(D){h.logError("FATAL",
"vse_ns_desktop","[vse_ns_lazyLoaderHook] ",D)}}return{get:function(c,d,e,h,k){var n=c.$;n(d+" div[data-configuration]").each(function(){a({A:c,context:e,handleFailure:k,handleSuccess:h},n(this),C)})}}})})});