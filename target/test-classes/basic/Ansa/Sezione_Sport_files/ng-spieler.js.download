;(function(version){
var spielerFactory = function(){/*! 1.51.3 - Darek Zieliński.master.32943d87456 */

"use strict";function DUMMY(){}function FALSE(){return false}function TRUE(){return true}function and(a,b){return function(){return a.apply(a,arguments)&&b.apply(b,arguments)}}function not(func){return function(){return!func.apply(func,arguments)}}function equals(compareWith){return function(what){return what===compareWith}}function sum(a,b){return a+b}function sumArray(a,b){return a.concat(b)}function toInt(current){return parseInt(current)}function hasProp(key){return function(object){return object.hasOwnProperty(key)}}function isPropOf(object){return function(key){return object.hasOwnProperty(key)}}function prop(key){return function(object){return object[key]}}function propOf(object){return function(key){return object[key]}}function compose(){var functions=Array.from(arguments);return function(){var self=this;return functions.reduceRight(function(args,func){return[func.apply(self,args)]},arguments)[0]}}(function(){"use strict";if(!Array.prototype.find){Array.prototype.find=function(predicate){if(this===null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof predicate!=="function"){throw new TypeError("predicate must be a function")}var list=Object(this);var length=list.length>>>0;var thisArg=arguments[1];var value;for(var i=0;i<length;i++){value=list[i];if(predicate.call(thisArg,value,i,list)){return value}}return undefined}}if(!Array.prototype.reduce){Array.prototype.reduce=function(callback){if(this===null){throw new TypeError("Array.prototype.reduce called on null or undefined")}if(typeof callback!=="function"){throw new TypeError(callback+" is not a function")}var t=Object(this),len=t.length>>>0,k=0,value;if(arguments.length===2){value=arguments[1]}else{while(k<len&&!(k in t)){k++}if(k>=len){throw new TypeError("Reduce of empty array with no initial value")}value=t[k++]}for(;k<len;k++){if(k in t){value=callback(value,t[k],k,t)}}return value}}if(!Object.values){Object.values=function(O){return Object.keys(O).reduce(function(v,k){return v.concat(typeof k==="string"&&O.propertyIsEnumerable(k)?[O[k]]:[])},[])}}if(!Object.entries){Object.entries=function(O){return Object.keys(O).reduce(function(e,k){return e.concat(typeof k==="string"&&O.propertyIsEnumerable(k)?[[k,O[k]]]:[])},[])}}if(!Object.assign){Object.assign=function(target){if(target===null){throw new TypeError("Cannot convert undefined or null to object")}target=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==null){for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}}return target}}if(!Array.from){Array.from=function(){var toStr=Object.prototype.toString;var isCallable=function(fn){return typeof fn==="function"||toStr.call(fn)==="[object Function]"};var toInteger=function(value){var number=Number(value);if(isNaN(number)){return 0}if(number===0||!isFinite(number)){return number}return(number>0?1:-1)*Math.floor(Math.abs(number))};var maxSafeInteger=Math.pow(2,53)-1;var toLength=function(value){var len=toInteger(value);return Math.min(Math.max(len,0),maxSafeInteger)};return function from(arrayLike){var C=this;var items=Object(arrayLike);if(arrayLike===null){throw new TypeError("Array.from requires an array-like object - not null or undefined")}var mapFn=arguments.length>1?arguments[1]:void undefined;var T;if(typeof mapFn!=="undefined"){if(!isCallable(mapFn)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){T=arguments[2]}}var len=toLength(items.length);var A=isCallable(C)?Object(new C(len)):new Array(len);var k=0;var kValue;while(k<len){kValue=items[k];if(mapFn){A[k]=typeof T==="undefined"?mapFn(kValue,k):mapFn.call(T,kValue,k)}else{A[k]=kValue}k+=1}A.length=len;return A}}()}if(!Array.prototype.fill){Array.prototype.fill=function(value){if(this===null){throw new TypeError("this is null or not defined")}var O=Object(this);var len=O.length>>>0;var start=arguments[1];var relativeStart=start>>0;var k=relativeStart<0?Math.max(len+relativeStart,0):Math.min(relativeStart,len);var end=arguments[2];var relativeEnd=end===undefined?len:end>>0;var final=relativeEnd<0?Math.max(len+relativeEnd,0):Math.min(relativeEnd,len);while(k<final){O[k]=value;k++}return O}}(function(){if(typeof window.CustomEvent==="function")return false;function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent("CustomEvent");evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent})();var console=window.console;var logFns=["log","info","warn","error","assert","dir","clear","profile","profileEnd"];var method;if(typeof console==="undefined"){console={}}logFns.forEach(function(method){if(typeof console[method]==="undefined"){console[method]=DUMMY}});if(typeof console==="object"&&typeof console.log==="object"){logFns.forEach(function(method){console[method]=Function.prototype.call.bind(console[method],console)})}window.console=console})();(function(global,factory){global.ES6Promise=factory()})(window,function(){"use strict";function objectOrFunction(x){var type=typeof x;return x!==null&&(type==="object"||type==="function")}function isFunction(x){return typeof x==="function"}var _isArray=void 0;if(Array.isArray){_isArray=Array.isArray}else{_isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"}}var isArray=_isArray;var len=0;var vertxNext=void 0;var customSchedulerFn=void 0;var asap=function asap(callback,arg){queue[len]=callback;queue[len+1]=arg;len+=2;if(len===2){if(customSchedulerFn){customSchedulerFn(flush)}else{scheduleFlush()}}};function setScheduler(scheduleFn){customSchedulerFn=scheduleFn}function setAsap(asapFn){asap=asapFn}var browserWindow=typeof window!=="undefined"?window:undefined;var browserGlobal=browserWindow||{};var BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver;var isNode=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var isWorker=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function useNextTick(){return function(){return process.nextTick(flush)}}function useVertxTimer(){if(typeof vertxNext!=="undefined"){return function(){vertxNext(flush)}}return useSetTimeout()}function useMutationObserver(){var iterations=0;var observer=new BrowserMutationObserver(flush);var node=document.createTextNode("");observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2}}function useMessageChannel(){var channel=new MessageChannel;channel.port1.onmessage=flush;return function(){return channel.port2.postMessage(0)}}function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){var callback=queue[i];var arg=queue[i+1];callback(arg);queue[i]=undefined;queue[i+1]=undefined}len=0}function attemptVertx(){try{var vertx=Function("return this")().require("vertx");vertxNext=vertx.runOnLoop||vertx.runOnContext;return useVertxTimer()}catch(e){return useSetTimeout()}}var scheduleFlush=void 0;if(isNode){scheduleFlush=useNextTick()}else if(BrowserMutationObserver){scheduleFlush=useMutationObserver()}else if(isWorker){scheduleFlush=useMessageChannel()}else if(browserWindow===undefined&&typeof require==="function"){scheduleFlush=attemptVertx()}else{scheduleFlush=useSetTimeout()}function then(onFulfillment,onRejection){var parent=this;var child=new this.constructor(noop);if(child[PROMISE_ID]===undefined){makePromise(child)}var _state=parent._state;if(_state){var callback=arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})}else{subscribe(parent,child,onFulfillment,onRejection)}return child}function resolve$1(object){var Constructor=this;if(object&&typeof object==="object"&&object.constructor===Constructor){return object}var promise=new Constructor(noop);resolve(promise,object);return promise}var PROMISE_ID=Math.random().toString(36).substring(2);function noop(){}var PENDING=void 0;var FULFILLED=1;var REJECTED=2;var TRY_CATCH_ERROR={error:null};function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function getThen(promise){try{return promise.then}catch(error){TRY_CATCH_ERROR.error=error;return TRY_CATCH_ERROR}}function tryThen(then$$1,value,fulfillmentHandler,rejectionHandler){try{then$$1.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleForeignThenable(promise,thenable,then$$1){asap(function(promise){var sealed=false;var error=tryThen(then$$1,thenable,function(value){if(sealed){return}sealed=true;if(thenable!==value){resolve(promise,value)}else{fulfill(promise,value)}},function(reason){if(sealed){return}sealed=true;reject(promise,reason)},"Settle: "+(promise._label||" unknown promise"));if(!sealed&&error){sealed=true;reject(promise,error)}},promise)}function handleOwnThenable(promise,thenable){if(thenable._state===FULFILLED){fulfill(promise,thenable._result)}else if(thenable._state===REJECTED){reject(promise,thenable._result)}else{subscribe(thenable,undefined,function(value){return resolve(promise,value)},function(reason){return reject(promise,reason)})}}function handleMaybeThenable(promise,maybeThenable,then$$1){if(maybeThenable.constructor===promise.constructor&&then$$1===then&&maybeThenable.constructor.resolve===resolve$1){handleOwnThenable(promise,maybeThenable)}else{if(then$$1===TRY_CATCH_ERROR){reject(promise,TRY_CATCH_ERROR.error);TRY_CATCH_ERROR.error=null}else if(then$$1===undefined){fulfill(promise,maybeThenable)}else if(isFunction(then$$1)){handleForeignThenable(promise,maybeThenable,then$$1)}else{fulfill(promise,maybeThenable)}}}function resolve(promise,value){if(promise===value){reject(promise,selfFulfillment())}else if(objectOrFunction(value)){handleMaybeThenable(promise,value,getThen(value))}else{fulfill(promise,value)}}function publishRejection(promise){if(promise._onerror){promise._onerror(promise._result)}publish(promise)}function fulfill(promise,value){if(promise._state!==PENDING){return}promise._result=value;promise._state=FULFILLED;if(promise._subscribers.length!==0){asap(publish,promise)}}function reject(promise,reason){if(promise._state!==PENDING){return}promise._state=REJECTED;promise._result=reason;asap(publishRejection,promise)}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers;var length=_subscribers.length;parent._onerror=null;_subscribers[length]=child;_subscribers[length+FULFILLED]=onFulfillment;_subscribers[length+REJECTED]=onRejection;if(length===0&&parent._state){asap(publish,parent)}}function publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return}var child=void 0,callback=void 0,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){invokeCallback(settled,child,callback,detail)}else{callback(detail)}}promise._subscribers.length=0}function tryCatch(callback,detail){try{return callback(detail)}catch(e){TRY_CATCH_ERROR.error=e;return TRY_CATCH_ERROR}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=void 0,error=void 0,succeeded=void 0,failed=void 0;if(hasCallback){value=tryCatch(callback,detail);if(value===TRY_CATCH_ERROR){failed=true;error=value.error;value.error=null}else{succeeded=true}if(promise===value){reject(promise,cannotReturnOwn());return}}else{value=detail;succeeded=true}if(promise._state!==PENDING){}else if(hasCallback&&succeeded){resolve(promise,value)}else if(failed){reject(promise,error)}else if(settled===FULFILLED){fulfill(promise,value)}else if(settled===REJECTED){reject(promise,value)}}function initializePromise(promise,resolver){try{resolver(function resolvePromise(value){resolve(promise,value)},function rejectPromise(reason){reject(promise,reason)})}catch(e){reject(promise,e)}}var id=0;function nextId(){return id++}function makePromise(promise){promise[PROMISE_ID]=id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[]}function validationError(){return new Error("Array Methods must be provided an Array")}var Enumerator=function(){function Enumerator(Constructor,input){this._instanceConstructor=Constructor;this.promise=new Constructor(noop);if(!this.promise[PROMISE_ID]){makePromise(this.promise)}if(isArray(input)){this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0){fulfill(this.promise,this._result)}else{this.length=this.length||0;this._enumerate(input);if(this._remaining===0){fulfill(this.promise,this._result)}}}else{reject(this.promise,validationError())}}Enumerator.prototype._enumerate=function _enumerate(input){for(var i=0;this._state===PENDING&&i<input.length;i++){this._eachEntry(input[i],i)}};Enumerator.prototype._eachEntry=function _eachEntry(entry,i){var c=this._instanceConstructor;var resolve$$1=c.resolve;if(resolve$$1===resolve$1){var _then=getThen(entry);if(_then===then&&entry._state!==PENDING){this._settledAt(entry._state,i,entry._result)}else if(typeof _then!=="function"){this._remaining--;this._result[i]=entry}else if(c===Promise$2){var promise=new c(noop);handleMaybeThenable(promise,entry,_then);this._willSettleAt(promise,i)}else{this._willSettleAt(new c(function(resolve$$1){return resolve$$1(entry)}),i)}}else{this._willSettleAt(resolve$$1(entry),i)}};Enumerator.prototype._settledAt=function _settledAt(state,i,value){var promise=this.promise;if(promise._state===PENDING){this._remaining--;if(state===REJECTED){reject(promise,value)}else{this._result[i]=value}}if(this._remaining===0){fulfill(promise,this._result)}};Enumerator.prototype._willSettleAt=function _willSettleAt(promise,i){var enumerator=this;subscribe(promise,undefined,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})};return Enumerator}();function all(entries){return new Enumerator(this,entries).promise}function race(entries){var Constructor=this;if(!isArray(entries)){return new Constructor(function(_,reject){return reject(new TypeError("You must pass an array to race."))})}else{return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++){Constructor.resolve(entries[i]).then(resolve,reject)}})}}function reject$1(reason){var Constructor=this;var promise=new Constructor(noop);reject(promise,reason);return promise}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Promise$2=function(){function Promise(resolver){this[PROMISE_ID]=nextId();this._result=this._state=undefined;this._subscribers=[];if(noop!==resolver){typeof resolver!=="function"&&needsResolver();this instanceof Promise?initializePromise(this,resolver):needsNew()}}Promise.prototype.catch=function _catch(onRejection){return this.then(null,onRejection)};Promise.prototype.finally=function _finally(callback){var promise=this;var constructor=promise.constructor;return promise.then(function(value){return constructor.resolve(callback()).then(function(){return value})},function(reason){return constructor.resolve(callback()).then(function(){throw reason})})};return Promise}();Promise$2.prototype.then=then;Promise$2.all=all;Promise$2.race=race;Promise$2.resolve=resolve$1;Promise$2.reject=reject$1;Promise$2._setScheduler=setScheduler;Promise$2._setAsap=setAsap;Promise$2._asap=asap;function polyfill(){var local=void 0;if(typeof global!=="undefined"){local=global}else if(typeof self!=="undefined"){local=self}else{try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if(promiseToString==="[object Promise]"&&!P.cast){return}}local.Promise=Promise$2}Promise$2.polyfill=polyfill;Promise$2.Promise=Promise$2;Promise$2.polyfill();return Promise$2});!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";function i(){}function r(e,t){return function(){return e.apply(e,arguments)&&t.apply(t,arguments)}}function a(e){return function(){return!e.apply(e,arguments)}}function o(e,t){return e.concat(t)}function s(e){return function(t){return e.hasOwnProperty(t)}}function d(e){return function(t){return e[t]}}function u(){var e=Array.from(arguments);return function(){var t=this;return e.reduceRight(function(e,n){return[n.apply(t,e)]},arguments)[0]}}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"e",function(){return a}),n.d(t,"g",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return d}),n.d(t,"c",function(){return u})},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var i=n(0),r=!1;try{r="localStorage"in window&&"object"==typeof window.localStorage&&"setItem"in window.localStorage}catch(e){window.console.warn("Spieler: localStorage cannot be accessed possibly due to disabled cookies")}var a=r&&"enabled"===window.localStorage.getItem("debug"),o=(r&&window.localStorage.getItem("debugHlsjs"),r&&"enabled"===window.localStorage.getItem("benchmark")),s={log:a?window.console.log.bind(window.console):i.a,warn:a?window.console.warn.bind(window.console):i.a,error:a?window.console.error.bind(window.console):i.a,info:a?window.console.info.bind(window.console):i.a}},function(e,t,n){"use strict";var i,r=n(3),a={browser:new r.a};!function(){function e(e,t){t.movie=e;var n="";for(var i in t)n+='<param name="'+i+'" value="'+t[i]+'">';var r=document.createElement("div");return r.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+n+"</object>",r.firstChild}function t(e,t){var n=document.createElement("object");n.setAttribute("type","application/x-shockwave-flash"),n.setAttribute("data",e);for(var i in t){var r=document.createElement("param");r.setAttribute("name",i),r.setAttribute("value",t[i]),n.appendChild(r)}return n}function n(e){if(e.readyState)if(4===e.readyState||"complete"===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);r(e)}else setTimeout(function(){n(e)},100);else r(e)}function r(e){e.parentNode.removeChild(e)}function o(e){if(!e||"[object Object]"!==e.toString())return!1;var t=e.hasOwnProperty("constructor"),n=e.constructor&&e.constructor.prototype&&e.constructor.prototype.hasOwnProperty("isPrototypeOf");if(e.constructor&&!t&&!n)return!1;var i;for(i in e);return void 0===i||e.hasOwnProperty(i)}function s(){var e,t,n,i,r,a,d=arguments,u=arguments[0],c=1,l=arguments.length,f=!1;for("boolean"==typeof u?(f=u,u=arguments[1]||{},c=2):("object"!=typeof u&&"function"!=typeof u||null===u)&&(u={});c<l;++c)if(null!==(e=d[c]))for(t in e)n=u[t],i=e[t],u!==i&&(f&&i&&(o(i)||(r=Array.isArray(i)))?(r?(r=!1,a=n&&Array.isArray(n)?n:[]):a=n&&o(n)?n:{},u[t]=s(f,a,i)):void 0!==i&&(u[t]=i));return u}i={extend:s,cloneObject:function(e){return this.extend({},e)},deprecate:function(e,t,n){var i="function"==typeof e[t]?e[t].bind(e):e[t];n="string"!=typeof n?t:n,Object.defineProperty&&Object.defineProperty(e,t,{get:function(){return console.warn("Spieler: "+n+" is now deprecatedand will be removed in the next major version."),i},set:DUMMY})},isEmptyVideo:function(e){return""===e.getAttribute("src")},resetVideoElement:function(e){e.setAttribute("style","")},embedFlash:function(n,i,r){var o=!1!==a.browser.is.ie&&a.browser.is.ie<11,s=(o?e:t)(n,i);if(r)for(var d in r)s.setAttribute(d,r[d]);return s},deleteFlash:function(e){!1!==a.browser.is.ie&&a.browser.is.ie<11?(e.style.display="none",n(e)):r(e)},isHTTPS:function(){return"https:"===window.location.protocol},bindAll:function(e){var t;for(t in e)"function"==typeof e[t]&&(e[t]=e[t].bind(e))},safeToString:function(e){switch(typeof e){case"object":return Array.isArray(e)?e.join(", "):null===e?"null":e instanceof Error?e.message:JSON.stringify(e);case"function":return"function";default:return e+""}},randomNumber:function(){return Math.floor(1e6*Math.random())},addCacheBuster:function(e){if(-1!==e.indexOf("?")){var t=e.split("?");t[1]=t[1].replace(/(?:^|&)random=(?:[^&]*|$)/,""),e=""!==t[1]?t.join("?"):t[0]}return e+=(-1!==e.indexOf("?")?"&":"?")+"random="+i.randomNumber()},generateAdEventData:function(e,t,n){n="object"!=typeof n?{}:n;var r=Object.assign({},{adData:e,position:t},n);return i.deprecate(r,"advertiserName"),i.deprecate(r,"creativeAdId"),i.deprecate(r,"adId"),i.deprecate(r,"isCustomPlaybackUsed"),i.deprecate(r,"isLinear"),r}}}(),t.a=i},function(e,t,n){"use strict";function i(){function e(e){return-1!==navigator.userAgent.indexOf(e)}var t=this;if(this.is={firefox:e("Firefox"),chrome:function(){var t=!1;if(e("Chrome")&&!e("Edge/")&&!e("OPR")&&!e("Opera")){var n=navigator.userAgent.match(/Chrome\/(\d+)/);null!==n&&(t=parseInt(n[1]))}return t}(),opera:e("Opera")||e("OPR"),iosWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)||e("CriOS"),android:e("Android"),ie:function(){return e("MSIE")?parseInt(navigator.userAgent.match(/MSIE (\d+)/)[1]):!!e("Trident/")&&parseInt(navigator.userAgent.match(/rv:(\d+)/)[1])}(),edge:e("Edge/"),iPad:e("iPad"),iPhone:e("iPhone"),iOS:function(){if(e("iPhone")||e("iPad")){var t=navigator.userAgent.match(/OS (\d+)_/);if(null!==t&&t.length>=2)return+t[1]}return!1}(),OSX:e("Macintosh"),desktopSafari:e("Macintosh")&&e("Safari")&&!e("Chrome"),smartphone:e("Android")||e("iPad")||e("iPhone")||e("Windows Phone")||e("Mobile"),safari:!1,desktop:!(e("Android")||e("iPad")||e("iPhone")||e("Windows Phone")||e("Mobile"))},this.is.firefox||this.is.chrome||this.is.opera||!e("Safari"))if(this.is.android){var n=navigator.userAgent.match(/Android\s([0-9\.]*)/);if(!n&&this.is.firefox?n="2.3":n&&(n=n[1]),n&&n.length>=2){this.is.android=n.split(".");for(var i=0;i<this.is.android.length;i++)t.is.android[i]=+t.is.android[i];this.is.android.length<3&&(this.is.android[2]=0)}}else this.is.chrome&&this.is.ie&&(this.is.chrome=!1);else this.is.safari=!0;this.sizeClass={toString:function(){return this.value}},function(){var e,t,n=this,i={xs:0,sm:768,md:992,lg:1200},r=window.screen.width;this.is.smartphone&&window.screen.width>window.screen.height&&(r=window.screen.height);for(e in i)r>=i[e]?(t&&(n.sizeClass[t]=!1),n.sizeClass[e]=!0,n.sizeClass.value=e,t=e):n.sizeClass[e]=!1;this.sizeClass.phone=this.sizeClass.xs,this.sizeClass.tablet=this.sizeClass.sm,this.sizeClass.desktop=this.sizeClass.md||this.sizeClass.lg}.apply(this),this.supports={fullScreen:document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitRequestFullScreen,localStorage:r.c,html5:{video:!!document.createElement("video").canPlayType},css3:{transitions:function(){var e=[];for(var t in document.createElement("div").style)/transition/i.test(t)&&e.push(t);return e.length>0}()}};var a={};this.has={},a.has={},this.has.flash=function(){if(null===a.has.flash){a.has.flash=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a.has.flash=!0)}catch(n){var e="application/x-shockwave-flash",t=navigator.mimeTypes;t&&t[e]&&t[e].enabledPlugin&&(a.has.flash=!0)}}return a.has.flash},a.has.flash=null,this.fs={},"undefined"==typeof HTMLElement?HTMLElement={prototype:{}}:void 0===HTMLElement.prototype&&(HTMLElement.prototype={});var o;o=void 0!==window.HTMLDocument?HTMLDocument.prototype:Document.prototype,this.fs.changeEvent="onmozfullscreenchange"in o?"mozfullscreenchange":"onwebkitfullscreenchange"in o?"webkitfullscreenchange":"onmsfullscreenchange"in o?"MSFullscreenChange":"onfullscreenchange"in o?"fullscreenchange":null,this.fs.nativeChangeEvents=["webkitbeginfullscreen","webkitendfullscreen"],o=HTMLElement.prototype,this.fs.request="mozRequestFullScreen"in o?"mozRequestFullScreen":"webkitRequestFullscreen"in o?"webkitRequestFullscreen":"msRequestFullscreen"in o?"msRequestFullscreen":"requestFullscreen"in o?"requestFullscreen":"webkitEnterFullscreen"in HTMLVideoElement.prototype?"webkitEnterFullscreen":null,o=void 0!==window.HTMLDocument?HTMLDocument.prototype:Document.prototype,this.fs.exit="mozCancelFullScreen"in o?"mozCancelFullScreen":"webkitExitFullscreen"in o?"webkitExitFullscreen":"msExitFullscreen"in o?"msExitFullscreen":"exitFullscreen"in o?"exitFullscreen":null,this.fs.exitNative="webkitExitFullscreen"in HTMLVideoElement.prototype?"webkitExitFullscreen":null,this.fs.html5=!!this.fs.exit,this.fs.native=this.fs.html5||!!this.fs.exitNative,(!1===this.is.ie||this.is.ie>8)&&void 0!==Object.defineProperty&&(Object.defineProperty(this,"fullscreenElement",{get:function(){return this.fs.fullscreenElement}}),Object.defineProperty(this.fs,"fullscreenElement",{get:function(){var e=["fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement"],t=e.find(function(e){return void 0!==document[e]});return void 0===t?void 0:document[t]}}),Object.defineProperty(this.fs,"fullscreenEnabled",{get:function(){var e=["webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","fullscreenEnabled"],t=e.find(function(e){return void 0!==document[e]});return void 0===t?void 0:document[t]}})),this.fs.isFullscreenElement=function(e){if(e)return void 0!==this.fullscreenElement?this.fullscreenElement===e:e.webkitDisplayingFullscreen},this.isFullscreenElement=this.fs.isFullscreenElement.bind(this.fs),this.supportsHlsJs=function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},this.page={},Object.defineProperty(this.page,"isHidden",{get:function(){return void 0!==document.webkitHidden?document.webkitHidden:void 0!==document.msHidden?document.msHidden:document.hidden}}),Object.defineProperty(this.page,"visibilityChange",{get:function(){return void 0!==document.hidden?"visibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.webkitHidden?"webkitvisibilitychange":void 0}})}var r=n(1);t.a=i},function(e,t,n){"use strict";var i=n(3),r={browser:new i.a,plugins:{},events:{PLAY:"PLAY",PLAYING:"PLAYING",PAUSE:"PAUSE",PAUSED:"PAUSED",GETSIZE:"GETSIZE",FULLSCREEN:"FULLSCREEN",MEDIACHANGE:"MEDIACHANGE",END:"END",DURATIONCHANGE:"DURATIONCHANGE",VOLUMECHANGE:"VOLUMECHANGE",MUTEDCHANGE:"MUTEDCHANGE"}};Object.defineProperty(r,"path",{get:function(){return window.Spieler.path}}),t.a=r},function(e,t,n){"use strict";t.a={READY:"DFP.READY",ERROR:"DFP.ERROR",LOAD:"DFP.LOAD",AD_LOADED:"DFP.AD_LOADED",AD_ENDED:"DFP.AD_ENDED",END:"DFP.END",RESUMED:"DFP.RESUMED",PAUSED:"DFP.PAUSED",STARTED:"DFP.STARTED",FIRST_QUARTILE:"DFP.FIRST_QUARTILE",MIDPOINT:"DFP.MIDPOINT",THIRD_QUARTILE:"DFP.THIRD_QUARTILE",STOPPED:"DFP.STOPPED",SKIPPED:"DFP.SKIPPED",VOLUME_CHANGED:"DFP.VOLUME_CHANGED",POSITION_CHANGED:"DFP.POSITION_CHANGED",CLICKED:"DFP.CLICKED",SPONSORSHIPSKINLOADED:"DFP.SPONSORSHIPSKINLOADED",MIDROLL:"DFP.MIDROLL",DURATIONCHANGE:"DFP.DURATIONCHANGE",TIMEUPDATE:"DFP.TIMEUPDATE"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=n(15),a=n(16),o=n(17),s=n(18),d=n.n(s),u=function(e){function t(t,n,r,a){e.call(this),Object(i.a)(t,n,r,a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(d.a);Object(r.a)(),Object(a.a)(),Object(o.a)(),Object.entries(i.a).forEach(function(e){var t=e[0],n=e[1];u[t]=n}),window.DFP=u,t.default=u},function(e,t,n){"use strict";var i=n(0),r=n(8),a=n(9),o=n(10),s=n(2),d=n(1),u=n(11),c=n(12),l=n(4),f=n(14),p=n(5);!function(){function e(e){return e.split("&").map(function(e){return e.split("=")}).reduce(function(e,t){return e[t[0]]=t[1],e},{})}function t(e){return Object.entries(e).map(function(e){return e.join("=")}).join("&")}function n(e,t){return e[t]=[e[t]],e}function h(e,t){e=!0===e,"function"!=typeof t&&(t=i.a),!m||m&&v!==(e?"debug":"normal")?(g?(b("IMA SDK is already loaded, but requested is of different type: "+v+" -> "+(e?"debug":"normal")),r.a.removeFromHead(g)):b("IMA SDK is not loaded, trying to load it."),g=r.a.addScript(y[e?"debug":"normal"],function(){b("loaded ima sdk, debug =",e),m=!0,v=e?"debug":"normal",t(m)},function(){C("failed to load ima sdk"),m=!1,r.a.removeFromHead(g),g=void 0,t(m)})):(b("IMA SDK is already loaded"),t(!!m))}var m,v,g,E="Spieler DFP:",y={normal:"//imasdk.googleapis.com/js/sdkloader/ima3.js",debug:"//imasdk.googleapis.com/js/sdkloader/ima3_debug.js"},A="Spieler.DFP.debugConfig",b=d.a.log.bind(d.a,E),w=d.a.info.bind(d.a,E),C=d.a.error.bind(d.a,E),D=d.a.warn.bind(d.a,E),L={},P=function(p,v,g,E){function y(){function e(e){l.cmd.push(e)}function t(){g=u.skin.adUnit,E=u.skin.container,e(function(){v=i(g,E),l.enableServices(),l.display(E)}),l.pubads().addEventListener("slotRenderEnded",function(e){b("GPT: slot rendered"),p.dispatcher.dispatch(P.events.SPONSORSHIPSKINLOADED)})}function n(){l=window.googletag||{},l.cmd=l.cmd||[],e(t)}function i(e,t){L[t]&&(D("Skin slot for this DFP instance & the same container has already been defined. Destroying the old one & replacing it with new one..."),l.destroySlots([L[t]]),delete L[t]);var n=l.defineOutOfPageSlot(e,t).addService(l.pubads());return L[t]=n,Object.keys(u.parameters).forEach(function(e){n.setTargeting(e,u.parameters[e])}),n}function a(e){return{skin:Object.assign({},e.skin),parameters:Object.assign({},e.parameters)}}function o(){return!!(window.googletag&&l&&l.apiReady)}function s(e){return u=a(e),h?void D("GPT is loading just now!"):m?void D("GPT is already loaded!"):(h=!0,void(f=r.a.addScript(c,function(){b("GPT: loaded"),h=!1,m=!0,n()},function(){h=!1,C("GPT: failed to load")})))}function d(e){e&&(u=a(e)),o()&&u.skin.container&&u.skin.adUnit&&(u.skin.container!==E||u.skin.adUnit!==g)&&(b("GPT: skin config changed, requesting new one"),E=u.skin.container,g=u.skin.adUnit,l.destroySlots([v]),v=i(g,E))}var u=null,c="//www.googletagservices.com/tag/js/gpt.js",l=null,f=null,h=!1,m=!1,v=null,g=null,E=null;return{isReady:o,load:s,updateSkinSlot:d}}function T(){"number"==typeof me.onResizeTimer&&clearTimeout(me.onResizeTimer),me.onResizeTimer=setTimeout(function(){le(Le.offsetWidth,Le.offsetHeight),me.onResizeTimer=null},150)}function S(){me.overlay?De.show():(v.main.classList.add("ad-clickthrough"),me.useFlash&&v.main.classList.add("ad-flash"))}function O(){v.main.classList.remove("ad-clickthrough"),v.main.classList.remove("ad-flash")}function k(e){return"string"==typeof e||Array.isArray(e)&&e.length}function I(){return!Pe.isEmpty()&&me.playingVideoAds}function R(){var e={};if(d.c&&localStorage.getItem(A))try{e=JSON.parse(localStorage.getItem(A)),b("Configuration read from localStorage")}catch(e){D("Invalid configuration found for "+A+", configuration was not loaded")}return e}function M(e,t){ge=_(s.a.extend({},ve,ge,e,R())),Le.style.bottom=me.overlay?ge.overlayBottom+"px":0,ge.skin&&(Ie.isReady()?Ie.updateSkinSlot(ge):Ie.load(ge))}function _(e){return Object.keys(P.positions).filter(Object(i.b)(Object(i.d)(e),Object(i.e)(Object(i.c)(Array.isArray,Object(i.f)(e))))).reduce(n,e)}function N(n,i){var r,a;n=n||"";var o=n.match(/^(.*?)(&cust_params=|cust_params=)([^&]*)(.*)$/);return null!==o?(r=o[1]+o[4],a=e(decodeURIComponent(o[3]))):(r=n.slice(0),a={}),a=Object.assign({},a,i),r+"&cust_params="+encodeURIComponent(t(a))}function x(){return[[l.a.events.PLAY,"play"],[l.a.events.PAUSE,"pause"],[l.a.events.VOLUMECHANGE,"volumeChange"],[l.a.events.MUTEDCHANGE,"mutedChange"],[l.a.events.MEDIACHANGE,"mediaChange"],[l.a.events.FULLSCREEN,"fullscreenChange"]]}function F(){x().forEach(function(e){var t=e[0],n=Me[e[1]];p.dispatcher.add(t,n)})}function U(){x().forEach(function(e){var t=e[0],n=Me[e[1]];p.dispatcher.remove(t,n)})}function H(){return-1!==Ee.indexOf(me.current.position)}function j(e){var t=!e;t||me.pluginInited||(J(v),me.pluginInited=!0),t||me.sdkLoaded||(me.sdkLoaded=!0,p.dispatcher.dispatch(P.events.READY,s.a.generateAdEventData(me.ad,me.current.position)),me.eventsAdded||(De.bindToSpieler(),me.eventsAdded=!0))}function V(e){me.$unwatch("sdkLoaded",q.bind(he,e)),me.$watch("sdkLoaded",q.bind(he,e))}function q(e,t){!1===m?e(!0):void 0!==t&&e(!1)}function z(e){me.$watch("pluginInited",function(t){t&&e()})}function W(e){return!(e&&e.configOverrides&&e.configOverrides.denyFlash||p._configOverrides.denyFlash)&&l.a.browser.has.flash()}function G(e){var t=e?JSON.parse(JSON.stringify(e)):ge.midroll;p.media?k(t)?ie(t):w("skipping midroll, because there is no valid midroll defined in the config or in the given parameters"):w("skipping midroll, because there is no content being played")}function B(){H()?Ce.stop():C("stop() was called, but there is no advertisement is in progress")}function Q(){Ce.resume(),S()}function K(){return Ce.getRemainingTime()}function Y(){return Ce.getDuration()}function $(e){return{triggerMidroll:e?i.a:G,stop:e?i.a:B,resume:e?i.a:Q,getCurrentPosition:function(){return b("getCurrentPosition: isBlocked: "+e),e?null:me.current.position},getDfpTime:K,getDfpDuration:Y,updateConfig:M,isVideoAdBeingPlayed:H,isCustomPlaybackUsed:function(){return Ce&&Ce.isCustomPlaybackUsed()},setVolume:function(e){Ce&&Ce.setVolume(e)},_:{getSdkWrapper:function(){return e?{}:Ce},getState:function(){return me}}}}function J(e){function t(){if(w("handleNextAd()"),e.main.classList.remove("vpaid"),me.loadingAd)return void w("ignoring handleNextAd, I'm already loading an ad");if(!me.playingVideoAds)return void w("ignoring handleNextAd, I'm already finished playing ads");if(me.ad=void 0,p.dispatcher.dispatch(P.events.AD_ENDED,s.a.generateAdEventData(me.ad,me.current.position,{isLinear:!1,pod:Pe.getPodNumber()})),Pe.isEmpty()){me.playingVideoAds=!1,O(),Le.classList.add("hidden"),e.main.classList.remove("ad-playingVideoAds"),Re.stop(),p.changePassiveState(!1),U();var t=me.current.position;if(me.current.position=null,me.current.hook.callback&&(me.current.hook.callback(null,me.current.hook.data),me.current.hook.callback=null),p.dispatcher.dispatch(P.events.END,s.a.generateAdEventData(me.ad,me.current.position,{position:t,currentPosition:Pe.getUpcomingAdType(),pod:Pe.getPodNumber()})),t!==P.positions.postroll){var n=ye.readyState===ye.HAVE_NOTHING;if(Ce.isCustomPlaybackUsed()&&n){var i=function(){ye.removeEventListener("loadedmetadata",i),ye.play()};ye.addEventListener("loadedmetadata",i),ye.load()}else ye.play()}}else Z(me.options);if(me.companionAd){me.companionAd=!1;document.getElementById(ge.companionParameters.container).innerHTML=""}}var n=ge.locale&&"string"==typeof ge.locale?ge.locale.slice(0,2):(window.navigator.language||window.navigator.browserLanguage).split("-")[0];Ce=new c.a(n,ge.loadVideoTimeout,ge.setNumRedirects,ge.bitrate,l.a.browser.is.smartphone),De=new f.a(p,Ce,me,{overlay:ge.overlay,overlayBottom:ge.overlayBottom,elements:e,adContainer:Le,onEnterFullscreen:function(){d.a.warn("onFullcsreen enter"),le(screen.width,screen.height,google.ima.ViewMode.FULLSCREEN),ce()},onExitFullscreen:function(){d.a.warn("onFullcsreen exit"),le(Le.offsetWidth,Le.offsetHeight,google.ima.ViewMode.NORMAL),ce()},methods:{isVideoAdBeingPlayed:H,requestAds:X,generateAdEventData:s.a.generateAdEventData}}),me.targetViewMode=google.ima.ViewMode.NORMAL,Ce.addEventListener("loaded-pre",function(){u.a.log("ad_"+Pe.getCurrentAdType(),"loaded-pre","google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED event was fired by the adsManager, vast/vpaid information is ready"),me.loadingAd=!1,p.dispatcher.dispatch(P.events.LOAD,s.a.generateAdEventData(me.ad,me.current.position,{pod:Pe.getPodNumber()})),p.dispatcher.dispatch(l.a.events.GETSIZE,{width:Le.offsetWidth,height:Le.offsetHeight}),S(),Le.classList.remove("hidden")}),Ce.addEventListener("loaded-post",function(e){Ce.setVolume(p.muted()?0:p.volume()),e.detail.createdAdsManager&&(de(),ke=!0,Te=!1),me.overlay||(p.dispatcher.dispatch(l.a.events.PLAY,{feedback:!0}),p.dispatcher.dispatch(l.a.events.PLAYING),F())}),Ce.addEventListener("adLoaded",function(t){if(me.ad=t.detail.adData,!me.ad.linear){var n=JSON.parse(t.detail.ad.getTraffickingParametersString()||"{}");De.dimensions.width=me.ad.width||n.adw||De.dimensions.defaultWidth,De.dimensions.height=me.ad.height||n.adh||De.dimensions.defaultHeight}ce(!0),e.main.classList[t.detail.isCustomPlaybackUsed?"add":"remove"]("ad-customplayback"),e.main.classList[me.ad.vpaid?"add":"remove"]("vpaid"),p.dispatcher.dispatch(P.events.AD_LOADED,s.a.generateAdEventData(me.ad,me.current.position,{advertiserName:t.detail.ad.getAdvertiserName(),creativeAdId:t.detail.ad.getCreativeAdId(),adId:t.detail.ad.getAdId(),isCustomPlaybackUsed:t.detail.isCustomPlaybackUsed,pod:Pe.getPodNumber()}))}),Ce.addEventListener("error",function(e){u.a.finish("ad_"+Pe.getCurrentAdType(),"error",e.detail.adErrorEvent.type),me.loadingAd=!1;var n={adErrorEvent:e.detail.adErrorEvent,currentAd:e.detail.currentAd||void 0,position:me.current.position,currentPosition:Pe.getUpcomingAdType()},i=n.adErrorEvent.getError(),r=e.detail.userRequestContext,a=n.currentAd,o=i.getErrorCode();P.ignoredErrorsGA.some(function(e){return e===o})||(p.analytics||Analytics).event("spieler","dfp_error",window.location.host+window.location.pathname,{dimension1:i.getErrorCode(),dimension2:i.getInnerError(),dimension3:i.getMessage(),dimension4:r.adsRequest&&r.adsRequest.adTagUrl,dimension5:r.adsRequest&&r.adsRequest.location,dimension6:r.adsRequest&&r.adsRequest.referrer,dimension7:a&&a.getTitle(),dimension8:a&&a.getDescription(),dimension9:a&&a.getMediaUrl(),dimension10:a&&a.getCreativeAdId(),dimension11:a&&a.getCreativeId(),dimension12:a&&a.getContentType(),dimension13:a&&a.getDealId(),dimension14:a&&a.getVastMediaWidth(),dimension15:a&&a.getVastMediaHeight(),dimension16:a&&a.getHeight(),dimension17:a&&a.getWidth(),dimension18:a&&a.getWrapperAdIds(),dimension19:a&&a.getWrapperAdSystems(),dimension20:a&&a.getWrapperCreativeIds(),dimension21:a&&a.getUniversalAdIdRegistry(),dimension22:a&&a.getUniversalAdIdValue()}),Re.stop(),p.dispatcher.dispatch(P.events.ERROR,n),"adLoadError"===i.getType()&&t()}),Ce.addEventListener("ended",function(){Re.stop(),t()}),Ce.addEventListener("started",function(t){var n=t.detail.adEvent;u.a.log("ad_"+Pe.getCurrentAdType(),"started",n.type+" event was fired by the adsManager, ad is playing"),Ce.setVolume(p.muted()?0:p.volume()),me.playing="playing",Ce.isCustomPlaybackUsed()||Re.start(),ce(),void 0!==ge.companionParameters&&fe(n),H()&&e.main.classList.add("ad-playingVideoAds"),p.dispatcher.dispatch(P.events.STARTED,s.a.generateAdEventData(me.ad,me.current.position,{isCustomPlaybackUsed:Ce.isCustomPlaybackUsed()}))}),Ce.addEventListener("firstQuartile",function(){u.a.finish("ad_"+Pe.getCurrentAdType(),"firstQuartile"),p.dispatcher.dispatch(P.events.FIRST_QUARTILE,s.a.generateAdEventData(me.ad,me.current.position))}),Ce.addEventListener("midpoint",function(){u.a.finish("ad_"+Pe.getCurrentAdType(),"midpoint"),p.dispatcher.dispatch(P.events.MIDPOINT,s.a.generateAdEventData(me.ad,me.current.position))}),Ce.addEventListener("thirdQuartile",function(){u.a.finish("ad_"+Pe.getCurrentAdType(),"thirdQuartile"),p.dispatcher.dispatch(P.events.THIRD_QUARTILE,s.a.generateAdEventData(me.ad,me.current.position))}),Ce.addEventListener("stopped",function(){u.a.finish("ad_"+Pe.getCurrentAdType(),"stopped"),Re.stop(),p.dispatcher.dispatch(P.events.STOPPED,s.a.generateAdEventData(me.ad,me.current.position))}),Ce.addEventListener("skipped",function(){u.a.finish("ad_"+Pe.getCurrentAdType(),"skipped"),Re.stop(),p.dispatcher.dispatch(P.events.SKIPPED,s.a.generateAdEventData(me.ad,me.current.position))}),Ce.addEventListener("paused",function(){me.playing="paused",u.a.finish("ad_"+Pe.getCurrentAdType(),"paused"),Re.stop(),p.dispatcher.dispatch(P.events.PAUSED,s.a.generateAdEventData(me.ad,me.current.position)),Se?Se=!1:(Oe=!0,p.dispatcher.dispatch(l.a.events.PAUSE,{feedback:!0}),p.dispatcher.dispatch(l.a.events.PAUSED))}),Ce.addEventListener("playing",function(e){me.playing="playing",Ce.isCustomPlaybackUsed()||Re.start(),S(),p.dispatcher.dispatch(P.events.RESUMED,s.a.generateAdEventData(me.ad,me.current.position)),Te?Te=!1:(ke=!0,p.dispatcher.dispatch(l.a.events.PLAY,{feedback:!0}),p.dispatcher.dispatch(l.a.events.PLAYING))}),Ce.addEventListener("volume-changed",function(){var e=Ce.getVolume();0!==e&&p.volume()!==e&&(b("setting framework volume to",e),p.volume(e)),p.dispatcher.dispatch(P.events.VOLUME_CHANGED,s.a.generateAdEventData(me.ad,me.current.position,{volume:e}))}),Ce.addEventListener("muted",function(){p.muted()||(b("setting framework muted to true"),p.muted(!0))}),Ce.addEventListener("clicked",function(){"playing"===me.playing?(Se=!1,Ce.pause(),H()||p.pause(),O()):e.main.classList.contains("basicUi")&&(Ce.resume(),S())}),Ce.addEventListener("durationChange",function(){p.dispatcher.dispatch(P.events.DURATIONCHANGE,s.a.generateAdEventData(me.ad,me.current.position))}),Ce.addEventListener("contentPauseRequested",function(){ye.pause()}),l.a.browser.is.iPad&&ye.playsInline&&(ye.playsInline=!1),Ce.createAdDisplayContainer(Le,ye),Ce.createAdsLoader()}function X(e,t,n){Pe.set(e,t),I()||"overlay"===Pe.getUpcomingAdType()?Z(n):Ce.dispatchEvent(new CustomEvent("ended"))}function Z(e){var t=Pe.loadNextFromBuffer();if(!t)return void C("failed to request next ad, buffer is empty");Pe.didTypeChange()&&void 0!==P.positions[Pe.getCurrentAdType()]&&(me.current.position=P.positions[Pe.getCurrentAdType()]);var n;if(ge.useRawAdUrl)n=t;else{Pe.incrementPodNumber();var i=Pe.getPodNumber(),r=s.a.extend({pod:i},ge.parameters);n=(Object.getOwnPropertyNames(r).length>1?N(t,r):t)+"&pod="+i,ge.companionParameters&&ge.companionParameters.companion_width&&ge.companionParameters.companion_height&&(n+="&ciu_szs="+ge.companionParameters.companion_width+"x"+ge.companionParameters.companion_height)}b("adTag:",n),Ce.requestAd(n,e),me.loadingAd=!0,u.a.start("ad_"+Pe.getCurrentAdType(),"requestAds","adsLoader.requestAds() called")}function ee(){ye.removeEventListener("loadedmetadata",ee),u.a.log("dfp","loadedmetadata","dummyvideo.mp4 metadata loaded"),Ce.setContentInitialized(!0),de()}function te(e){p.media.isFlashBasedPlatform()&&(ye.src=l.a.path+"assets/dummyvideo.mp4"),ye.readyState>=ye.HAVE_METADATA?ee():ye.addEventListener("loadedmetadata",ee),e.resources.metadata&&e.resources.metadata.dfp&&(ge=e.resources.metadata.dfp)}function ne(e,t){u.a.log("dfp","handlePreInit"),z(function(){u.a.log("dfp","plugin finished initializing"),b("executing pre-init hook with data:",e),P.laterUpdateConfig&&(M(P.laterUpdateConfig.configValue,P.laterUpdateConfig.initState),P.laterUpdateConfig=null),me.beforePreInit=!1;var n=ge.preroll.concat(ge.sting);oe(e,t,P.positions.preroll),me.adDisplayContainerInited||(me.adDisplayContainerInited=!0,Ce.initAdDisplayContainer()),se(),X(n,[["preroll",ge.preroll.length],["sting",ge.sting.length]],me.options)})}function ie(e){z(function(){b("executing midroll"),De.stop(),oe(null,null,P.positions.midroll),p.dispatcher.dispatch(P.events.MIDROLL),p.pause(),se(),X(e,"midroll",me.options)})}function re(e,t){z(function(){b("executing post-clip hook with data:",e),De.stop();var n=ge.postroll;oe(e,t,P.positions.postroll),se(),Ce.triggerContentComplete(),X(n,"postroll",me.options)})}function ae(){me.current.position=null,me.current.hook.callback=null,me.current.hook.data=null,Re.stop(),p.changePassiveState(!1)}function oe(e,t,n){me.useFlash=W(e),me.playingVideoAds=!0,me.current.hook.callback=t,me.current.hook.data=e,me.current.position=n,p.changePassiveState(!0)}function se(){ge.parameters||(ge.parameters={})}function de(){Ce.startAds(me.targetWidth,me.targetHeight,me.targetViewMode)&&(le(Le.offsetWidth,Le.offsetHeight),ue())}function ue(){we&&clearInterval(we),ce(!0),we=setInterval(ce.bind(he),200)}function ce(e){var t,n;!me.ad||me.ad.linear||me.ad.vpaid?(t=me.targetWidth,n=me.targetHeight):(t=Le.offsetWidth<De.dimensions.width?Le.offsetWidth:De.dimensions.width+5,n=Le.offsetHeight<De.dimensions.height?Le.offsetHeight:De.dimensions.height+10),(e||t!==Ae||n!==be)&&(Ae=t,be=n,Ce.resize(t,n,me.targetViewMode),De.onResize())}function le(e,t,n){me.targetWidth=e,me.targetHeight=t,null===me.targetViewMode&&(me.targetViewMode=google.ima.ViewMode.NORMAL),void 0!==n&&(me.targetViewMode=n)}function fe(e){var t=e.getAd(),n=new google.ima.CompanionAdSelectionSettings;n.resourceType=void 0===ge.companionParameters.resourceType?"ALL":ge.companionParameters.resourceType,n.creativeType=void 0===ge.companionParameters.creativeType?"ALL":ge.companionParameters.creativeType,n.sizeCriteria=void 0===ge.companionParameters.sizeCriteria?"SELECT_EXACT_MATCH":ge.companionParameters.sizeCriteria;var i=ge.companionParameters.companion_width,r=ge.companionParameters.companion_height,a=t.getCompanionAds(i,r,n);if(a&&a.length){var o=a[0],s=o.getContent();document.getElementById(ge.companionParameters.container).innerHTML=s,me.companionAd=!0}}function pe(){var e=p.muted()?0:p.volume(),t=Ce.getVolume();ge.disableVolumeSynchronization||null===t||t===e||(b("setting dfp volume from "+t+" to "+e),Ce.setVolume(e))}var he=this,me=new a.a;me.$register("sdkLoaded",void 0),me.$register("pluginInited",!1),me.useFlash=null,me.companionAd=!1,me.current={hook:{data:null,callback:null},position:null,ad:void 0},me.playing="paused",me.playingVideoAds=!0,me.loadingAd=!1,me.adDisplayContainerInited=!1,me.eventsAdded=!1,me.beforePreInit=!0,me.autoplay=null!==v.video.getAttribute("autoplay"),me.muted=p.muted(),me.options={autoplay:me.autoplay,muted:me.muted},me.targetWidth=null,me.targetHeight=null,me.targetViewMode=null,me.inFullScreen=!1,me.overlay=!1;var ve={preroll:[],sting:[],midroll:[],postroll:[],overlay:[],disableVolumeSynchronization:!1},ge={};p.dfp=$(!0);var Ee=[P.positions.preroll,P.positions.sting,P.positions.midroll,P.positions.postroll],ye=v.video;g.adContainer&&!g.adContainer instanceof HTMLElement&&(C("dfp.adContainer should be a reference to HTMLElement! Reverting!"),delete g.adContainer);var Ae,be,we,Ce,De,Le=g.adContainer?g.adContainer:function(e){var t=r.a.createElement("div",{class:"ppAdContainer hidden"});return e.appendChild(t),t}(v.view),Pe=new o.a,Te=!1,Se=!1,Oe=!1,ke=!1,Ie=new y,Re=function(){function e(e){r=function(){K()!==a&&e(),a=K()}}function t(){n(),i=setInterval(r,o)}function n(){i=clearInterval(i)}var i,r,a,o=250;return{init:e,start:t,stop:n}}();Re.init(function(){p.dispatcher.dispatch(P.events.TIMEUPDATE,s.a.generateAdEventData(me.ad,me.current.position))});var Me={mediaChange:function(){Ce.destroyAdsManager()},play:function(){me.sdkLoaded&&(ke?ke=!1:(Te=!0,Ce.resume(),me.playing="playing",p.dispatcher.dispatch(l.a.events.PLAYING)))},pause:function(){me.sdkLoaded&&(Oe?Oe=!1:(Se=!0,Ce.pause(),me.playing="paused",O(),p.dispatcher.dispatch(l.a.events.PAUSED)))},volumeChange:function(){me.sdkLoaded&&pe()},mutedChange:function(){me.sdkLoaded&&pe()},fullscreenChange:function(e,t){}};document.addEventListener(l.a.browser.fs.changeEvent,function(e){me.sdkLoaded&&me.pluginInited&&(b("onFullscreenChange",e),l.a.browser.fs.fullscreenElement?(me.inFullScreen=!0,le(screen.width,screen.height,google.ima.ViewMode.FULLSCREEN),ce()):(me.inFullScreen=!1,le(Le.offsetWidth,Le.offsetHeight,google.ima.ViewMode.NORMAL),ce()))}),window.addEventListener("resize",T),M(g,!0),ge&&(p.hooks.add("pre-init",function(e,t){u.a.start("dfp"),V(function(n){u.a.log("dfp","ima sdk loaded","finished loading IMA SDK asyncronously"),n?(u.a.finish("dfp"),w("skipping pre-init hook, because of sdk being blocked"),ae(),t()):(Ce&&!Ce.isContentInitialized()&&te(e),k(ge.preroll)||k(ge.sting)?ne(e,t):(u.a.finish("dfp"),w("skipping pre-init hook, because there is no valid preroll or sting defined in the config"),ae(),t()))}),h(ge.debug,function(e){var t=!e;p.dfp=$(t),e?j(e):t&&Ce&&(Ce.destroyAdsManager(),De.resetTimer())})},"dfp-preroll"),p.hooks.add("post-clip",function(e,t){me.sdkLoaded=void 0,k(ge.postroll)?re(e,t):(w("skipping post-clip hook, because there is no valid postroll defined in the config"),ae(),t())},"dfp-postroll")),h(ge.debug,E)};P.logsOn=function(){b=d.a.log.bind(d.a,E),w=d.a.info.bind(d.a,E),C=d.a.error.bind(d.a,E),D=d.a.warn.bind(d.a,E),b("DFP logs enabled.")},P.logsOff=function(){b=function(){},w=function(){},C=function(){},D=function(){}},P.positions={preroll:0,sting:1,overlay:f.a.POSITION,midroll:50,postroll:100},P.events=p.a,P.ignoredErrorsGA=[303,1009],l.a.plugins.dfp=P}(),t.a=l.a.plugins.dfp},function(e,t,n){"use strict";var i;!function(){i={prop:function(e,t,n){return void 0!==n&&(n?e.setAttribute(t,t):e.removeAttribute(t),e[t]=n),e[t]},once:function(e,t,n,i){n._called=!1;return n._onceWrapper=function(e,t,n,i){return function(){n._called||(n._called=!0,e.removeEventListener(t,n,i),n.apply(n,Array.from(arguments)))}}(e,t,n,i),e.addEventListener(t,n._onceWrapper,i),this},ready:function(e){["interactive","complete"].find(equals(document.readyState))?e():this.once(document,"readystatechange",e)},text:function(e,t){return t?(e.textContent=t,this):e.textContent},createElement:function(e,t,n){t=t||{},n=n||[];var i=document.createElement(e);return Object.keys(t).forEach(function(e){var n=t[e];switch(e){case"text":i.textContent=n;break;case"html":i.innerHTML=n;break;case"data":for(var r in n)i.setAttribute("data-"+r,n[r]);break;case"on":"object"==typeof n&&Object.entries(n).forEach(function(e){var t=e[0],n=e[1];i.addEventListener(t,n)});break;default:i.setAttribute(e,n)}}),n.forEach(function(e){"string"==typeof e&&(e=document.createTextNode(e)),i.appendChild(e)}),i},addToHead:function(e){return document.querySelector("head").appendChild(e),e},removeFromHead:function(e){try{return document.querySelector("head").removeChild(e)}catch(e){return void console.warn(e)}}},i.addCSS=function(e,t){if(t=t||!1){var n=i.addToHead(i.createElement("style"));try{n.innerHTML=e}catch(t){n.styleSheet.cssText=e}}else i.addToHead(i.createElement("link",{type:"text/css",rel:"stylesheet",href:e}))},i.addScript=function(e,t,n){var r=i.createElement("script",{src:e,type:"text/javascript",on:{load:t||DUMMY,error:n||DUMMY}});return i.addToHead(r)}}(),t.a=i},function(e,t,n){"use strict";function i(){function e(e,t){return Object.entries(e).filter(function(e){var n=(e[0],e[1]);return t(n)}).reduce(function(e,t){var n=t[0],i=t[1];return e[n]=i,e},{})}var t={};this.$register=function(e,i){return t.hasOwnProperty(e)?this[e]=i:(t[e]={oldValue:void 0,value:i,handlers:{}},Object.defineProperty(this,e,{get:function(){return t[e].value},set:function(i){t[e].value!==i&&(t[e].oldValue=t[e].value,t[e].value=i,n(e,t[e].value,t[e].oldValue))}})),this},this.$watch=function(e,i,r){return t.hasOwnProperty(e)||this.register(e),r=r||window,t[e].handlers[i]=function(e,t){i(e,t)}.bind(r),n(e,t[e].value,t[e].oldValue),this},this.$unwatch=function(n,i){t.hasOwnProperty(n)&&(t[n].handlers=e(t[n].handlers,function(e){if(e===i)return e}))};var n=function(e,n,i){var r;for(var a in t[e].handlers)t[e].handlers.hasOwnProperty(a)&&"function"==typeof(r=t[e].handlers[a])&&r(n,i)}}t.a=i},function(e,t,n){"use strict";function i(){function e(e){return e.map(function(e){var t=e[1],n=e[0];return Array(t).fill(n)}).reduce(r.g,[])}function t(e){return"string"==typeof e}function n(e){return Array.isArray(e)?Object.assign([],e):t(e)?[e]:[]}function i(e,t){return e.map(function(e,n){return[e,t[n]]})}function a(e){return function(t){return t[e]}}function o(){return Math.max.apply(Math,Object.values(d))}var s={ads:[],index:0,typeDescriptor:[]},d={preroll:0,sting:0,midroll:0,postroll:0,overlay:0};this.getCurrentAdType=function(){return s.typeDescriptor[s.index-1]},this.getUpcomingAdType=function(){return s.index<s.typeDescriptor.length?s.typeDescriptor[s.index]:null},this.loadNextFromBuffer=function(){return s.index++,s.ads.shift()},this.set=function(r,o){var d=n(r),u=t(o)?[[o,d.length]]:o,c=e(u);if(c.length!==d.length)return void console.error("AdBuffer [set]: adTypeDescriptor's length does not match with adTags");var l=i(d,c),f=l.filter(function(e){return""!==e[0].trim()});s.ads=f.map(a(0)),s.typeDescriptor=f.map(a(1)),s.index=0},this.incrementPodNumber=function(){var e=this.getCurrentAdType();d[e]++},this.getPodNumber=function(){return o()},this.isEmpty=function(){return 0===s.ads.length},this.didTypeChange=function(){return!(s.index>1)||this.getCurrentAdType()!==s.typeDescriptor[s.index-2]},this.getBuffer=function(){return s}}var r=n(0);t.a=i},function(e,t,n){"use strict";function i(){function e(){return{logs:[],getLogs:function(){return this.logs.map(function(e){return e.sinceStart+"ms : [ "+e.name+" ] "+e.message+" ("+e.sinceLast+"ms)"})},total:0,started:!1,finished:!1,startTime:0,endTime:0,previousLogTime:0}}var t=(r.a.log.bind(r.a,"Benchmark:"),r.a.info.bind(r.a,"Benchmark:"),r.a.error.bind(r.a,"Benchmark:"),r.a.warn.bind(r.a,"Benchmark:"));this.data={},this.start=function(n,i,r){this.data[n]?t("`"+n+"` was already started -> resetting."):this.data[n]=e(),this.data[n].started=!0,this.data[n].previousLogTime=this.data[n].startTime=Date.now(),this.log(n,i||"start",r)},this.log=function(e,n,i){var r=this.data[e];if(r&&!r.finished){var a=Date.now();r.logs.push({name:n||"log"+r.logs.length,message:i||"",sinceStart:a-r.startTime,sinceLast:a-r.previousLogTime,timestamp:a,type:e}),r.previousLogTime=a}else t("`"+e+"` was not started, canceling log.")},this.finish=function(e,t,n){var i=this.data[e];i&&!i.finished&&(this.log(e,t||"finish",n),i.finished=!0,i.endTime=Date.now(),i.total=i.endTime-i.startTime)},this.getResults=function(e){var t=this.data;return e?{logs:this.data[e].getLogs(),finished:this.data[e].finished,total:this.data[e].total}:Object.keys(this.data).reduce(function(e,n){return e[n]={logs:t[n].getLogs(),finished:t[n].finished,total:t[n].total},e},{})},this.has=function(e,t){try{return!!this.data[e].logs.find(function(e){return e.name===t},this)}catch(e){return!1}},this.measure=function(e){var n,i,r,a,o=arguments[0],s=arguments[1];if(3===arguments.length){i=arguments[2];try{var d=this.data[o].logs.slice().reverse();r=d.find(function(e){return e.name===s},this).timestamp,a=d.find(function(e){return e.name===i},this).timestamp}catch(e){t("measure(), can't find one of those: "+s+"="+r+", "+i+"="+a)}return a-r}if(4===arguments.length){n=arguments[2],i=arguments[3];try{r=this.data[o].logs.slice().reverse().find(function(e){return e.name===s},this).timestamp,a=this.data[n].logs.slice().reverse().find(function(e){return e.name===i},this).timestamp}catch(e){t("measure(), can't find one of those: "+s+"="+r+", "+i+"="+a)}return a-r}t("measure(), incorrect number of arguments.")},this.combine=function(e){return e?[].slice.call(arguments).map(function(e){if(this.data[e]&&this.data[e].logs)return this.data[e].logs.slice();t("combine(), "+e+" benchmark doesn't exist")},this).reduce(function(e,t,n,i){return e.concat(t)},[]).sort(function(e,t){return e.timestamp-t.timestamp}).map(function(e,t,n){return{log:e.timestamp+": [ "+e.type+"/"+e.name+" ] "+e.message,sinceLast:n[t-1]?e.timestamp-n[t-1].timestamp:0}}):[]}}var r=n(1),a=n(0),o={},s=r.b?new i:{data:a.a,start:a.a,log:a.a,finish:a.a,getResults:a.a,measure:a.a,combine:a.a};o.benchmark=s,t.a=s},function(e,t,n){"use strict";function i(e,t,n,i,s){function d(e){return[[e.AdErrorEvent.Type.AD_ERROR,"error"],[e.AdEvent.Type.CONTENT_RESUME_REQUESTED,"ended"],[e.AdEvent.Type.PAUSED,"paused"],[e.AdEvent.Type.RESUMED,"resumed"],[e.AdEvent.Type.VOLUME_CHANGED,"volumeChanged"],[e.AdEvent.Type.VOLUME_MUTED,"muted"],[e.AdEvent.Type.CLICK,"clicked"],[e.AdEvent.Type.STARTED,"started"],[e.AdEvent.Type.FIRST_QUARTILE,"firstQuartile"],[e.AdEvent.Type.MIDPOINT,"midpoint"],[e.AdEvent.Type.THIRD_QUARTILE,"thirdQuartile"],[e.AdEvent.Type.COMPLETE,"stopped"],[e.AdEvent.Type.SKIPPED,"skipped"],[e.AdEvent.Type.LOADED,"adLoaded"],[e.AdEvent.Type.CONTENT_PAUSE_REQUESTED,"pauseContent"]]}function u(e){return[[e.AdErrorEvent.Type.AD_ERROR,"error"],[e.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,"loaded"]]}function c(e){u(google.ima).forEach(function(t){var n=t[0],i=L[t[1]];e.addEventListener(n,i)})}function l(e){d(google.ima).forEach(function(t){var n=t[0],i=L[t[1]];e.addEventListener(n,i)})}function f(e){d(google.ima).forEach(function(t){var n=t[0],i=L[t[1]];e.removeEventListener(n,i)})}function p(e,t,n){var i=new google.ima.AdsRenderingSettings;return i.restoreCustomPlaybackStateOnAdBreakComplete=!1,void 0!==t&&(i.loadVideoTimeout=parseInt(t)),void 0!==n&&(i.bitrate=parseInt(n)),e.getAdsManager(E,i)}function h(e){f(g),g.destroy(),w("AdsManager destroyed"+(e?" (delayed)":""))}r.a.apply(this,arguments);var m,v,g,E,y,A,b=this,w=a.a.log.bind(a.a,o),C=(a.a.info.bind(a.a,o),a.a.error.bind(a.a,o)),D={adsLoaded:!1,contentInitialized:!1,userRequestContext:{},isCustomPlaybackUsed:null,targetWidth:null,targetHeight:null,targetViewMode:null},L={loaded:function(e){w("adsManager loaded"),D.userRequestContext=e.getUserRequestContext(),b.dispatchEvent(new CustomEvent("loaded-pre")),g=p(e,t,i),l(g),D.adsLoaded=!0,b.dispatchEvent(new CustomEvent("loaded-post",{detail:{createdAdsManager:!!g}}))},adLoaded:function(e){w("ad loaded");var t=e.getAd();A=t.getDuration(),D.isCustomPlaybackUsed=g.isCustomPlaybackUsed(),b.dispatchEvent(new CustomEvent("adLoaded",{detail:{ad:t,adData:e.getAdData(),isCustomPlaybackUsed:D.isCustomPlaybackUsed}})),-1!==A&&b.dispatchEvent(new CustomEvent("durationChange"))},error:function(e){C("ad error",e.getError());var t={detail:{adErrorEvent:e,userRequestContext:e.getUserRequestContext()||D.userRequestContext}};g&&(C("current failed ad:",g.getCurrentAd()),t.detail.currentAd=g.getCurrentAd()),A=-1,b.dispatchEvent(new CustomEvent("error",t)),D.userRequestContext={}},ended:function(){w("ad ended"),A=-1,b.dispatchEvent(new CustomEvent("ended")),D.userRequestContext={},D.isCustomPlaybackUsed=null},paused:function(){w("ad paused"),b.dispatchEvent(new CustomEvent("paused"))},resumed:function(){w("ad playing"),b.dispatchEvent(new CustomEvent("playing"))},volumeChanged:function(){w("ad volume changed"),b.dispatchEvent(new CustomEvent("volume-changed"))},muted:function(){w("ad muted"),b.dispatchEvent(new CustomEvent("muted"))},clicked:function(){w("ad clicked"),b.dispatchEvent(new CustomEvent("clicked"))},started:function(e){w("ad started"),b.dispatchEvent(new CustomEvent("started",{detail:{adEvent:e}}))},firstQuartile:function(){w("ad 25%, passed firstQuartile"),b.dispatchEvent(new CustomEvent("firstQuartile"))},midpoint:function(){w("ad 50%, passed midpoint"),b.dispatchEvent(new CustomEvent("midpoint"))},thirdQuartile:function(){w("ad 75%, passed thirdQuartile"),b.dispatchEvent(new CustomEvent("thirdQuartile"))},stopped:function(){w("ad stopped"),b.dispatchEvent(new CustomEvent("stopped")),D.userRequestContext={}},skipped:function(){w("ad skipped"),b.dispatchEvent(new CustomEvent("skipped"))},pauseContent:function(){w("content pause requested"),b.dispatchEvent(new CustomEvent("contentPauseRequested"))}};this.startAds=function(e,t,n){var i=!1;if(D.adsLoaded&&D.contentInitialized)try{e=void 0===e?y.offsetWidth:e,t=void 0===t?y.offsetHeight:t,n=void 0===n?google.ima.ViewMode.NORMAL:n,g.init(e,t,n),g.start(),i=!0}catch(e){L.error(e)}return i},this.resize=function(e,t,n){g&&(g.resize(e,t,n),w("resize( "+e+", "+t+", "+n+" )"))},this.destroyAdsManager=function(e){g&&(e?setTimeout(h.bind(this,e),0):h())},this.setVolume=function(e){g&&g.getVolume()!==e&&g.setVolume(e)},this.getVolume=function(){return g?g.getVolume():null},this.getRemainingTime=function(){return g?g.getRemainingTime():null},this.getDuration=function(){return g?A:null},this.stop=function(){g&&g.stop()},this.pause=function(){g&&g.pause()},this.resume=function(){g&&g.resume()},this.createAdDisplayContainer=function(e,t){y=e,E=t,m=new google.ima.AdDisplayContainer(y,E)},this.initAdDisplayContainer=function(){m.initialize()},this.createAdsLoader=function(){v=new google.ima.AdsLoader(m),c(v)},this.requestAd=function(e,t){t=t||{};var n=new google.ima.AdsRequest;D.userRequestContext={},t.autoplay&&n.setAdWillAutoPlay(!0),n.setAdWillPlayMuted(Boolean(t.muted)),n.adTagUrl=e,n.linearAdSlotWidth=640,n.linearAdSlotHeight=400,n.nonLinearAdSlotWidth=t.nonLinearWidth?t.nonLinearWidth:y.offsetWidth,n.nonLinearAdSlotHeight=t.nonLinearHeight?t.nonLinearHeight:150,D.userRequestContext.adsRequest=n,D.userRequestContext.adTagParams={},e.substr(e.indexOf("?")+1,e.length-1).split("&").map(function(e,t,n){var i=e.split("=")[0],r=e.split("=")[1];this[i]=r},D.userRequestContext.adTagParams),v.requestAds(n,D.userRequestContext)},this.setContentInitialized=function(e){D.contentInitialized=e},this.isContentInitialized=function(){return D.contentInitialized},this.isAdsLoaderReady=function(){return!!v},this.isCustomPlaybackUsed=function(){return D.isCustomPlaybackUsed},this.triggerContentComplete=function(){v.contentComplete()},google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode[s?"ENABLED":"INSECURE"]),google.ima.settings.setLocale(e),void 0!==n&&google.ima.settings.setNumRedirects(parseInt(n))}var r=n(13),a=n(1),o="Spieler DFP SdkWrapper:";i.prototype=Object.create(r.a.prototype),t.a=i},function(e,t,n){"use strict";function i(){var e=document.createTextNode(null);this.addEventListener=e.addEventListener.bind(e),this.removeEventListener=e.removeEventListener.bind(e),this.dispatchEvent=e.dispatchEvent.bind(e)}t.a=i},function(e,t,n){"use strict";function i(e,t,n,d){function u(){return e.elements.video.hasAttribute("controls")}function c(){return!r.a.browser.is.iOS}function l(e){e.stopPropagation()}var f,p,h=this,m=d.methods,v="function"==typeof d.onEnterFullscreen?d.onEnterFullscreen:o.a,g="function"==typeof d.onExitFullscreen?d.onExitFullscreen:o.a;this.dimensions={width:void 0,defaultWidth:480,height:void 0,defaultHeight:230},this.isOverlayDimensionsError=!1,this.resetTimer=function(){clearTimeout(f)},this.remove=function(){u()?(d.elements.main.classList.add("nativeOverlayHidden"),d.elements.main.classList.remove("nativeOverlay")):d.elements.main.classList.remove("overlay"),p&&(p.style.marginLeft="")},this.show=function(){u()?(d.elements.main.classList.remove("nativeOverlayHidden"),d.elements.main.classList.add("nativeOverlay")):d.elements.main.classList.add("overlay")},this.stop=function(){h.resetTimer(),t.stop(),n.overlay=!1,h.isOverlayDimensionsError=!1,h.remove(),d.adContainer.style.bottom=0,p&&p.removeEventListener("mousedown",l),p=void 0,e.dispatcher.dispatch(a.a.AD_ENDED,s.a.generateAdEventData(n.ad,n.current.position,{position:i.POSITION,isLinear:!0}))},this.prepare=function(e){var t=d.overlay;n.sdkLoaded&&(h.resetTimer(),h.isOverlayDimensionsError=!1,f=setTimeout(function(){t&&c()&&(n.overlay=!0,m.requestAds(t,"overlay",{nonLinearWidth:h.nonLinearWidth}))},e))},this.onResize=function(){if(h.isOverlayDimensionsError){var e=p&&p.offsetWidth>h.dimensions.width&&p.offsetHeight>h.dimensions.height;p&&!e||h.prepare(200)}},this.bindToSpieler=function(){e.dispatcher.add(a.a.END,function(e,t){t.position<100&&h.prepare(3e3)}),e.dispatcher.add(r.a.events.FULLSCREEN,function(e,i){var r=d.overlay;r&&n.overlay&&(t.stop(),c()&&(i.enter?m.requestAds(r,"overlay",{nonLinearWidth:screen.width,nonLinearHeight:screen.height}):m.requestAds(r,"overlay",{nonLinearWidth:h.nonLinearWidth})),i.enter?v():g())}),e.dispatcher.add(r.a.events.MEDIACHANGE,function(){n.beforePreInit=!0,n.overlay?h.stop():h.resetTimer()}),e.dispatcher.add(r.a.events.END,function(){n.overlay&&h.stop()}),t.addEventListener("adLoaded",function(e){e.detail.adData.linear||(e.detail.adData.vpaid?d.adContainer.style.bottom=0:(d.adContainer.style.bottom=d.overlayBottom+"px",p=d.adContainer.firstChild,p.addEventListener("mousedown",l)))}),t.addEventListener("error",function(e){var t=e.detail.adErrorEvent.getError().getErrorCode();-1!==[google.ima.AdError.ErrorCode.NONLINEAR_DIMENSIONS_ERROR,google.ima.AdError.ErrorCode.VAST_NONLINEAR_ASSET_MISMATCH].indexOf(t)&&(h.isOverlayDimensionsError=!0)})}}var r=n(4),a=n(5),o=n(0),s=n(2);i.POSITION=2,t.a=i},function(e,t,n){"use strict";t.a=function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}},function(e,t,n){"use strict";t.a=function(){"function"!=typeof Object.entries&&(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=[t[n],e[t[n]]];return i})}},function(e,t,n){"use strict";t.a=function(){"function"!=typeof Object.values&&(Object.values=function(e){return Object.keys(e).map(function(t){return e[t]})})}},function(e,t,n){"use strict";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(){this._events=new i,this._eventsCount=0}var o=Object.prototype.hasOwnProperty,s="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(s=!1)),a.prototype.eventNames=function(){var e,t,n=this,i=[];if(0===this._eventsCount)return i;for(t in e=n._events)o.call(e,t)&&i.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e,t){var n=s?s+e:e,i=this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var r=0,a=i.length,o=new Array(a);r<a;r++)o[r]=i[r].fn;return o},a.prototype.emit=function(e,t,n,i,r,a){var o=arguments,d=this,u=s?s+e:e;if(!this._events[u])return!1;var c,l,f=this._events[u],p=arguments.length;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),p){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,n),!0;case 4:return f.fn.call(f.context,t,n,i),!0;case 5:return f.fn.call(f.context,t,n,i,r),!0;case 6:return f.fn.call(f.context,t,n,i,r,a),!0}for(l=1,c=new Array(p-1);l<p;l++)c[l-1]=o[l];f.fn.apply(f.context,c)}else{var h,m=f.length;for(l=0;l<m;l++)switch(f[l].once&&d.removeListener(e,f[l].fn,void 0,!0),p){case 1:f[l].fn.call(f[l].context);break;case 2:f[l].fn.call(f[l].context,t);break;case 3:f[l].fn.call(f[l].context,t,n);break;case 4:f[l].fn.call(f[l].context,t,n,i);break;default:if(!c)for(h=1,c=new Array(p-1);h<p;h++)c[h-1]=o[h];f[l].fn.apply(f[l].context,c)}}return!0},a.prototype.on=function(e,t,n){var i=new r(t,n||this),a=s?s+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],i]:this._events[a].push(i):(this._events[a]=i,this._eventsCount++),this},a.prototype.once=function(e,t,n){var i=new r(t,n||this,!0),a=s?s+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],i]:this._events[a].push(i):(this._events[a]=i,this._eventsCount++),this},a.prototype.removeListener=function(e,t,n,r){var a=s?s+e:e;if(!this._events[a])return this;if(!t)return 0==--this._eventsCount?this._events=new i:delete this._events[a],this;var o=this._events[a];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||(0==--this._eventsCount?this._events=new i:delete this._events[a]);else{for(var d=0,u=[],c=o.length;d<c;d++)(o[d].fn!==t||r&&!o[d].once||n&&o[d].context!==n)&&u.push(o[d]);u.length?this._events[a]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new i:delete this._events[a]}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new i:delete this._events[t])):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=s,a.EventEmitter=a,e.exports=a}]);"use strict";var isLocalStorageSupported=false;try{isLocalStorageSupported="localStorage"in window&&typeof window.localStorage==="object"&&"setItem"in window.localStorage}catch(e){window.console.warn("Spieler: localStorage cannot be accessed possibly due to disabled cookies")}var isDebugEnabled=isLocalStorageSupported&&window.localStorage.getItem("debug")==="enabled";var isHlsJsDebugEnabled=isLocalStorageSupported&&window.localStorage.getItem("debugHlsjs")==="enabled";var isBenchmarkEnabled=isLocalStorageSupported&&window.localStorage.getItem("benchmark")==="enabled";var isMetricsDebugEnabled=isLocalStorageSupported&&window.localStorage.getItem("debugMetrics")==="enabled";var metricsDebugURL=isLocalStorageSupported&&window.localStorage.getItem("metricsURL");var console={log:isDebugEnabled?window.console.log.bind(window.console):DUMMY,warn:isDebugEnabled?window.console.warn.bind(window.console):DUMMY,error:isDebugEnabled?window.console.error.bind(window.console):DUMMY,info:isDebugEnabled?window.console.info.bind(window.console):DUMMY};"use strict";var utils;(function(){function createIEObject(url,params){params.movie=url;var paramList="";for(var i in params){paramList+='<param name="'+i+'" value="'+params[i]+'">'}var div=document.createElement("div");div.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+paramList+"</object>";return div.firstChild}function createObject(url,params){var obj=document.createElement("object");obj.setAttribute("type","application/x-shockwave-flash");obj.setAttribute("data",url);for(var i in params){var param=document.createElement("param");param.setAttribute("name",i);param.setAttribute("value",params[i]);obj.appendChild(param)}return obj}function removeIEObject(obj){if(obj.readyState){if(obj.readyState===4||obj.readyState==="complete"){for(var i in obj){if(typeof obj[i]==="function"){obj[i]=null}}removeObject(obj)}else{setTimeout(function(){removeIEObject(obj)},100)}}else{removeObject(obj)}}function removeObject(obj){obj.parentNode.removeChild(obj)}function isPlainObject(obj){if(!obj||obj.toString()!=="[object Object]"){return false}var hasOwnConstructor=obj.hasOwnProperty("constructor");var hasIsPrototypeOf=obj.constructor&&obj.constructor.prototype&&obj.constructor.prototype.hasOwnProperty("isPrototypeOf");if(obj.constructor&&!hasOwnConstructor&&!hasIsPrototypeOf){return false}var key;for(key in obj){}return typeof key==="undefined"||obj.hasOwnProperty(key)}function extend(){var options,name,src,copy,copyIsArray,clone;var target=arguments[0];var i=1;var length=arguments.length;var deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}else if(typeof target!=="object"&&typeof target!=="function"||target===null){target={}}for(;i<length;++i){options=arguments[i];if(options!==null){for(name in options){src=target[name];copy=options[name];if(target!==copy){if(deep&&copy&&(isPlainObject(copy)||(copyIsArray=Array.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&Array.isArray(src)?src:[]}else{clone=src&&isPlainObject(src)?src:{}}target[name]=extend(deep,clone,copy)}else if(typeof copy!=="undefined"){target[name]=copy}}}}}return target}utils={extend:extend,cloneObject:function(o){return this.extend({},o)},deprecate:function(obj,key,name){var value=typeof obj[key]==="function"?obj[key].bind(obj):obj[key];name=typeof name!=="string"?key:name;Object.defineProperty&&Object.defineProperty(obj,key,{get:function(){console.warn("Spieler: "+name+" is now deprecated"+"and will be removed in the next major version.");return value},set:DUMMY})},isEmptyVideo:function(videoElement){return videoElement.getAttribute("src")===""},resetVideoElement:function(videoElement){videoElement.setAttribute("style","")},embedFlash:function(url,params,attrs){var isOldIE=Spieler.browser.is.ie!==false&&Spieler.browser.is.ie<11;var obj=(isOldIE?createIEObject:createObject)(url,params);if(attrs){for(var i in attrs){obj.setAttribute(i,attrs[i])}}return obj},deleteFlash:function(obj){var isOldIE=Spieler.browser.is.ie!==false&&Spieler.browser.is.ie<11;if(isOldIE){obj.style.display="none";removeIEObject(obj)}else{removeObject(obj)}},isHTTPS:function(){return window.location.protocol==="https:"},isPromise:function(method){return typeof method!=="undefined"&&"then"in method&&typeof method.then==="function"},isDummyVideo:function(src){return src.search(/(.*)player.performgroup.com\/spieler\/(.*)dummyvideo.mp4/)>=0},bindAll:function(obj){var key;for(key in obj){if(typeof obj[key]==="function"){obj[key]=obj[key].bind(obj)}}},safeToString:function(x){var type=typeof x;switch(typeof x){case"object":if(Array.isArray(x)){return x.join(", ")}else if(x===null){return"null"}else if(x instanceof Error){return x.message}return JSON.stringify(x);case"function":return"function";default:return x+""}},randomNumber:function(){return Math.floor(Math.random()*1e6)},addCacheBuster:function(url){if(url.indexOf("?")!==-1){var urlParts=url.split("?");urlParts[1]=urlParts[1].replace(/(?:^|&)random=(?:[^&]*|$)/,"");url=urlParts[1]!==""?urlParts.join("?"):urlParts[0]}url+=(url.indexOf("?")!==-1?"&":"?")+"random="+utils.randomNumber();return url},generateSpielerUUID:function(){return Number(10+Math.floor(Math.random()*89)+String(Date.now()).substr(-5))}}})();"use strict";var dom;(function(){dom={prop:function(element,propertyName,value){if(value!==undefined){if(value){element.setAttribute(propertyName,propertyName)}else{element.removeAttribute(propertyName)}element[propertyName]=value}return element[propertyName]},once:function(element,eventName,handler,useCapture){handler._called=false;var self=this;handler._onceWrapper=function(element,eventName,handler,useCapture){return function(){if(!handler._called){handler._called=true;element.removeEventListener(eventName,handler,useCapture);handler.apply(handler,Array.from(arguments))}}}(element,eventName,handler,useCapture);element.addEventListener(eventName,handler._onceWrapper,useCapture);return this},ready:function(handler){if(["interactive","complete"].find(equals(document.readyState))){handler()}else{this.once(document,"readystatechange",handler)}},text:function(element,content){if(content){element.textContent=content;return this}else{return element.textContent}},createElement:function(tag,attributes,children){attributes=attributes||{};children=children||[];var element=document.createElement(tag);Object.keys(attributes).forEach(function(attribute){var value=attributes[attribute];switch(attribute){case"text":element.textContent=value;break;case"html":element.innerHTML=value;break;case"data":for(var attr in value){element.setAttribute("data-"+attr,value[attr])}break;case"on":if(typeof value==="object"){Object.entries(value).forEach(function(kvPair){var eventName=kvPair[0];var handler=kvPair[1];element.addEventListener(eventName,handler)})}break;default:element.setAttribute(attribute,value)}});children.forEach(function(child){if(typeof child==="string"){child=document.createTextNode(child)}element.appendChild(child)});return element},addToHead:function(element){document.querySelector("head").appendChild(element);return element},removeFromHead:function(element){try{return document.querySelector("head").removeChild(element)}catch(e){console.warn(e);return}}};dom.addCSS=function(style,inline){inline=inline||false;if(inline){var css=dom.addToHead(dom.createElement("style"));try{css.innerHTML=style}catch(e){css.styleSheet.cssText=style}}else{dom.addToHead(dom.createElement("link",{type:"text/css",rel:"stylesheet",href:style}))}};dom.addScript=function(url,onSuccess,onError){var element=dom.createElement("script",{src:url,type:"text/javascript",on:{load:onSuccess||DUMMY,error:onError||DUMMY}});return dom.addToHead(element)}})();var Spieler=function(window,version){"use strict";var instances={};var Spieler=function(element,resources,rawConfig){var log=console.log.bind(console,"Spieler:");var info=console.info.bind(console,"Spieler:");var warn=console.warn.bind(console,"Spieler:");var error=console.error.bind(console,"Spieler:");info("inited with config:",Object.assign({},rawConfig));Object.defineProperty(this,"_uuid",{value:utils.generateSpielerUUID(),readonly:true});log("creating new instance");var config=Object.assign({},rawConfig)||{};if(typeof config.plugins==="undefined"){config.plugins={}}var self=this;var upid=config.upid||"upid_"+utils.randomNumber();var elements={};var screen;var ui;var dispatcher=new Dispatcher;var hooks=new HookManager;var ncm;var nfm;var inHTML5FS;var poster;var state={playing:config.autoplay?config.autoplay:undefined,posterClicked:true,uninitialized:true,finishedPlayback:false,muted:config.muted!==undefined?config.muted:false,volume:config.volume!==undefined?config.volume:.8,passive:false,metadataloaded:undefined,mobileAutoplay:false,playsInline:config.playsInline&&Spieler.browser.is.iPad||config.playsInline===undefined?false:config.playsInline,pRate:1,poked:false,poking:false};if(typeof config.playerSignature==="object"){reportPlayerSignature(config.playerSignature);delete config.playerSignature}function metricsContentChange(media){Spieler.Metrics.event(self._uuid,"content","change",media.active().url)}function reportPlayerSignature(playerSignature){if(playerSignature&&typeof playerSignature==="object"){Spieler.Metrics.event(self._uuid,"playerSignature",playerSignature.name,playerSignature.build)}}function parseHooksFromConfig(configHooks,hookManager){var hookTypes=["streamurl-needed","post-hybrid-autoplay","pre-init","post-clip"];hookTypes.forEach(function(type){configHooks[type].forEach(function(hook){if(typeof hook.function!=="function"||hook.name.length<=0){return}hookManager.add(type,hook.function,hook.name)})})}function hidePoster(forceBlack){if(Spieler.browser.is.firefox||forceBlack){elements.video.poster="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY2BgYAAAAAQAAVzN/2kAAAAASUVORK5CYII="}else{elements.video.removeAttribute("poster")}}function showPoster(){elements.video.poster=Spieler.browser.is.iOS!==false?utils.addCacheBuster(config.poster):config.poster}function warnAboutFlashAndNative(){if(config.denyFlash!==true&&Spieler.browser.has.flash()&&(ncm||nfm)){var n=[];if(ncm)n.push("native controls");if(nfm)n.push("native fullscreen");var isAre=!ncm&&nfm?"is":"are";var msg="native fullscreen/controls are not supported with Flash!";var reason=" (flash is enabled for content, while "+n.join(" and ")+" "+isAre+" also enabled)";error(msg+reason)}}function onUiLoaded(basicUiModule){var uiClass=basicUiModule?basicUiModule(dom,utils,Spieler):SpielerBasicUI(dom,utils,Spieler);if(config.nativeFullscreen){config.basicUi.nativeFullscreen=config.nativeFullscreen}ui=new uiClass(elements.ui,self,config.basicUi,state);log("BASICUI loaded");if(self.duration()!==-1&&!(typeof x==="number"&&isNaN(x))){ui.handleDurationChange("",self.duration())}}function createBasicUI(){if(config.basicUi===true){config.basicUi={}}if(config.basicUi&&!ui){if(typeof module!=="undefined"){setTimeout(function(){onUiLoaded(require("./basicui.js"))},0)}else{dom.addScript(Spieler.path+"basicui.js",function(){onUiLoaded()})}}}function init(resources){return new Promise(function(resolve,reject){if(!resources){warn("halted initialization since given resource is empty");reject()}if(screen&&!screen.isDestroyed()){screen.destroy();screen=null}dom.prop(elements.video,"playsinline",state.playsInline||state.mobileAutoplay&&!Spieler.browser.is.iPad);state.uninitialized=false;state.playing=true;benchmark.log("Spieler","init");if(config.plugins&&config.plugins.dfp){dispatcher.addOnce("DFP.END",function(){hidePoster()});dispatcher.addOnce("DFP.STARTED",function(eventName,data){if(data.position>=2)return;if(self.dfp&&self.dfp.isCustomPlaybackUsed()){hidePoster()}else{hidePoster(true)}})}else{dispatcher.addOnce(Spieler.events.PLAYING,function(){hidePoster()})}if(!hooks.isEnabled("streamurl-needed")){log("loadMedia(), dont have streamurl-needed");loadMedia(resources).then(onInitMediaLoaded).then(function(){return executePreInitHook(resources)}).then(resolve)}else{if(resources.metadata&&resources.metadata.tokenized){log("resources.metadata && resources.metadata.tokenized");hooks.exec("streamurl-needed",resources,function(err,newResources){if(err||!newResources){error("streamurl-needed hook failed.")}else{log("loadMedia(), has streamurl-needed");loadMedia(newResources).then(onInitMediaLoaded).then(function(){return executePreInitHook(newResources)}).then(resolve)}})}}})}function executePreInitHook(resources){return new Promise(function(resolve,reject){backup.remember();hooks.exec("pre-init",{resources:resources,configOverrides:{}},function(err,data){var configOverrides=data&&data.configOverrides;if(configOverrides){self._configOverrides=data.configOverrides}if(err){error("pre-init hook failed.",err);reject()}if(configOverrides&&configOverrides.denyFlash===true){if(config.denyFlash!==true){warn("overriding denyFlash with "+configOverrides.denyFlash+" (was "+config.denyFlash+")");config.denyFlash=configOverrides.denyFlash;self.media.updateFlashAvailability(false);self.media.load(self.media)}}else if(screen instanceof FlashScreen){screen.delayedLoad()}else{backup.restore()}log("cleaning up video element after pre-init");utils.resetVideoElement(elements.video);if(self.media!==undefined&&self.media.sources.length>0){resolve()}})})}function tryAutoplay(){return new Promise(function(resolve,reject){var newHybridAutoplayData=function(){return{muted:state.muted,playing:state.playing}};var autoplayPossible=function(){info("autoplay is possible!");self.pause(true);state.poking=false;self.dispatcher.dispatch(Spieler.events.POKINGPROGRESSCHANGE,state.poking);hooks.exec("post-hybrid-autoplay",newHybridAutoplayData(),function(err,data){resolve()})};info("trying autoplayHybrid");state.poking=true;self.dispatcher.dispatch(Spieler.events.POKINGPROGRESSCHANGE,state.poking);if(!config.muted&&state.muted){self.muted(false)}var playPromise=elements.video.play();if(typeof playPromise==="undefined"){autoplayPossible();return}playPromise.then(autoplayPossible).catch(function(){warn("autoplay failed, muting the video and trying again.");self.muted(true);elements.video.play().then(function(){info("autoplay MUTED success!");state.poking=false;self.dispatcher.dispatch(Spieler.events.POKINGPROGRESSCHANGE,state.poking);hooks.exec("post-hybrid-autoplay",newHybridAutoplayData(),function(err,data){resolve()})}).catch(function(){error("muted autoplay failed, turning myself to CTP.");self.muted(false);self.pause();state.poking=false;self.dispatcher.dispatch(Spieler.events.POKINGPROGRESSCHANGE,state.poking);hooks.exec("post-hybrid-autoplay",newHybridAutoplayData(),function(err,data){reject()})})})})}function onInitMediaLoaded(){return new Promise(function(resolve,reject){if(Spieler.browser.is.IOS||Spieler.browser.is.OSX){if(Spieler.browser.fs.isFullscreenElement(elements.main)||nfm&&nfm.inFullscreen()){screen.play()}}if(state.playing||self.dfp){self.elements.video.autoplay=false}if(config.autoplayHybrid&&screen instanceof TagScreen){tryAutoplay().then(resolve).catch(reject)}else if(screen instanceof TagScreen){screen.play();state.poking=false;resolve()}else{resolve()}})}function onMediaReady(resources,done,media){log("initializing media",media);if(typeof resources==="object"||typeof resources==="string"){media.load(resources)}else{error("invalid, or no media specified")}if(typeof done==="function"){done(media)}}function loadMedia(resources){return new Promise(function(resolve){log("initializing resources",resources);var done=function(newMedia){metricsContentChange(newMedia);resolve()};self.media=new Media(config.denyFlash,dispatcher,onMediaReady.bind(null,resources,done))})}function onMediaPlatformChange(eventName,params){var media=params.media;benchmark.log("Spieler","screen");if(screen&&!screen.isDestroyed()){screen.destroy();screen=null}var flashPlatform=media.isFlashBasedPlatform();if(flashPlatform===true){screen=new FlashScreen(elements.view,self,media,config.acceleration)}else if(flashPlatform===false){screen=new TagScreen(elements.view,self,media,state);screen.prepare().then(function(){if(config.forceFullscreen){self.fullscreen()}if(config.denyFlash&&state.playing&&elements.video.paused){self.resume()}})}else{dispatcher.dispatch(Spieler.events.UNSUPPORTEDFORMAT)}}function isPlayingSupportedFormat(){var allPlatforms=Object.values(Media.PLATFORM).reduce(sum,0);return(allPlatforms&self.media.platform())>0}function onInitComplete(previousUninitialized){if(self.getPassiveState()||self.media!==undefined&&isPlayingSupportedFormat()){screen&&screen.play()}else{state.uninitialized=previousUninitialized;utils.resetVideoElement(elements.main)}}function pokeVideo(comment){var pokingDone=function(skipping){state.poked=true;state.poking=false;if(!skipping){unblockPlaysinlineState();if(ncm){ncm.enable()}if(state.playing===false||self.dfp&&self.dfp.isVideoAdBeingPlayed()&&!self.dfp.isCustomPlaybackUsed()){elements.video.pause()}}if(!state.muted||state.muted&&state.mobileAutoplay){if(skipping&&state.playing){setTimeout(function(){self.muted(false)},20)}else{self.muted(false)}}var outcome=skipping?"skipped":"success";log("pokeVideo[ "+comment+" ] "+outcome);benchmark.log("Spieler","pokeVideo",outcome+" @"+comment);removePokeEvents();dispatcher.dispatch(Spieler.events.POKINGPROGRESSCHANGE,state.poking)};benchmark.log("Spieler","pokeVideo","@"+comment);if(state.poking){benchmark.log("Spieler","pokeVideo","abort, poking in progress @"+comment);log("pokeVideo[ "+comment+" ] abort, poking in progress.");return}if(state.poked){benchmark.log("Spieler","pokeVideo","already poked @"+comment);log("pokeVideo[ "+comment+" ] already poked.");return}if(state.mobileAutoplay&&comment==="userGesture"&&state.playing){state.poking=true;benchmark.log("Spieler","pokeVideo","skipping, poking in progress @"+comment);log("pokeVideo[ "+comment+" ] skipping, video was on autoplay.");pokingDone(true);return}if(Spieler.userInteraction===false){benchmark.log("Spieler","pokeVideo","failed, userInteraction = false @"+comment);info("pokeVideo[ "+comment+" ] can' poke, requires user interaction.");return}if(!elements.video.src||utils.isDummyVideo(elements.video.src)){benchmark.log("Spieler","pokeVideo","failed, video is not ready yet @"+comment);info("pokeVideo[ "+comment+" ] video had no `src`.");return}log("pokeVideo[ "+comment+" ] trying to poke");state.poking=true;dispatcher.dispatch(Spieler.events.POKINGPROGRESSCHANGE,state.poking);if(ncm){ncm.disable()}var playPromise=elements.video.play();if(utils.isPromise(playPromise)){self.dfp&&self.dfp.setVolume(self.volume());playPromise.then(function(){pokingDone()}).catch(function(reason){if(reason.name==="AbortError"){pokingDone()}else{state.poking=false;self.dfp&&self.dfp.setVolume(self.muted()?0:self.volume());error("pokeVideo[ "+comment+" ] failed. ",reason);benchmark.log("Spieler","pokeVideo","failed, in promise @"+comment);if(ncm){ncm.enable()}dispatcher.dispatch(Spieler.events.POKINGPROGRESSCHANGE,state.poking)}})}else{pokingDone()}}var pokeEvents=[Spieler.events.PLAY,Spieler.events.FULLSCREEN,Spieler.events.PAUSE,Spieler.events.PAUSED,Spieler.events.MUTEDCHANGE];function registerPoke(eventName){if(!state.poked&&!state.poking){pokeVideo(eventName+" event")}}function addPokeEvents(){pokeEvents.forEach(function(evt){dispatcher.add(evt,registerPoke)})}function removePokeEvents(){pokeEvents.forEach(function(evt){dispatcher.remove(evt,registerPoke)})}function reinit(){return new Promise(function(resolve,reject){if(screen&&(!screen.isDestroyed()||config.nativeControls)){screen.destroy();screen=null}var previousUninitialized=state.uninitialized;state.posterClicked=true;state.finishedPlayback=false;init(resources).then(function(){if(self.media!==undefined&&isPlayingSupportedFormat()||self.media===undefined&&hooks.isEnabled("pre-init")){screen.play()}else{state.uninitialized=previousUninitialized;state.posterClicked=false;showPoster()}resolve()})})}function initPlugins(pluginsFinished){var currentIndex=-1;var configKeys=Object.keys(config.plugins);function next(){currentIndex++;var currentPluginName=configKeys[currentIndex];if(currentIndex>=configKeys.length){pluginsFinished()}else if(!config.plugins[currentPluginName]){next()}else{try{if(currentPluginName==="dfp"){new DFP(self,elements,config.plugins[currentPluginName],next)}else if(Spieler.plugins[currentPluginName]){Spieler.plugins[currentPluginName](self,elements,config.plugins[currentPluginName],next)}}catch(e){error("failed to initialize plugin: "+currentPluginName,e);next()}}}next()}function onUserGesture(event){pokeVideo("userGesture")}function addEventListeners(){elements.main.addEventListener("touchend",onUserGesture,true);addPokeEvents()}function removeEventListeners(){elements.main.removeEventListener("touchend",onUserGesture);removePokeEvents()}function finishConstructor(){var networkStatus=true;var networkTimer=setInterval(function(){if(navigator.onLine===false&&networkStatus===true){log("OFFLINE");dispatcher.dispatch(Spieler.events.OFFLINE)}networkStatus=navigator.onLine},1e3);benchmark.log("Spieler","loaded");self.dispatcher.dispatch(Spieler.events.READY);log("READY for playing.");info("loaded "+benchmark.measure("Spieler","start","loaded")+"ms")}function initDOM(element,state){dom.addCSS(mainCSS,true);var r={};r.main=document.createElement("div");r.main.className="ppMain";element.appendChild(r.main);element=r.main;r.view=document.createElement("div");r.view.className="ppView";element.appendChild(r.view);var video=document.createElement("video");utils.resetVideoElement(video);dom.prop(video,"playsinline",state.playsInline||state.mobileAutoplay&&!Spieler.browser.is.iPad);dom.prop(video,"autoplay",state.playing);dom.prop(video,"muted",state.muted);r.view.appendChild(video);r.video=video;var videoBackCover=document.createElement("div");videoBackCover.className="backcover";r.view.appendChild(videoBackCover);r.videoBackCover=videoBackCover;r.ui=document.createElement("div");r.ui.className="ppUi";element.appendChild(r.ui);return r}function unblockPlaysinlineState(){console.log("unblockPlaysinlineState()");dom.prop(elements.video,"playsinline",state.playsInline);dom.prop(elements.video,"autoplay",false);if(!state.muted||state.muted&&state.mobileAutoplay){dom.prop(elements.video,"muted",false)}state.mobileAutoplay=false}function setVideoElementVolume(video,value){video.volume=value;if(video.volume!==value){info("volume didn't change. requested: "+value+", video:"+video.volume)}return video.volume}function Backup(){var src=null;var currentTime=null;var playing=null;var restoring=false;var backup=this;function restoreHtmlVideoPlayback(){elements.video.removeEventListener("loadedmetadata",restoreHtmlVideoPlayback);if(!playing&&state.playing){self.pause();finish();return}dispatcher.addOnce(Spieler.events.PLAYING,function(){if(currentTime!==null){self.currentTime(currentTime)}finish()});if(playing&&!state.playing){self.resume()}}function restoreFlashPlayback(){if(!playing&&screen.playing()){self.pause();finish()}else if(playing&&!screen.playing()){self.resume();dispatcher.addOnce(Spieler.events.PLAYING,function(){if(currentTime!==null){self.currentTime(currentTime)}finish()})}else{finish()}}function continueRestoring(){if(src===null){restoreHtmlVideoPlayback()}else if(elements.video.src!==src){elements.video.addEventListener("loadedmetadata",restoreHtmlVideoPlayback);self.play(self.media.sources,true,true)}else{if(playing){self.resume()}finish()}}function finish(){info("Backup: finish()");restoring=false;elements.video.removeEventListener("loadedmetadata",restoreHtmlVideoPlayback);currentTime=playing=null}function hasBackup(){return currentTime!==null||playing!==null||src!==null}this.remember=function(){if(restoring){warn("Backup: I'm currently trying to restore media. Ignoring `remember()`");return}info("Backup: remember()");src=elements.video.src!==""?elements.video.src:null;currentTime=self.currentTime();playing=state.playing;info("Backup.remember() => time: "+currentTime+", playing: "+playing)};this.restore=function(){if(restoring){warn("Backup: I'm already trying to restore media");return}if(!hasBackup()){warn("Backup: nothing to restore.");return}if(currentTime===-1){warn("Backup: End of video, abort.");return}info("Backup: restoring");restoring=true;if(screen instanceof FlashScreen){if(currentTime===0){screen.delayedLoad();finish()}else{restoreFlashPlayback()}}else{if(!state.poking){continueRestoring()}else{dispatcher.addOnce(Spieler.events.POKINGPROGRESSCHANGE,continueRestoring)}}};this.hasBackup=hasBackup}var backup=new Backup;function checkAutoplayIOS(state){if(state.playing&&Spieler.browser.is.iOS>=10){if(state.muted){info("autoplay requirements have been met on this iOS device, adding `playsinline` attribute to video tag");state.mobileAutoplay=true}else{warn("autoplay is not supported without being `muted`, overriding config by removing `muted` and `playing` setting");state.playing=undefined;state.muted=false}}}function checkAutoplayAndroid(state){if(state.playing&&Spieler.browser.is.android&&Spieler.browser.is.chrome>=53){if(state.muted){info("autoplay requirements have been met on this mobile device");state.mobileAutoplay=true}else{warn("autoplay is not supported without being `muted`, overriding config by removing `muted` and `playing` setting");state.playing=undefined;state.muted=false}}}function checkAutoplayDesktop(state){if(state.playing&&!state.muted){warn("autoplay is not supported on this device or browser, overriding config by removing `playing` setting");state.playing=undefined}}Object.defineProperty(this,"playState",{get:function(){return state.playing===undefined?"stopped":state.playing?"playing":"paused"},set:DUMMY});this.play=function(newResources,internal,noPreInit){if(!newResources&&state.playing===false){return this.resume()}var previousUninitialized=state.uninitialized;var bindedOnInitComplete=onInitComplete.bind(null,previousUninitialized);if(newResources){if(!internal){dispatcher.dispatch(Spieler.events.MEDIACHANGE,newResources)}resources=newResources;if(noPreInit){return loadMedia(newResources).then(bindedOnInitComplete)}else{return init(newResources).then(bindedOnInitComplete)}}else if(resources){if(state.uninitialized){return init(resources).then(bindedOnInitComplete)}else if(state.finishedPlayback){return reinit().then(bindedOnInitComplete)}}};this.resume=function(){state.playing=true;if(state.newIosDelayedUnblock||state.mobileAutoplay&&Spieler.userInteraction&&state.poked){state.newIosDelayedUnblock=undefined;unblockPlaysinlineState()}if(this.dfp&&this.dfp.isVideoAdBeingPlayed()){this.dfp.resume()}else if(screen){return screen.play()}};this.pause=function(force){if(!state.poking||force){dispatcher.dispatch(Spieler.events.PAUSE)}if(state.mobileAutoplay&&Spieler.userInteraction&&state.poked){if(Spieler.browser.is.iOS>=10){state.newIosDelayedUnblock=true}else{unblockPlaysinlineState()}}};this.currentTime=function(value){return screen?screen.currentTime(value):-1};this.buffered=function(){return screen?screen.buffered():-1};this.duration=function(){return screen?screen.duration():-1};this.volume=function(value){if(value!==undefined&&state.volume!==value){if(state.mobileAutoplay&&Spieler.userInteraction&&state.poked){unblockPlaysinlineState()}if(screen){state.volume=screen.volume(value)}else{state.volume=setVideoElementVolume(elements.video,value)}dispatcher.dispatch(Spieler.events.VOLUMECHANGE,state.volume)}return state.volume};this.muted=function(value){if(value!==undefined&&state.muted!==value){if(state.mobileAutoplay&&Spieler.userInteraction&&state.poked){unblockPlaysinlineState()}if(screen){state.muted=screen.muted(value)}else{state.muted=value}dispatcher.dispatch(Spieler.events.MUTEDCHANGE,state.muted)}return state.muted};this.quality=function(value){var retValue;if(this.absAvailable()){if(this.mbsAvailable()){if(value===undefined){retValue=screen?screen.quality():0}else{if(self.media&&(self.media.platform()&Media.PLATFORM.HLSJS)>0&&screen instanceof TagScreen||screen instanceof FlashScreen){screen.abs(false);screen.quality(value)}}}else{retValue=-1}}else{if(self.media){if(value===undefined){retValue=self.media.quality()}else if(value===self.media.quality()){retValue=self.media.quality()}else{if(value<0||value>self.media.qualities()-1){retValue=-1}else{var lastCurrentTime=this.currentTime();self.media.quality(value);dispatcher.dispatch(Media.events.PLATFORMCHANGE,{media:self.media});if(lastCurrentTime>0){elements.video.classList.add("seek-hidden");dispatcher.addOnce(Spieler.events.DURATIONCHANGE,function(){log("quality seek",lastCurrentTime);self.currentTime(lastCurrentTime);lastCurrentTime=0;if(state.playing){self.resume()}});setTimeout(function(){elements.video.classList.remove("seek-hidden")},500)}dispatcher.dispatch(Spieler.events.QUALITY)}}}else{retValue=0}}return retValue};this.qualityList=function(){if(this.mbsAvailable()&&screen){return screen.qualityList()}if(!this.absAvailable()&&self.media){return self.media.qualityList()}return[]};this.qualities=function(){if(this.mbsAvailable()&&screen){return screen.qualities()}if(!this.absAvailable()&&self.media){return self.media.qualities()}return 1};this.abs=function(value){return screen?screen.abs(value):false};this.absAvailable=function(){return self.media?self.media.absAvailable():false};this.mbsAvailable=function(){return self.media?self.media.mbsAvailable():false};this.fullscreen=function(value){if(state.mobileAutoplay&&Spieler.userInteraction&&state.poked){unblockPlaysinlineState()}log("fullscreen requested: ",value);var entering=value===true||value===undefined&&(!Spieler.browser.fs.isFullscreenElement(elements.main)||nfm&&!nfm.inFullscreen());if(entering){if(Spieler.browser.fs[config.nativeFullscreen?"native":"html5"]===true){if(Spieler.userInteraction===false){error("going fullscreen requires user interaction");dispatcher.dispatch(Spieler.events.FULLSCREENERROR)}else{dispatcher.dispatch(Spieler.events.FULLSCREEN,{enter:true,exit:false,toggle:false})}}else{error("going fullscreen is not available for spieler in this context");dispatcher.dispatch(Spieler.events.FULLSCREENERROR)}}else{dispatcher.dispatch(Spieler.events.FULLSCREEN,{enter:false,exit:true,toggle:false})}};this.playing=function(){return state.playing};this.upid=function(){return upid};this.destroy=function(){dispatcher.dispatch(Spieler.events.DESTROY);removeEventListeners();if(screen&&!screen.isDestroyed()){screen.destroy();screen=null}if(dispatcher){dispatcher.destroy()}element.innerHTML="";delete instances[upid]};this.isFlashEnabled=function(){return!config.denyFlash&&Spieler.browser.has.flash()};this.changePassiveState=function(newState){if(newState!==state.passive){state.passive=newState;log('Passive state changed to "'+(newState?"passive":"active")+'"');dispatcher.dispatch(Spieler.events.PASSIVESTATECHANGED,state.passive)}};this.laterUpdateConfig=function(configValue,initState){DFP.laterUpdateConfig={};DFP.laterUpdateConfig.configValue=configValue;DFP.laterUpdateConfig.initState=initState};this.getPassiveState=function(){return state.passive};this.playbackRate=function(value){if(value!==undefined&&state.pRate!==value){if(screen&&!screen.isDestroyed()&&self.media.playbackRateChangable()){screen.playbackRate(value)}state.pRate=value}return state.pRate};dispatcher.add(Media.events.PLATFORMCHANGE,onMediaPlatformChange);if(Spieler.browser.is.smartphone&&!Spieler.browser.is.iOS){dispatcher.add(Spieler.events.VOLUMECHANGE,function(eventName,value){if(value>0&&state.muted){self.muted(false)}})}dispatcher.add(Spieler.events.END,function(){hooks.exec("post-clip",{resources:self.media},function(err){if(err){error("post-clip hook failed.",err);return}dispatcher.dispatch(Spieler.events.POSTCLIPDONE)});state.playing=undefined});dispatcher.add(Spieler.events.PAUSED,function(){state.playing=false;if(state.mobileAutoplay&&Spieler.userInteraction&&state.poked){if(Spieler.browser.is.iOS>=10){state.newIosDelayedUnblock=true}else{unblockPlaysinlineState()}}});dispatcher.add(Spieler.events.PLAYING,function(){state.posterClicked=true;state.playing=true});dispatcher.add(Spieler.events.POSTCLIPDONE,function(eventName){if(config.nativeControls||config.basicUi){state.posterClicked=false}if(config.poster&&config.showPosterAtVideoEnd){showPoster();elements.video.load();dispatcher.dispatch(Spieler.events.PAUSE)}state.finishedPlayback=true;state.playing=undefined;if(screen&&!screen.isDestroyed()&&!config.nativeControls){screen.destroy(eventName)}});dispatcher.add(Spieler.events.PLAY,function(eventName,data){state.playing=true;if(state.newIosDelayedUnblock||state.mobileAutoplay&&Spieler.userInteraction&&state.poked){state.newIosDelayedUnblock=undefined;unblockPlaysinlineState()}});dispatcher.add(Spieler.events.PAUSE,function(){if(!state.poking){state.playing=false}});dispatcher.add(Spieler.events.ERROR,function(e,data){if(state.passive&&state.metadataloaded){return}if(self.media!==undefined&&self.media.sources.length>0){log("error loading media, trying next format. Data:",data);if(self.media.qualities()>1){self.quality(self.quality()+1)}else{self.media.sources.shift();loadMedia(self.media.sources).then(function(){if(state.poking){dispatcher.addOnce(Spieler.events.POKINGPROGRESSCHANGE,function(eventName){self.resume()})}else{self.resume()}})}}});dispatcher.add(Spieler.events.GETSIZE,function(eventName,data){log("GETSIZE",data.width,data.height);if(config.autoSize){element.style.width=data.width+"px";element.style.height=data.height+"px"}benchmark.log("Spieler","getSize");info("getSize "+benchmark.measure("Spieler","screen","getSize")+"ms");if(screen instanceof FlashScreen){elements.video.classList.add("hidden")}else if(screen instanceof TagScreen){if(elements.video.classList.contains("hidden")){elements.video.classList.remove("hidden")}}});dispatcher.add(Spieler.events.SCREENDESTROY,function(){if(screen&&screen.isDestroyed()){screen=null}});if(config.plugins.dfp){dispatcher.add("DFP.END",function(eventName,data){if(data.position!==100){backup.restore()}});dispatcher.add("DFP.LOAD",function(eventName,data){if(!backup.hasBackup()&&data.position!==2){backup.remember()}});dispatcher.add("DFP.MIDROLL",function(){backup.remember()})}this.getHlsInstance=function(){return screen&&screen.getHlsInstance?screen.getHlsInstance():undefined};this.elements=elements;this._configOverrides={};this.dispatcher=dispatcher;this.hooks=hooks;this.fullScreen=this.fullscreen;this.touchHandler=function(comment){pokeVideo("touchHandler"+(comment?": "+comment:""))};benchmark.start("Spieler");benchmark.start("Events");if(config.hooks!==undefined){parseHooksFromConfig(config.hooks,hooks)}if(state.playing){checkAutoplayIOS(state);checkAutoplayAndroid(state);if(!config.autoplayHybrid){checkAutoplayDesktop(state)}}if(!element){throw new Error("missing container element")}if(typeof element==="string"){element=document.getElementById(element)}utils.extend(elements,initDOM(element,state));state.volume=setVideoElementVolume(elements.video,state.volume);if(!config.hasOwnProperty("nativeFullscreen")||typeof config.nativeFullscreen==="undefined"){config.nativeFullscreen=Spieler.browser.fs.html5!==true}if(config.nativeFullscreen){nfm=new NativeFullscreenManager(elements.video,dispatcher,!config.nativeControls)}if(config.nativeControls){ncm=new NativeControlsManager(elements.video,dispatcher,this);ncm.enable()}instances[upid]={instance:this,arguments:arguments};addEventListeners();initPlugins(function(){createBasicUI();if(resources&&(config.nativeControls||config.basicUi)){state.posterClicked=false}if(config.poster){showPoster()}if(resources&&state.playing){init(resources).then(finishConstructor)}else{finishConstructor()}warnAboutFlashAndNative()});if(!config.basicUi){dispatcher.add(Spieler.events.FULLSCREEN,function(event,data){if(!data.feedback&&data.enter&&(state.playing&&config.nativeControls||!config.nativeControls)){console.log("Spieler: Entering HTML5 fullscreen");inHTML5FS=data.toggle?!inHTML5FS:true;if(inHTML5FS)elements[Spieler.browser.fs.html5?"view":"video"][Spieler.browser.fs.request]()}});window.document.addEventListener(Spieler.browser.fs.changeEvent,function(){if(inHTML5FS&&!Spieler.browser.fs.isFullscreenElement(elements.view)){inHTML5FS=false;console.log("Spieler: HTML5 fullscreen left by native controls");dispatcher.dispatch(Spieler.events.FULLSCREEN,{enter:false,exit:true,feedback:true})}})}if(Spieler.browser.is.smartphone){document.addEventListener(Spieler.browser.page.visibilityChange,function(){var isHidden=Spieler.browser.page.isHidden;log("[visibilityChange] page is:",isHidden?"hidden":"visible");if(isHidden&&state.playing){dispatcher.dispatch(Spieler.events.PAUSE);log("[visibilityChange] play state changed to:",state.playing)}else{log("[visibilityChange] play state:",state.playing,"- no further changes")}})}Object.defineProperty(this,"_state",{get:function(){return JSON.parse(JSON.stringify(state))},set:DUMMY})};var mainCSS="";mainCSS=".ppMain{position:relative;background-color:#aaa;width:100%;height:100%}.ppUi{pointer-events:none}.ppUi.active{pointer-events:auto}.ppView{position:absolute;width:100%;height:100%;top:0;left:0;background-color:#000}.ppView video{position:absolute;width:100%;height:100%}.ppView video.hidden,.ppView video.seek-hidden{width:1px;height:1px;position:absolute;z-index:-1}.ppView video:-webkit-full-screen{width:100%;height:100%}.ppView video:-moz-full-screen{width:100%;height:100%}.ppView video:-ms-full-screen{width:100%;height:100%}.ppView video:-o-full-screen{width:100%;height:100%}.ppView video:full-screen{width:100%;height:100%}.ppView .backcover,.ppView .ppVideoClick{position:absolute;top:0;left:0;bottom:0;right:0}.ppView .ppVideoClick{cursor:pointer;z-index:10}.ppView .ppVideoClick.hidden{display:none}.ppView .backcover{display:none}.ppView pre{color:red}.ppMain.ad-clickthrough{cursor:pointer}.ppMain.ad-clickthrough .ppVideoClick{display:none}.ppMain .ppAdContainer{position:absolute;top:0;right:0;left:0;bottom:0}.ppMain.ad-playingVideoAds .ppAdContainer{background-color:rgba(0,0,0,1)}.ppMain.ad-customplayback .ppAdContainer{background-color:transparent}.ppMain .ppAdContainer.hidden{display:block!important;visibility:visible!important;z-index:-1000}.ppMain.ad-clickthrough .ppUi{pointer-events:none!important}.ppMain.ad-flash .ppView .backcover{display:block;background:#000}.ppMain.overlay .ppView .ppVideoClick{bottom:100px}.ppMain.nativeOverlay .ppView .ppAdContainer{top:100px;bottom:100px}.ppMain.nativeOverlay .ppView .ppAdContainer>div,.ppMain.overlay .ppView .ppAdContainer>div{bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.ppMain.overlay.vpaid .ppView .ppAdContainer>div{top:0;bottom:0;left:0;right:0;-webkit-transform:none;transform:none}.ppMain.overlay .ppAdContainer video{visibility:hidden}.ppMain.nativeOverlayHidden .ppView .ppAdContainer{top:0;bottom:0}.ppMain.flashblockdetector .fbd-swf{position:absolute;left:0;right:0;z-index:2;width:100%;height:100%}.ppMain.flashblockdetector .fbd-swf.hidden{visibility:hidden;display:block!important}.ppMain.backgroundHack.ad-clickthrough .ppUi{background-color:rgba(0,0,0,0)}body .ppMain ::-webkit-media-controls-play-button{display:none!important}body .ppMain ::-webkit-media-controls-start-playback-button{display:none!important}body .ppMain.nativeControls:not(.basicUi) ::-webkit-media-controls-play-button{display:initial!important}body .ppMain.nativeControls:not(.basicUi) ::-webkit-media-controls-start-playback-button{display:initial!important}body.ie8 .ppMain{width:100%;height:100%}";var buildNumber="Debug";buildNumber="1.51.3 - Darek Zieliński.master.32943d87456";var path="/";if(typeof module!=="undefined"){path="//player.performgroup.com/spieler/releases/"+version+"/"}var script=document.querySelector('script[src*="spieler.js"]');if(script!==null){var index=script.src.indexOf("spieler.js");path=script.src.substr(0,index);path=path.substr(0,path.lastIndexOf("/")+1);var pathWithoutProtocol=path.split("//")[1];if(pathWithoutProtocol.indexOf("/")==pathWithoutProtocol.lastIndexOf("/")){path+="spieler/"}}var events={READY:"READY",PLAY:"PLAY",PLAYING:"PLAYING",PAUSE:"PAUSE",PAUSED:"PAUSED",END:"END",ALMOSTENDED:"ALMOSTENDED",FULLSCREEN:"FULLSCREEN",FULLSCREENERROR:"FULLSCREENERROR",GETSIZE:"GETSIZE",TIMEUPDATE:"TIMEUPDATE",ERROR:"ERROR",DURATIONCHANGE:"DURATIONCHANGE",QUALITY:"QUALITY",UNSUPPORTEDFORMAT:"UNSUPPORTEDFORMAT",VOLUMECHANGE:"VOLUMECHANGE",MUTEDCHANGE:"MUTEDCHANGE",DESTROY:"DESTROY",MEDIACHANGE:"MEDIACHANGE",SCREENDESTROY:"SCREENDESTROY",PASSIVESTATECHANGED:"PASSIVESTATECHANGED",OFFLINE:"OFFLINE",POSTCLIPDONE:"POSTCLIPDONE",THROTTLE:"THROTTLE",POKINGPROGRESSCHANGE:"POKINGPROGRESSCHANGE"};Spieler.events=events;document.addEventListener("Spieler.FlashEvent",function(event){var detail=event.detail;if(instances[detail.upid]){instances[detail.upid].instance.dispatcher.dispatch(detail.event,detail.data)}});Spieler.buildNumber=buildNumber;Spieler.path=path;Spieler.browser=new Browser;Spieler.plugins={dfp:DFP,adBlockDetector:{events:[]}};Spieler.userInteraction=false;var uiTimeout=null;function interactionHandler(){Spieler.userInteraction=true;if(uiTimeout!==null){clearTimeout(uiTimeout)}uiTimeout=setTimeout(function(){Spieler.userInteraction=false;uiTimeout=null},1e3)}if(Spieler.browser.is.smartphone&&!Spieler.browser.is.firefox){window.addEventListener("touchstart",interactionHandler,true)}else if(Spieler.browser.is.desktop&&(Spieler.browser.is.chrome||Spieler.browser.is.safari)){window.addEventListener("mousedown",interactionHandler,true)}else{Spieler.userInteraction=null}Spieler.version=version;return Spieler}(window,version);(function(){"use strict";var P="Spieler FlashBlockDetector: ";var dispatcher=new Dispatcher;var result=null;var events;var PING_EVENT_NAME="Spieler.FlashDetected";Spieler.plugins.flashBlockDetector=function(spieler,elements,config,pluginReady){if(Spieler.browser.is.smartphone||Spieler.browser.is.safari||!Spieler.browser.has.flash()){spieler.hooks.add("pre-init",function(data,callback){spieler.dispatcher.dispatch(events.NOFLASH);callback(null,data)},"flashblockdetector",true);pluginReady();return}var timer;var SWF_URL=Spieler.path+"swf/spieler.detect.swf";var TIMEOUT=5e3;function load(){console.log(P+"loading dummy swf with "+TIMEOUT+"ms timeout");spieler.dispatcher.dispatch(events.WAITING);var fParams={wmode:"transparent",allowscriptaccess:"always"};var fAttrs={class:"fbd-swf"+(!Spieler.browser.is.ie?" hidden":"")};var obj=utils.embedFlash(SWF_URL,fParams,fAttrs);timer=Date.now();elements.ui.appendChild(obj);elements.main.classList.add("flashblockdetector");return obj}function dispatchResult(result){spieler.dispatcher.dispatch(events.FLASHBLOCK,result);spieler.dispatcher.dispatch(result?events.HASFLASHBLOCK:events.NOFLASHBLOCK)}function onPing(){result=false;console.log(P,"we have flash!");dispatchResult(result);cleanup()}function cleanup(){console.log(P+"cleaning up...");document.removeEventListener(PING_EVENT_NAME,onPing);elements.main.classList.remove("flashblockdetector");var t=Date.now()-timer;setTimeout(function(){if(objectElement&&objectElement.parentNode){utils.deleteFlash(objectElement)}else{var element=elements.ui.querySelector(".fbd-swf");if(element&&element.parentNode){element.parentNode.removeChild(element)}}objectElement=null},t<1e3?1e3-t:0)}var objectElement;spieler.hooks.add("pre-init",function(data,callback){var ret=function(){console.log(P+"unblocked playback with denyFlash: "+result);data.configOverrides.denyFlash=result;callback(null,data)};if(result!==null){ret()}else{console.log(P+"delaying playback until flashblock detection is done");spieler.dispatcher.add(events.FLASHBLOCK,ret)}},"flashblockdetector",true);document.addEventListener(PING_EVENT_NAME,onPing);if(result===null){objectElement=load();window.setTimeout(function(){if(result===null){console.log(P+"timeout exceeded. No Flash.");result=true;cleanup();dispatchResult(true)}},TIMEOUT)}else{dispatchResult(result)}pluginReady()};Spieler.plugins.flashBlockDetector.reset=function(){result=null};events=Spieler.plugins.flashBlockDetector.events={NOFLASH:"FLASHBLOCKDETECTOR.NOFLASH",FLASHBLOCK:"FLASHBLOCKDETECTOR.FLASHBLOCK",WAITING:"FLASHBLOCKDETECTOR.WAITING",HASFLASHBLOCK:"FLASHBLOCKDETECTOR.HASFLASHBLOCK",NOFLASHBLOCK:"FLASHBLOCKDETECTOR.NOFLASHBLOCK"}})();"use strict";Spieler.plugins.googleTagManager=function(spieler,elements,config,pluginReady){var dataLayer;if(typeof config==="object"){if(typeof config.dataLayerHandle==="string"){dataLayer=window[config.dataLayerHandle]}else if(typeof config.dataLayerHandle==="object"){dataLayer=config.dataLayerHandle}else{dataLayer=window.dataLayer}}if(!dataLayer){throw new Error("GTM dataLayer global is not available")}var paused=false;var lastSource=null;if(config.events&&config.events.videoLoad){spieler.dispatcher.add(Spieler.events.GETSIZE,function(e,duration){if(!spieler.media){return}if(spieler.media.active()==lastSource){return}else{lastSource=spieler.media.active()}if(!config.trackAds&&spieler.media.metadata&&spieler.media.metadata.advertisement){return}var data={event:"spieler-video-load","spieler-platform":spieler.media.platform()===Media.PLATFORM.HTML5?"HTML5":"Flash","spieler-video-title":spieler.media.metadata?spieler.media.metadata.title:null,"spieler-video-id":spieler.media.metadata?spieler.media.metadata.id:null,"spieler-duration":duration,"spieler-video-type":spieler.media.metadata&&spieler.media.metadata.advertisement?"advertisement":"content"};dataLayer.push(data)})}if(config.events&&config.events.videoEnd){spieler.dispatcher.add(Spieler.events.END,function(){if(!spieler.media){return}if(!config.trackAds&&spieler.media.metadata&&spieler.media.metadata.advertisement){return}dataLayer.push({event:"spieler-video-end"})})}if(config.events&&config.events.videoPause){spieler.dispatcher.add(Spieler.events.PAUSE,function(){if(!spieler.media){return}if(!config.trackAds&&spieler.media.metadata&&spieler.media.metadata.advertisement){return}dataLayer.push({event:"spieler-video-pause"});paused=true})}if(config.events&&config.events.videoResume){spieler.dispatcher.add(Spieler.events.PLAY,function(){if(!spieler.media){return}if(!config.trackAds&&spieler.media.metadata&&spieler.media.metadata.advertisement){return}if(!paused){return}dataLayer.push({event:"spieler-video-resume"})})}if(config.events&&config.events.videoProgress){spieler.dispatcher.add(Spieler.events.TIMEUPDATE,function(e,time){if(!spieler.media){return}if(!config.trackAds&&spieler.media.metadata&&spieler.media.metadata.advertisement){return}var data={event:"spieler-video-progress","spieler-current-time":time};dataLayer.push(data)})}pluginReady()};"use strict";function FlashScreen(element,spieler,media,acceleration){var flashElement;var self=this;var swfPath=Spieler.path+"swf/";var swfFileName="spieler.swf";if(isDebugEnabled){swfFileName="spieler.debug.swf"}if(media.platform()&Media.PLATFORM.FLASHHDCORE){swfFileName="spieler.hdcore.swf"}else if(media.platform()&Media.PLATFORM.FLASHHLS){swfFileName="spieler.hls.swf"}var swfUrl=swfPath+swfFileName;var _lastPassiveState=spieler.getPassiveState();var _destroyed=false;var loadOnRegister=false;var state={acceleration:acceleration!==undefined?acceleration:true,playing:false};this.isDestroyed=function(){return _destroyed};this.currentTime=function(value){return flashElement?flashElement.currentTime(value):0};this.volume=function(value){return flashElement?flashElement.volume(value):0};this.muted=function(value){return flashElement?flashElement.muted(value):0};this.duration=function(){return flashElement?flashElement.getDuration():0};this.abs=function(value){return flashElement?flashElement.abs(value):false};this.quality=function(value){return flashElement?flashElement.getQuality(value):0};this.qualities=function(){return flashElement?flashElement.qualities():0};this.qualityList=function(){return flashElement?flashElement.qualityList():[]};this.acceleration=function(){return state.acceleration};this.playing=function(){return state.playing};this.destroy=function(){_destroyed=true;spieler.dispatcher.remove(Spieler.events.PAUSE,onSpielerPause);spieler.dispatcher.remove(Spieler.events.END,onSpielerEnd);spieler.dispatcher.remove(Spieler.events.DURATIONCHANGE,seekToStart);spieler.dispatcher.remove(Spieler.events.TIMEUPDATE,onTimeupdate);if(flashDiv!==null){if(flashDiv.parentNode){utils.deleteFlash(flashDiv)}flashDiv=null}flashElement=null;if(element&&element.parentNode){element.parentNode.classList.remove("backgroundHack")}spieler.dispatcher.dispatch(Spieler.events.SCREENDESTROY)};this.play=function(){if(!_lastPassiveState&&flashElement){spieler.dispatcher.dispatch(Spieler.events.PLAY);flashElement.playVideo();state.playing=true}};function onSpielerPause(event,data){if(!_lastPassiveState||!data||!data.feedback){flashElement.pauseVideo();state.playing=false}}this.resume=function(){if(!_lastPassiveState)flashElement.playVideo();state.playing=true};this.delayedLoad=function(){if(loadOnRegister){delayedLoad()}loadOnRegister=true};function onSpielerEnd(event,data){if(!_lastPassiveState||!data||!data.feedback){self.destroy()}}function delayedLoad(){console.log("FlashScreen.delayedLoad()");scheduleSeek();if(!media||!media.active())return;flashElement.load(media.active(),spieler.volume(),spieler.muted());if(!spieler.playing()){onSpielerPause()}spieler.dispatcher.add(Spieler.events.PAUSE,onSpielerPause);spieler.dispatcher.add(Spieler.events.END,onSpielerEnd);spieler.dispatcher.add(Spieler.events.TIMEUPDATE,onTimeupdate)}var seekScheduled=false;function scheduleSeek(){if(seekScheduled||!flashElement){return}if(media&&media.metadata&&media.metadata.clip){spieler.dispatcher.addOnce(Spieler.events.DURATIONCHANGE,seekToStart);seekScheduled=true}}function seekToStart(){if(flashElement){flashElement.currentTime(media.metadata.clip.start)}seekScheduled=false}function onTimeupdate(){if(flashElement&&media.metadata.clip){if(flashElement.currentTime(null)>=media.metadata.clip.stop){spieler.pause();spieler.dispatcher.remove(Spieler.events.TIMEUPDATE,onTimeupdate);self.destroy();spieler.dispatcher.dispatch(Spieler.events.END)}}}spieler.dispatcher.addOnce(FlashScreen.events.REGISTER,function(eventName,buildNumber){flashElement=document.getElementById(spieler.upid());Spieler.flash={buildNumber:buildNumber};if(loadOnRegister){setTimeout(delayedLoad,10)}loadOnRegister=true});spieler.dispatcher.addOnce(Spieler.events.MEDIACHANGE,function(){self.destroy()});spieler.dispatcher.add(Spieler.events.PASSIVESTATECHANGED,function(eventName,newState){_lastPassiveState=newState});var params={bgcolor:"#000000",wmode:"opaque",allowfullscreen:true,allowscriptaccess:"always",flashvars:"upid="+spieler.upid()+"&acceleration="+state.acceleration};var attrs={width:"100%",height:"100%",id:spieler.upid()};var flashDiv=document.createElement("div");flashDiv.setAttribute("style","width:100%;height:100%;background-color:#000");flashDiv.appendChild(utils.embedFlash(swfUrl,params,attrs));var adsContainer=element.getElementsByClassName("ppAdContainer")[0];if(adsContainer){element.insertBefore(flashDiv,adsContainer)}else{element.appendChild(flashDiv)}if(Spieler.browser.is.ie&&Spieler.browser.is.ie<=10){element.parentNode.classList.add("backgroundHack")}}FlashScreen.events={REGISTER:"REGISTER",BITRATECHANGE:"BITRATECHANGE"};function TagScreen(element,spieler,media,state){"use strict";var hlsInstance;var videoElement=element.querySelector("video");var currentTime=0;var currentMedia;var errorMap={};errorMap[MediaError.MEDIA_ERR_ABORTED]="VIDEO_ERROR_ABORTED";errorMap[MediaError.MEDIA_ERR_NETWORK]="VIDEO_ERROR_NETWORK";errorMap[MediaError.MEDIA_ERR_DECODE]="VIDEO_ERROR_DECODE";errorMap[MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]="VIDEO_ERROR_SRC_NOT_SUPPORTED";var getsizeSent=false;var endSent=false;var waitingForReload=false;var seekScheduled=false;var lastPassiveState=spieler.getPassiveState();var destroyed=false;var ended=false;var metaDataSent=false;var recoverAttempts=3;var initHLS=function(source){return new Promise(function(resolve,reject){recoverAttempts=3;hlsInstance=new Hls({autoStartLoad:false,startLevel:-1,debug:isHlsJsDebugEnabled,xhrSetup:function(xhr,url){xhr.withCredentials=true}});hlsInstance.attachMedia(videoElement);var isMediaAttached=false;hlsInstance.on(Hls.Events.MEDIA_ATTACHED,function(){hlsInstance.loadSource(source);isMediaAttached=true});hlsInstance.on(Hls.Events.MANIFEST_PARSED,function(){if(isMediaAttached){hlsInstance.autoLevelCapping=hlsInstance.levels.length-1;hlsInstance.startLoad();resolve()}});hlsInstance.on(Hls.Events.ERROR,function(event,data){if(data&&data.fatal){if(recoverAttempts>0){recoverAttempts--;switch(data.type){case Hls.ErrorTypes.NETWORK_ERROR:recoverAttempts=0;spieler.dispatcher.dispatch(Spieler.events.ERROR,{hlsjs:data});reject({message:"HLSJS: fatal network error, won't recover",data:data});break;case Hls.ErrorTypes.MEDIA_ERROR:console.info("HLSJS: trying to recover fatal media error",data.details);hlsInstance.recoverMediaError();break;default:recoverAttempts=0;spieler.dispatcher.dispatch(Spieler.events.ERROR,{hlsjs:data});reject({message:"HLSJS: other fatal media error encountered, cannot recover",data:data});break}}else{spieler.dispatcher.dispatch(Spieler.events.ERROR,{hlsjs:data});reject({message:"HLSJS: could not recover after maximum number of attempts",data:data})}}else{console.info("HLSJS: non-fatal error occurred",data.details)}})})};function setVideoSource(videoElement,media){return new Promise(function(resolve,reject){var source=media.active().url;if(media.platform()&Media.PLATFORM.HLSJS){if(window.Hls===undefined){window.Hls=null;var hlsjsLoaded=function(){console.log("loaded hls.min.js");initHLS(source).then(resolve).catch(function(reason){console.error(reason.message,reason.data)})};var hlsjsLoadingError=function(){console.error("failed to load hls.min.js")};if(typeof module!=="undefined"){window.Hls=require("./lib/hls.min.js");hlsjsLoaded()}else{dom.addScript(Spieler.path+"lib/hls.min.js",hlsjsLoaded,hlsjsLoadingError)}}else if(window.Hls!==null){initHLS(source).then(resolve).catch(function(reason){console.error(reason.message,reason.data)})}}else{videoElement.src=source;resolve()}})}function onTimeupdate(){if(state.passive||utils.isEmptyVideo(videoElement)){return}currentTime=videoElement.currentTime;if(spieler.playState==="paused"&&!videoElement.paused){console.warn("TagScreen: playState is out of sync!")}if(spieler.playState==="playing"){spieler.dispatcher.dispatch(Spieler.events.TIMEUPDATE,currentTime)}if(videoElement.duration>3&&currentTime>videoElement.duration-3||currentTime>videoElement.duration*.8){spieler.dispatcher.dispatch(Spieler.events.ALMOSTENDED,currentTime)}if(currentMedia.metadata.clip){if(currentTime>=currentMedia.metadata.clip.stop){spieler.pause();onEnded()}}}function onDurationchange(e){if(waitingForReload){return false}if(!utils.isEmptyVideo(e.target)){spieler.dispatcher.dispatch(Spieler.events.DURATIONCHANGE,videoElement.duration)}}function onError(e){if(!utils.isEmptyVideo(e.target)){if(e.target.error){var error=errorMap[e.target.error.code]||"VIDEO_ERROR_UNKNOWN";spieler.dispatcher.dispatch(Spieler.events.ERROR,error)}else if(e.details instanceof Error){console.error("TagScreen: "+e.details.name+", "+e.details.message)}else{console.error("TagScreen: an unspecified error occured on the video element")}}}function onLoadedmeta(){state.metadataloaded=true;if(state.passive||utils.isEmptyVideo(videoElement)){return}if(waitingForReload){waitingForReload=false;return}if(videoElement.videoWidth&&videoElement.videoHeight&&!metaDataSent){metaDataSent=true;spieler.dispatcher.dispatch(Spieler.events.GETSIZE,{width:videoElement.videoWidth,height:videoElement.videoHeight});getsizeSent=true}}function onPlaying(){function _continueOnPlaying(){endSent=false;if(state.passive||utils.isEmptyVideo(videoElement)){return}if(!getsizeSent){spieler.dispatcher.dispatch(Spieler.events.GETSIZE,{width:videoElement.videoWidth,height:videoElement.videoHeight});getsizeSent=true}if(Spieler.browser.is.ie){videoElement.playbackRate=state.pRate}spieler.dispatcher.dispatch(Spieler.events.PLAYING)}if(!state.poking){_continueOnPlaying()}else{spieler.dispatcher.addOnce(Spieler.events.POKINGPROGRESSCHANGE,_continueOnPlaying)}}function onPausing(){if(state.passive){return}spieler.dispatcher.dispatch(Spieler.events.PAUSED)}function onContextMenu(evt){evt.stopImmediatePropagation();evt.preventDefault()}function onEnded(event){console.log("TagScreen: Ended with event: ",event);metaDataSent=false;if(state.passive||utils.isEmptyVideo(videoElement)){return}if(!endSent){spieler.dispatcher.dispatch(Spieler.events.END);endSent=true;utils.resetVideoElement(videoElement);if(hlsInstance){hlsInstance.destroy();hlsInstance=null}}}function scheduleSeek(){if(!seekScheduled&&videoElement&&currentMedia&&currentMedia.metadata&&currentMedia.metadata.clip){console.log("scheduleSeek");spieler.dispatcher.addOnce(Spieler.events.DURATIONCHANGE,seekToStart);seekScheduled=true}}function seekToStart(){seekScheduled=false;if(currentMedia.metadata&&currentMedia.metadata.clip&&currentMedia.metadata.clip.start){var targetTime=currentMedia.metadata.clip.start||0;console.log("seekToStart",targetTime);videoElement.currentTime=targetTime}}function onVolumeChange(e){if(state.passive||utils.isEmptyVideo(videoElement)){return}spieler.volume(videoElement.volume);spieler.muted(videoElement.muted)}function onSpielerPAUSE(event,data){if(!state.passive||!data||!data.feedback){videoElement.pause()}}function onSpielerMEDIACHANGE(){utils.resetVideoElement(videoElement);if(hlsInstance){hlsInstance.destroy();hlsInstance=null}}function onSpielerPASSIVESTATECHANGED(eventName,newState){if(lastPassiveState!==newState){lastPassiveState=newState;if(lastPassiveState){metaDataSent=false}}}function onSpielerPOSTCLIPDONE(){waitingForReload=true;dom.prop(videoElement,"autoplay",false)}function onSpielerDURATIONCHANGE(){ended=false}function onSpielerEND(){ended=true}function promisePlay(){console.log("TagScreen: promisePlay()");var playPromise=videoElement.play();if(playPromise===undefined){return Promise.resolve()}playPromise.then(function(){console.log("TagScreen: playbackStarted")}).catch(function(error){if(error.name==="AbortError"){return}state.playing=undefined;onError({target:videoElement,details:error});spieler.dispatcher.dispatch(Spieler.events.PAUSE)});return playPromise}this.enableNativeControls=function(){videoElement.controls=true;nativeCallbacks(true)};this.isDestroyed=function(){return destroyed};this.currentTime=function(value){if(value!==undefined){videoElement.currentTime=value}return currentTime};this.volume=function(value){if(value!==undefined){if(value<0){value=0}else if(value>1){value=1}videoElement.volume=value}return videoElement.volume};this.muted=function(value){if(value!==undefined){dom.prop(videoElement,"muted",value)}return videoElement.muted};this.buffered=function(){return videoElement.buffered.length?videoElement.buffered.end(0):0};this.duration=function(){return videoElement.duration};this.abs=function(){return hlsInstance?true:false};this.quality=function(value){return hlsInstance?-1:currentMedia.quality(value)};this.qualityList=function(){return hlsInstance?[]:currentMedia.qualityList()};this.qualities=function(){return hlsInstance?0:currentMedia.qualities()};this.destroy=function(eventName){destroyed=true;state.metadataloaded=undefined;if(eventName==="POSTCLIPDONE"){onSpielerPOSTCLIPDONE()}spieler.dispatcher.remove(Spieler.events.PAUSE,onSpielerPAUSE);spieler.dispatcher.remove(Spieler.events.MEDIACHANGE,onSpielerMEDIACHANGE);spieler.dispatcher.remove(Spieler.events.POSTCLIPDONE,onSpielerPOSTCLIPDONE);var events={timeupdate:[onTimeupdate],durationchange:[onDurationchange,seekToStart],error:[onError],loadedmetadata:[onLoadedmeta],playing:[onPlaying],pause:[onPausing],ended:[onEnded],volumechange:[onVolumeChange],contextmenu:[onContextMenu]};Object.keys(events).forEach(function(name){events[name].forEach(function(handler){videoElement.removeEventListener(name,handler);videoElement.removeEventListener(name,handler,true)})});if(hlsInstance){hlsInstance.destroy();hlsInstance=null}videoElement.pause();videoElement.removeAttribute("src");videoElement.load()};this.changeSource=function(media){currentMedia=media;return setVideoSource(videoElement,media).then(function(){scheduleSeek();getsizeSent=false;metaDataSent=false;endSent=false})};this.getHlsInstance=function(){return hlsInstance?hlsInstance:undefined};this.play=function(){if(!state.passive){return promisePlay().then(function(){spieler.dispatcher.dispatch(Spieler.events.PLAY)})}else{spieler.dispatcher.dispatch(Spieler.events.PLAY);return Promise.resolve()}};this.resume=function(){if(!state.passive){return promisePlay()}};this.autoplay=function(newValue){return dom.prop(videoElement,"autoplay",newValue)};this.playbackRate=function(value){videoElement.playbackRate=value};this.prepare=function(){if(media){console.log("TagScreen: constructing, have media");return this.changeSource(media)}else{console.log("TagScreen: constructing, without media");utils.resetVideoElement(videoElement);return Promise.reject()}};this.muted(spieler.muted());this.playbackRate(state.pRate);state.volume=this.volume(state.volume);state.metadataloaded=false;videoElement.addEventListener("timeupdate",onTimeupdate);videoElement.addEventListener("durationchange",onDurationchange);videoElement.addEventListener("error",onError,true);videoElement.addEventListener("loadedmetadata",onLoadedmeta);videoElement.addEventListener("playing",onPlaying);videoElement.addEventListener("pause",onPausing);videoElement.addEventListener("volumechange",onVolumeChange);videoElement.addEventListener("contextmenu",onContextMenu);videoElement.addEventListener("ended",onEnded);spieler.dispatcher.add(Spieler.events.PAUSE,onSpielerPAUSE);spieler.dispatcher.add(Spieler.events.MEDIACHANGE,onSpielerMEDIACHANGE);spieler.dispatcher.add(Spieler.events.POSTCLIPDONE,onSpielerPOSTCLIPDONE)}"use strict";function Benchmark(){var LOG_PREFIX="Benchmark:";var log=console.log.bind(console,LOG_PREFIX);var info=console.info.bind(console,LOG_PREFIX);var error=console.error.bind(console,LOG_PREFIX);var warn=console.warn.bind(console,LOG_PREFIX);this.data={};function newBenchData(){return{logs:[],getLogs:function(){return this.logs.map(function(val){return val.sinceStart+"ms : [ "+val.name+" ] "+val.message+" ("+val.sinceLast+"ms)"})},total:0,started:false,finished:false,startTime:0,endTime:0,previousLogTime:0}}this.start=function(type,name,message){if(!this.data[type]){this.data[type]=newBenchData()}else{info("`"+type+"` was already started -> resetting.")}this.data[type].started=true;this.data[type].previousLogTime=this.data[type].startTime=Date.now();this.log(type,name||"start",message)};this.log=function(type,name,message){var entry=this.data[type];if(entry&&!entry.finished){var now=Date.now();entry.logs.push({name:name||"log"+entry.logs.length,message:message||"",sinceStart:now-entry.startTime,sinceLast:now-entry.previousLogTime,timestamp:now,type:type});entry.previousLogTime=now}else{info("`"+type+"` was not started, canceling log.")}};this.finish=function(type,name,message){var entry=this.data[type];if(entry&&!entry.finished){this.log(type,name||"finish",message);entry.finished=true;entry.endTime=Date.now();entry.total=entry.endTime-entry.startTime}};this.getResults=function(type){var _data=this.data;return type?{logs:this.data[type].getLogs(),finished:this.data[type].finished,total:this.data[type].total}:Object.keys(this.data).reduce(function(acc,val){acc[val]={logs:_data[val].getLogs(),finished:_data[val].finished,total:_data[val].total};return acc},{})};this.has=function(type,name){try{return!!this.data[type].logs.find(function(element){return element.name===name},this)}catch(e){return false}};this.measure=function(var_args){var type1=arguments[0],log1=arguments[1],type2,log2,time1,time2;if(arguments.length===3){log2=arguments[2];try{var arr=this.data[type1].logs.slice().reverse();time1=arr.find(function(element){return element.name===log1},this).timestamp;time2=arr.find(function(element){return element.name===log2},this).timestamp}catch(e){info("measure(), can't find one of those: "+log1+"="+time1+", "+log2+"="+time2)}return time2-time1}else if(arguments.length===4){type2=arguments[2];log2=arguments[3];try{time1=this.data[type1].logs.slice().reverse().find(function(element){return element.name===log1},this).timestamp;time2=this.data[type2].logs.slice().reverse().find(function(element){return element.name===log2},this).timestamp}catch(e){info("measure(), can't find one of those: "+log1+"="+time1+", "+log2+"="+time2)}return time2-time1}else{info("measure(), incorrect number of arguments.")}};this.combine=function(var_args){return var_args?[].slice.call(arguments).map(function(element){if(this.data[element]&&this.data[element].logs){return this.data[element].logs.slice()}else{info("combine(), "+element+" benchmark doesn't exist")}},this).reduce(function(prev,curr,idx,array){return prev.concat(curr)},[]).sort(function(a,b){return a.timestamp-b.timestamp}).map(function(el,index,array){return{log:el.timestamp+": [ "+el.type+"/"+el.name+" ] "+el.message,sinceLast:array[index-1]?el.timestamp-array[index-1].timestamp:0}}):[]}}var benchmark=isBenchmarkEnabled?new Benchmark:{data:DUMMY,start:DUMMY,log:DUMMY,finish:DUMMY,getResults:DUMMY,measure:DUMMY,combine:DUMMY};Spieler.benchmark=benchmark;function Browser(){"use strict";function isInUserAgent(txt){return navigator.userAgent.indexOf(txt)!==-1}function getIEVersion(){if(isInUserAgent("MSIE")){return parseInt(navigator.userAgent.match(/MSIE (\d+)/)[1])}else if(isInUserAgent("Trident/")){return parseInt(navigator.userAgent.match(/rv:(\d+)/)[1])}else{return false}}function getIOSVersion(){if(isInUserAgent("iPhone")||isInUserAgent("iPad")){var raw=navigator.userAgent.match(/OS (\d+)_/);if(raw!==null&&raw.length>=2){return+raw[1]}}return false}function getChromeVersion(){var version=false;if(isInUserAgent("Chrome")&&!isInUserAgent("Edge/")&&!isInUserAgent("OPR")&&!isInUserAgent("Opera")){var matches=navigator.userAgent.match(/Chrome\/(\d+)/);if(matches!==null){version=parseInt(matches[1])}}return version}this.is={firefox:isInUserAgent("Firefox"),chrome:getChromeVersion(),opera:isInUserAgent("Opera")||isInUserAgent("OPR"),iosWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)||isInUserAgent("CriOS"),android:isInUserAgent("Android"),ie:getIEVersion(),edge:isInUserAgent("Edge/"),iPad:isInUserAgent("iPad"),iPhone:isInUserAgent("iPhone"),iOS:getIOSVersion(),OSX:isInUserAgent("Macintosh"),desktopSafari:isInUserAgent("Macintosh")&&isInUserAgent("Safari")&&!isInUserAgent("Chrome"),smartphone:isInUserAgent("Android")||isInUserAgent("iPad")||isInUserAgent("iPhone")||isInUserAgent("Windows Phone")||isInUserAgent("Mobile"),safari:false,desktop:!(isInUserAgent("Android")||isInUserAgent("iPad")||isInUserAgent("iPhone")||isInUserAgent("Windows Phone")||isInUserAgent("Mobile"))};if(!(this.is.firefox||this.is.chrome||this.is.opera)&&isInUserAgent("Safari")){this.is.safari=true}else if(this.is.android){var version=navigator.userAgent.match(/Android\s([0-9\.]*)/);if(!version&&this.is.firefox){version="2.3"}else if(version){version=version[1]}if(version&&version.length>=2){this.is.android=version.split(".");for(var i=0;i<this.is.android.length;i++){this.is.android[i]=+this.is.android[i]}if(this.is.android.length<3){this.is.android[2]=0}}}else if(this.is.chrome&&this.is.ie){this.is.chrome=false}this.sizeClass={toString:function(){return this.value}};(function updateSize(){var sizeBreakpoints={xs:0,sm:768,md:992,lg:1200};var key;var last;var size=window.screen.width;if(this.is.smartphone&&window.screen.width>window.screen.height){size=window.screen.height}for(key in sizeBreakpoints){if(size>=sizeBreakpoints[key]){if(last){this.sizeClass[last]=false}this.sizeClass[key]=true;this.sizeClass.value=key;last=key}else{this.sizeClass[key]=false}}this.sizeClass.phone=this.sizeClass.xs;this.sizeClass.tablet=this.sizeClass.sm;this.sizeClass.desktop=this.sizeClass.md||this.sizeClass.lg}).apply(this);this.supports={fullScreen:document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitRequestFullScreen,localStorage:isLocalStorageSupported,html5:{video:!!document.createElement("video").canPlayType},css3:{transitions:function(){var keys=[];for(var key in document.createElement("div").style){if(/transition/i.test(key)){keys.push(key)}}return keys.length>0}()}};var cached={};this.has={};cached.has={};this.has.flash=function(){if(cached.has.flash===null){cached.has.flash=false;try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){cached.has.flash=true}}catch(e){var mime="application/x-shockwave-flash";var mimes=navigator.mimeTypes;if(mimes&&mimes[mime]&&mimes[mime].enabledPlugin){cached.has.flash=true}}}return cached.has.flash};cached.has.flash=null;this.fs={};if(typeof HTMLElement==="undefined"){HTMLElement={prototype:{}}}else if(typeof HTMLElement.prototype==="undefined"){HTMLElement.prototype={}}var p;if(window.HTMLDocument!==undefined){p=HTMLDocument.prototype}else{p=Document.prototype}this.fs.changeEvent="onmozfullscreenchange"in p?"mozfullscreenchange":"onwebkitfullscreenchange"in p?"webkitfullscreenchange":"onmsfullscreenchange"in p?"MSFullscreenChange":"onfullscreenchange"in p?"fullscreenchange":null;this.fs.nativeChangeEvents=["webkitbeginfullscreen","webkitendfullscreen"];p=HTMLElement.prototype;this.fs.request="mozRequestFullScreen"in p?"mozRequestFullScreen":"webkitRequestFullscreen"in p?"webkitRequestFullscreen":"msRequestFullscreen"in p?"msRequestFullscreen":"requestFullscreen"in p?"requestFullscreen":"webkitEnterFullscreen"in HTMLVideoElement.prototype?"webkitEnterFullscreen":null;if(window.HTMLDocument!==undefined){p=HTMLDocument.prototype}else{p=Document.prototype}this.fs.exit="mozCancelFullScreen"in p?"mozCancelFullScreen":"webkitExitFullscreen"in p?"webkitExitFullscreen":"msExitFullscreen"in p?"msExitFullscreen":"exitFullscreen"in p?"exitFullscreen":null;this.fs.exitNative="webkitExitFullscreen"in HTMLVideoElement.prototype?"webkitExitFullscreen":null;this.fs.html5=!!this.fs.exit;this.fs.native=this.fs.html5||!!this.fs.exitNative;if((this.is.ie===false||this.is.ie>8)&&typeof Object.defineProperty!=="undefined"){Object.defineProperty(this,"fullscreenElement",{get:function(){return this.fs.fullscreenElement}});Object.defineProperty(this.fs,"fullscreenElement",{get:function getFullscreenElement(){var keys=["fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement"];var fullscreenKey=keys.find(function(key){return document[key]!==undefined});return fullscreenKey===undefined?undefined:document[fullscreenKey]}});Object.defineProperty(this.fs,"fullscreenEnabled",{get:function getFullscreenElement(){var keys=["webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","fullscreenEnabled"];var fullscreenKey=keys.find(function(key){return document[key]!==undefined});return fullscreenKey===undefined?undefined:document[fullscreenKey]}})}this.fs.isFullscreenElement=function(element){if(element){return this.fullscreenElement!==undefined?this.fullscreenElement===element:element.webkitDisplayingFullscreen}};this.isFullscreenElement=this.fs.isFullscreenElement.bind(this.fs);this.supportsHlsJs=function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')};this.page={};Object.defineProperty(this.page,"isHidden",{get:function(){return typeof document.webkitHidden!=="undefined"?document.webkitHidden:typeof document.msHidden!=="undefined"?document.msHidden:document.hidden}});Object.defineProperty(this.page,"visibilityChange",{get:function(){if(typeof document.hidden!=="undefined"){return"visibilitychange"}else if(typeof document.msHidden!=="undefined"){return"msvisibilitychange"}else if(typeof document.webkitHidden!=="undefined"){return"webkitvisibilitychange"}}})}"use strict";function Dispatcher(){Reactor.apply(this,arguments);var self=this;var wrappers={};var onceWrappers={};var _add=self.addEventListener;var _remove=self.removeEventListener;var _dispatch=self.dispatchEvent;function getWrapper(handlerFunc){return function(evtObj){handlerFunc(evtObj.type,evtObj.detail)}}function registerHandler(eventName,handlerFunc,wrapperFunc,isOnce){var dictionary=isOnce===true?onceWrappers:wrappers;if(dictionary[eventName]===undefined){dictionary[eventName]=[]}var found=false;var i=0,len=dictionary[eventName].length;for(i;i<len;i++){if(dictionary[eventName][i].original===handlerFunc){found=true;break}}if(found===false){dictionary[eventName].push({wrapper:wrapperFunc,original:handlerFunc});return true}return false}function deleteHandler(eventName,handlerFunc,isOnce){var dict=isOnce===true?onceWrappers:wrappers;var found=false;if(dict[eventName]!==undefined){var len=dict[eventName].length;for(var i=0;i<len;i++){if(dict[eventName][i].original===handlerFunc){dict[eventName].splice(i,1);found=true;break}}}return found}this.add=function(eventName,handlerFunc,addOnce){if(eventName===undefined||handlerFunc===undefined){throw new Error("Dispatcher: Missing parameter")}if(typeof handlerFunc!=="function"){throw new Error("Dispatcher: handlerFunc is not an executable function")}function onceWrapperFunc(evtObj){if(deleteHandler(eventName,handlerFunc,true)){_remove(eventName,onceWrapperFunc)}handlerFunc(evtObj.type,evtObj.detail)}if(addOnce===true){if(registerHandler(eventName,handlerFunc,onceWrapperFunc,true)){_add(eventName,onceWrapperFunc)}return}var wrapperFunc=getWrapper(handlerFunc);if(registerHandler(eventName,handlerFunc,wrapperFunc,false)){_add(eventName,wrapperFunc)}};function findWrapperByHandler(dictionary,eventName,handlerFunc){if(!Array.isArray(dictionary[eventName])){return undefined}var record=dictionary[eventName].find(function(record){return record.original===handlerFunc});return record?record.wrapper:undefined}this.remove=function(eventName,handlerFunc){var wrapperFunc=findWrapperByHandler(wrappers,eventName,handlerFunc);if(wrapperFunc){deleteHandler(eventName,handlerFunc,false);_remove(eventName,wrapperFunc)}else{console.warn("Dispatcher: given handler is not registered for "+eventName+", so couldn't be removed")}};this.dispatch=function(eventName,data){benchmark.log("Events",eventName);var evt=new CustomEvent(eventName,{detail:data});_dispatch(evt)};function clearEvents(dictionary){var key,i,len,arr;for(key in dictionary){if(dictionary[key].length!==undefined){arr=dictionary[key];len=arr.length;i=0;for(i;i<len;i++){_remove(key,arr[i].wrapper)}dictionary[key]=null;delete dictionary[key]}}}this.destroy=function(){clearEvents(wrappers);clearEvents(onceWrappers)};this.addOnce=function(eventName,handlerFunc){this.add(eventName,handlerFunc,true)}}Dispatcher.prototype=Object.create(Reactor.prototype);"use strict";var Analytics;(function(){var GA="ga";var LOG_PREFIX="Spieler Analytics:";var log=console.log.bind(console,LOG_PREFIX);var info=console.info.bind(console,LOG_PREFIX);var error=console.error.bind(console,LOG_PREFIX);var warn=console.warn.bind(console,LOG_PREFIX);window.GoogleAnalyticsObject=GA;window[GA]||(window[GA]=function(){(window[GA].q=window[GA].q||[]).push(arguments)});window[GA].l=(new Date).getTime();dom.addScript("//www.google-analytics.com/analytics.js");window[GA]("create","UA-50238272-3","auto","spieler");Analytics={event:function(category,action,label,custom){log(Array.prototype.slice.call(arguments).join(" / "));custom&&Object.keys(custom).forEach(function(key){custom[key]=utils.safeToString(custom[key])});window[GA]("spieler.send","event",category,action,label,custom)}}})();"use strict";function HookManager(){this._hooks={};this._stack=[]}(function(){HookManager.prototype={add:function(hook,func,name,prepend){var handler;if(this._stack.indexOf(hook)!==-1){throw new Error("refusing to add a function to a currently running hook")}if(this._hooks[hook]===undefined){this._hooks[hook]=[]}handler={func:func,name:name};if(prepend)this._hooks[hook].unshift(handler);else this._hooks[hook].push(handler);console.log("Spieler HookManager: added "+hook+"/"+name);return this},remove:function(hook,func,name){if(typeof func==="string"){name=func;func=null}var hookArray=this._hooks[hook];var removed;if(!hookArray){console.warn("Spieler HookManager: could not find hook "+hook);return}for(var i=0;i<hookArray.length;i++){if(hookArray[i]===null)continue;if(func&&hookArray[i].func===func||name&&hookArray[i].name===name){hookArray[i]=null;removed=true;break}}if(removed){console.log("Spieler HookManager: removed "+hook+"/"+name)}else{console.warn("Spieler Hookmanager: could not remove "+hook+"/"+name)}return this},exec:function(hook,data,callback){console.log("Spieler HookManager: executing hook "+hook);var hookArray=this._hooks[hook];if(!callback){callback=function(){}}if(!hookArray||!hookArray.length){callback(null);return this}var hookIndex=-1;var lastName;var self=this;this._stack.push(hook);function callNext(err,result){hookIndex++;if(err){console.error("Spieler HookManager: function failed "+hook+"/"+lastName);callback(err);return}else if(hookIndex>=hookArray.length){for(var i=0;i<hookArray.length;i++){if(!hookArray[i]){hookArray.splice(i,1)}}self._stack.pop();console.log("Spieler HookManager: hook finished: "+hook);callback(null,result)}else{if(!hookArray[hookIndex]){callNext(null,result);return}lastName=hookArray[hookIndex].name;console.log("Spieler HookManager: executing function "+hook+"/"+lastName);try{hookArray[hookIndex].func(result,callNext)}catch(caughtError){console.error("Spieler HookManager: function failed "+hook+"/"+lastName);callback(caughtError);return}}}callNext(null,data);return this},isEnabled:function(hookName){return this._hooks[hookName]!==undefined&&this._hooks[hookName].length>0}}})();"use strict";function versionToArray(rawVersion){return typeof rawVersion=="string"?rawVersion.split(".").map(toInt):rawVersion}function versionToInt(rawVersion){return versionToArray(rawVersion).map(function(current,index,all){return current<<8*(all.length-index-1)}).reduce(sum)}function getFormatFromUrl(url,formats){var regex=new RegExp("(?:^|\\.)("+Object.keys(formats).join("|")+")(?:\\?|#|$|:)","i");var matches=url.match(regex);return matches!==null?matches[1]:null}function Media(denyFlash,dispatcher,onready){var self=this;var formats={};var list=[];var original;var activeSource=-1;var activeQuality=0;var hasFlash=denyFlash||Spieler.browser.is.safari?0:Spieler.browser.has.flash();var androidHLSSupportsVOD;var androidHLSSupportsLive;var androidVersion;var isValidResource=function(value){return value.hasOwnProperty("url")||isString(value)};var isString=function(value){return typeof value==="string"&&!!value.length};this.metadata=null;this.sources=list;this.formats=formats;function ready(){Object.assign(formats,{m3u8:{platform:HTML5HLS|HLSJS|FLASHHLS,mimeType:"application/vnd.apple.mpegURL",overrideCanplaytype:true,abs:true,mbs:FLASHHLS>0,playbackRateChangable:(HTML5HLS|HLSJS)>0},rtmp:{platform:FLASH,mbs:false,abs:false,playbackRateChangable:false},flv:{platform:FLASH,mbs:false,abs:false,playbackRateChangable:false},akamaihd:{platform:FLASHHDCORE,abs:true,playbackRateChangable:false},smil:{platform:FLASHHDCORE,abs:true,playbackRateChangable:false},mp4:{platform:HTML5||FLASH,mbs:true,playbackRateChangable:HTML5>0},webm:{platform:HTML5,abs:false,mbs:false,playbackRateChangable:false},f4m:{platform:FLASHHDCORE,abs:true,mbs:false,playbackRateChangable:false},mp3:{platform:HTML5,playbackRateChangable:false},wav:{platform:HTML5,playbackRateChangable:false}});onready(self)}this.load=function(res){if(res instanceof Media){res=res.getOriginalResource();list=[]}if(Array.isArray(res)){original=utils.extend(true,[],res);res=utils.extend(true,[],res)}else if(typeof res==="object"&&res!==null){original=utils.extend(true,{},res);res=utils.extend(true,{},res)}else if(typeof res==="string"){original=res.slice(0);res=res.slice(0)}else{original=res}this.metadata=Object.assign({},res.metadata||{});if(typeof res==="string"){res=[[res]]}else if(typeof res==="object"&&!res.length){var temp=[];if(res.url&&res.streamName){temp.push([res])}else{for(var f2 in res){if(formats[f2]){if(typeof res[f2]==="string"){temp.push([res[f2]])}else if(Array.isArray(res[f2])){temp.push(res[f2])}else{continue}temp[temp.length-1].format=f2}}}res=temp}res=res.map(function(value){return(Array.isArray(value)?value:[value]).filter(isValidResource)}).filter(function(value){return value.length});var initialResourcesLength=res.length;for(var f=0;f<res.length;f++){for(var q=0;q<res[f].length;q++){if(typeof res[f]==="string"){res[f]=[res[f]]}if(typeof res[f][q]==="string"){res[f][q]={url:res[f][q]}}else if(Array.isArray(res[f][q])||typeof res[f][q]==="object"&&!res[f][q].url){res[f].splice(q--,1)}}if(!res[f].format&&res[f].length){res[f].format=getFormatFromUrl(res[f][0].url,formats)}if(!formats[res[f].format]||!res[f].length){console.log("SpielerMedia: dropping unknown format (not defined in `formats`): "+res[c].format);res.splice(f--,1)}}var videoElement;var audioElement;var format;for(var c=0;c<res.length;c++){format=res[c].format;if(FLASH&&formats[format].platform&FLASH){res[c].platform=FLASH;list.push(res[c])}else if(FLASH&&formats[format].platform&FLASHHDCORE){res[c].platform=FLASHHDCORE;list.push(res[c])}else if(formats[format].platform&HLSJS){if(!videoElement){videoElement=document.createElement("video")}res[c].platform=HLSJS;list.push(res[c])}else if(FLASH&&formats[format].platform&FLASHHLS){res[c].platform=FLASHHLS;list.push(res[c])}else if(formats[format].platform&HTML5){if(!videoElement){videoElement=document.createElement("video")}if(!audioElement){audioElement=document.createElement("audio")}if(videoElement.canPlayType&&videoElement.canPlayType(formats[format].mimeType||"video/"+format)||formats[format].overrideCanplaytype){res[c].platform=HTML5;list.push(res[c])}else if(audioElement.canPlayType&&audioElement.canPlayType(formats[format].mimeType||"audio/"+format)||formats[format].overrideCanplaytype){res[c].platform=HTML5;list.push(res[c])}else{console.log("SpielerMedia: dropping unsupported format (canplaytype denied): "+res[c].format)}}else{console.log("SpielerMedia: dropping unsupported format: "+res[c].format)}}if(format==="mp3"||format==="wav"){this.metadata.audio=true}if(list.length){this.source(0)}else if(initialResourcesLength){this.source(-2)}};this.active=function(){return list&&list[activeSource]&&list[activeSource][activeQuality]?list[activeSource][activeQuality]:""};this.platform=function(){return activeSource>-1&&list[activeSource]?list[activeSource].platform:0};this.isFlashBasedPlatform=function(){var value;switch(this.platform()){case Media.PLATFORM.FLASH:case Media.PLATFORM.FLASHHDCORE:case Media.PLATFORM.FLASHHLS:value=true;break;case Media.PLATFORM.HLSJS:case Media.PLATFORM.HTML5:value=false;break;default:value=null}return value};this.format=function(){return activeSource>-1&&list[activeSource]?list[activeSource].format:""};this.destroy=function(){dispatcher.dispatch(Media.events.DESTROY)};this.source=function(source){if(source!==undefined&&source<list.length){activeSource=source;dispatcher.dispatch(Media.events.PLATFORMCHANGE,{media:this})}return activeSource};this.getOriginalResource=function(){return original};this.quality=function(value){if(value!=activeQuality&&value>=0&&value<this.qualities()){activeQuality=value}return activeQuality};this.qualities=function(){return list&&list[activeSource]?list[activeSource].length:-1};this.qualityList=function(){return list&&list[activeSource]?list[activeSource]:[]};this.absAvailable=function(){var format=formats[this.format()];return format&&format.abs};this.mbsAvailable=function(){var format=formats[this.format()];return format&&format.mbs};this.playbackRateChangable=function(){var format=formats[this.format()];return format&&format.playbackRateChangable};this.updateFlashAvailability=function(isFlashAvailable){FLASH=isFlashAvailable?Media.PLATFORM.FLASH:0};if(Spieler.browser.is.android&&Spieler.browser.is.android.length===3){androidVersion=versionToInt(Spieler.browser.is.android);if(androidVersion>=versionToInt("4.4.4")){androidHLSSupportsVOD=androidHLSSupportsLive=true}else if(androidVersion<versionToInt("4.4.4")&&androidVersion>=versionToInt("4.1.0")){androidHLSSupportsLive=true;androidHLSSupportsVOD=false}else{androidHLSSupportsLive=androidHLSSupportsVOD=false}console.log("SpielerMedia: Detected Android "+Spieler.browser.is.android.join(".")+", HLS Live Support: "+androidHLSSupportsLive+", HLS VOD Support: "+androidHLSSupportsVOD)}var FLASH=hasFlash?Media.PLATFORM.FLASH:0;var FLASHHDCORE=hasFlash?Media.PLATFORM.FLASHHDCORE:0;var FLASHHLS=hasFlash&&(!Spieler.browser.is.chrome&&!Spieler.browser.is.firefox)?Media.PLATFORM.FLASHHLS:0;var HTML5=Spieler.browser.supports.html5.video?Media.PLATFORM.HTML5:0;var HTML5HLS=0;var HLSJS=0;if(Spieler.browser.is.iOS||Spieler.browser.is.desktopSafari||Spieler.browser.is.edge){HTML5HLS=Media.PLATFORM.HTML5}else if(Spieler.browser.is.android){if(this.metadata&&this.metadata.live){HTML5HLS=androidHLSSupportsLive?Media.PLATFORM.HTML5:0}else{HTML5HLS=androidHLSSupportsVOD?Media.PLATFORM.HTML5:0}}if(HTML5HLS===0&&Spieler.browser.supportsHlsJs()){HLSJS=Media.PLATFORM.HLSJS;ready()}else{ready()}}Media.events={DESTROY:"MEDIA.DESTROY",PLATFORMCHANGE:"MEDIA.PLATFORMCHANGE"};Media.PLATFORM={HTML5:1,FLASH:2,FLASHHDCORE:4,FLASHHLS:8,HLSJS:16};(function(){"use strict";if(window.Spieler&&window.Spieler.Metrics){return}var metricsDebug=isMetricsDebugEnabled;var metricsUrl=metricsDebugURL;var LOG_PREFIX="Spieler Metrics:";var log=console.log.bind(console,LOG_PREFIX);var info=console.info.bind(console,LOG_PREFIX);var error=console.error.bind(console,LOG_PREFIX);var warn=console.warn.bind(console,LOG_PREFIX);function factoryMessage(data,uuid){return Object.assign({},data,uuid?{id:uuid}:{})}function getParentWindowDomain(){try{return window.top.location.hostname}catch(ex){var link=document.createElement("a");link.setAttribute("href",document.referrer);return link.hostname}}function getInitMessage(){return"init"+(metricsDebug?":debug":"")}function getMetricsURL(){return metricsUrl||"//player.performgroup.com/metrics/live/metrics.js"}var Metrics;try{Metrics=new Worker(getMetricsURL())}catch(e){warn("Couldn't start Metrics, aborting.\n\n",e)}if(!Metrics){Spieler.Metrics={event:DUMMY};return}Metrics.postMessage({message:getInitMessage()});Metrics.postMessage(factoryMessage({hostname:getParentWindowDomain(),build:Spieler.version}));Spieler.Metrics={event:function(id,category,action,label,value){log("event: ",Array.prototype.slice.call(arguments).join(" / "));Metrics.postMessage(factoryMessage({event:{eventCategory:category,eventAction:action,eventLabel:label,eventValue:value}},id))}}})();"use strict";var NativeControlsManager;(function(){var fs;var P="Spieler NativeControlsManager: ";NativeControlsManager=function(videoElement,dispatcher,spieler){fs=Spieler.browser.fs;console.log(P+"initialising on element ",videoElement);this._video=videoElement;this._dispatcher=dispatcher;this._inFullscreen=fs.isFullscreenElement(videoElement);this._lastControlsState=null;this._pauseTimeout=null;this._spieler=spieler;this._videoCover=null;utils.bindAll(this);this._dispatcher.add(Spieler.events.DESTROY,this._onDestroy);this._dispatcher.add(Spieler.events.DURATIONCHANGE,this._onDurationChange)};NativeControlsManager.prototype={enable:function(noprop){console.log(P+"enabling native controls");this._lastControlsState=true;if(!noprop){this._video.controls=true}if(fs.isFullscreenElement(this._video)){this._inFullscreen=true}this._pauseTimeout&&clearTimeout(this._pauseTimeout);if(fs.html5){console.log(P+"listening to HTML5 fullcreenchange");document.addEventListener(fs.changeEvent,this._onFullscreenchange)}else if(fs.native){console.log(P+"listening to native fullcreenchange");fs.nativeChangeEvents.forEach(function(ev){this._video.addEventListener(ev,this._onFullscreenchange)}.bind(this))}this._videoCover=document.createElement("div");this._videoCover.className="ppVideoClick";this._video.parentNode.appendChild(this._videoCover);this._video.addEventListener("play",this._onPlay);this._video.addEventListener("pause",this._onPause);this._videoCover.addEventListener("click",this._onCoverClick);this._video.parentNode.parentNode.classList.add("nativeControls")},disable:function(){console.log(P+"disabling native controls");this._lastControlsState=false;this._video.controls=false;if(fs.html5){document.addEventListener(Browser.fullscreenChange,this._onFullscreenchange)}else if(fs.native){fs.nativeChangeEvents.forEach(function(ev){this._video.addEventListener(ev,this._onFullscreenchange)}.bind(this))}if(Spieler.browser.is.ie){this._video.removeEventListener("playing",this._onPlay)}else{this._video.removeEventListener("play",this._onPlay)}if(this._videoCover!==null){this._removeVideoCover()}if(Spieler.browser.is.iOS){console.log("waiting to remove 'pause' callback");this._pauseTimeout=setTimeout(function(){console.log("removing 'pause' callback");this._video.removeEventListener("pause",this._onPause)}.bind(this),5e3)}else{this._video.removeEventListener("pause",this._onPause)}this._video.parentNode.parentNode.classList.remove("nativeControls")},_onDestroy:function(){console.log(P+"goodbye, cruel world");this._dispatcher.remove(Spieler.events.DESTROY,this._onDestroy);this._dispatcher.remove(Spieler.events.DURATIONCHANGE,this._onDurationChange);this.disable()},_onFullscreenchange:function(){if(fs.isFullscreenElement(this._video)){console.log(P+"fullscreen change: enter");this._dispatcher.dispatch(Spieler.events.FULLSCREEN,{feedback:true});this._inFullscreen=true}else if(this._inFullscreen){console.log(P+"fullscreen change: leave");this._dispatcher.dispatch(Spieler.events.FULLSCREEN,{feedback:true});this._inFullscreen=false}},_onCoverClick:function(){if(this._videoCover!==null){this._spieler.touchHandler("nativeControlsManager");this._removeVideoCover()}this._spieler.play()},_onPlay:function(){if(this._videoCover!==null){this._removeVideoCover();this._video.addEventListener(Spieler.browser.is.ie?"playing":"play",this._onPlay)}if(!this._spieler.getPassiveState()){this._dispatcher.dispatch(Spieler.events.PLAY,{feedback:true})}},_onPause:function(){if(!this._spieler.getPassiveState()){this._dispatcher.dispatch(Spieler.events.PAUSE,{feedback:true})}this._pauseTimeout&&clearTimeout(this._pauseTimeout)},_onDurationChange:function(){this._video.controls=this._lastControlsState},_removeVideoCover:function(){this._videoCover.removeEventListener("click",this._onCoverClick);this._videoCover.parentNode.removeChild(this._videoCover);this._videoCover=null}}})();"use strict";var NativeFullscreenManager;var fs;(function(){var P="Spieler NativeFullscreenManager: ";NativeFullscreenManager=function(videoElement,dispatcher,manageNativeControls){fs=Spieler.browser.fs;console.log(P+"initialising on element ",videoElement);this._video=videoElement;this._dispatcher=dispatcher;this._shouldBePlaying=false;this._prevSpielerTime=0;this._spielerTime=0;if(manageNativeControls){this._ncm=new NativeControlsManager(videoElement,dispatcher)}utils.bindAll(this);this._onFullscreenchange();this._dispatcher.add(Spieler.events.DESTROY,this._onDestroy);this._listen()};NativeFullscreenManager.prototype={enter:function(){if(this._video.readyState>0){console.log(P+"entering native fullscreen",fs.request);this._video[fs.request]()}else{console.error(P+"videoElement is not ready to go fullscreen");this._dispatcher.dispatch(Spieler.events.FULLSCREENERROR)}},inFullscreen:function(){return fs.isFullscreenElement(this._video)},exit:function(){console.log(P+"exiting native fullscreen",fs.exit,fs.exitNative);if(fs.html5){document[fs.exit]()}else if(fs.native){this._video[fs.exitNative]()}},_onDestroy:function(){console.log(P+"goodbye, cruel world");if(fs.html5){document.removeEventListener(fs.changeEvent,this._onFullscreenchange)}else if(fs.native){fs.nativeChangeEvents.forEach(function(ev){this._video.removeEventListener(ev,this._onFullscreenchange)}.bind(this))}this._dispatcher.remove(Spieler.events.FULLSCREEN,this._onSplFullscreen);this._dispatcher.remove(Spieler.events.DESTROY,this._onDestroy)},_onPlaying:function(){this._shouldBePlaying=true},_onPaused:function(){this._shouldBePlaying=false},_listen:function(){console.log(P+"listening");if(fs.html5){document.addEventListener(fs.changeEvent,this._onFullscreenchange)}else if(fs.native){fs.nativeChangeEvents.forEach(function(ev){this._video.addEventListener(ev,this._onFullscreenchange)},this)}this._dispatcher.add(Spieler.events.FULLSCREEN,this._onSplFullscreen)},_onFullscreenchange:function(){console.log(P+"fullscreen change");if(this._ncm){if(this.inFullscreen()){console.log(P+"please enable native controls");this._ncm.enable(Spieler.browser.is.iOS)}else{console.log(P+"please disable native controls");setTimeout(this._ncm.disable.bind(this._ncm),1e3)}}},_onSplTimeupdate:function(eventName,data){this._prevSpielerTime=this._spielerTime;this._spielerTime=data},_onSplEnd:function(eventName,data){this._prevSpielerTime=0},_onSplFullscreen:function(event,data){if(data){if(data.feedback){return}var method=null;switch(this.inFullscreen()){case true:if(data.toggle||data.exit){method="exit"}break;case false:if(data.toggle||data.enter){method="enter"}break}if(method!==null){this[method]();return}}throw new Error("illegal FULLSCREEN event")}}})();function Reactor(){"use strict";var target=document.createTextNode(null);this.addEventListener=target.addEventListener.bind(target);this.removeEventListener=target.removeEventListener.bind(target);this.dispatchEvent=target.dispatchEvent.bind(target)}(function(){"use strict";angular.module("ngSpieler",[]).directive("spieler",["$timeout",function($timeout){var currentResources=null;if(!window.Spieler){throw new Error("Spieler library is not loaded")}return{scope:{resources:"=?",basicUi:"=?",autoplay:"=?",denyFlash:"=?",poster:"=?",showPosterAtVideoEnd:"=?",playing:"=?",playState:"=?",noinit:"=?",volume:"=?",muted:"=?",quality:"=?",qualities:"=?",absAvailable:"=?",abs:"=?",mbsAvailable:"=?",qualitylist:"=?",currentTime:"=?",dfp:"=?",dfpPreroll:"=?",dfpSting:"=?",dfpPostroll:"=?",dfpMidroll:"=?",dfpOverlay:"=?",dfpOverlayBottom:"=?",dfpParameters:"=?",dfpUpdateConfig:"=?",dfpTime:"=?",dfpDuration:"=?",onStreamurlNeeded:"=?",postHybridAutoplay:"=?",reinitOnResourceChange:"=?",googleTagManagerEvents:"=?",googleTagManagerDataLayerHandle:"=?",googleTagManagerTrackAds:"=?",nativeFullscreen:"=?",fullscreen:"=?",nativeControls:"=?",flashBlockDetector:"=?",playsInline:"=?",companionParameters:"=?",skin:"=?",dfpLocale:"=?",dfpDebug:"=?",playbackRate:"=?",dfpLoadVideoTimeout:"=?",dfpBitrate:"=?",dfpSetNumRedirects:"=?",touchHandler:"=?",dfpUseRawAdUrl:"=?"},link:function(scope,$element){var log=console.log.bind(console,"ngSpieler:");var warn=console.warn.bind(console,"ngSpieler:");var error=console.error.bind(console,"ngSpieler:");var watchguards={playing:false,currentTime:false,quality:false,volume:false,muted:false,fullscreen:false,dfpUpdateConfig:false,abs:false};function watchguard(what,toRun){if(watchguards[what]){watchguards[what]=false}else{toRun()}}function getAllSpielerEventNames(){return Object.values(Spieler.plugins).filter(hasProp("events")).map(function(plugin){return Object.values(plugin.events)}).reduce(sumArray,Object.values(Spieler.events))}function bindToSpieler(dispatcher,callback,eventName){dispatcher.add(eventName,callback)}function bindEvents(spieler,handler){var bindToEvent=bindToSpieler.bind(null,spieler.dispatcher,handler);getAllSpielerEventNames().forEach(bindToEvent)}function getConfig(){var configObj={basicUi:scope.basicUi,denyFlash:scope.denyFlash,poster:scope.poster,showPosterAtVideoEnd:scope.showPosterAtVideoEnd||false,autoplay:scope.playing,autoplayHybrid:true,nativeControls:scope.nativeControls,plugins:{},volume:scope.volume,muted:scope.muted,hooks:{"streamurl-needed":[],"post-hybrid-autoplay":[],"pre-init":[],"post-clip":[]}};if(scope.onStreamurlNeeded){configObj.hooks["streamurl-needed"].push({function:scope.onStreamurlNeeded,name:"ng-spieler-on-streamurl-needed"})}if(scope.postHybridAutoplay){configObj.hooks["post-hybrid-autoplay"].push({function:scope.postHybridAutoplay,name:"ng-spieler-on-post-hybrid-autoplay"})}var gtmconfig=getGoogleTagManagerConfig();var dfpConfig=getDfpConfig();if(scope.hasOwnProperty("nativeFullscreen")){configObj.nativeFullscreen=scope.nativeFullscreen}if(scope.flashBlockDetector){configObj.plugins.flashBlockDetector=true}if(dfpConfig){configObj.plugins.dfp=dfpConfig}if(gtmconfig){configObj.plugins.googleTagManager=gtmconfig}if(scope.playsInline){configObj.playsInline=true}return configObj}function getDfpConfig(){var config=null;if(scope.dfp){if(scope.dfpUpdateConfig){config=scope.dfpUpdateConfig;watchguards.dfpUpdateConfig=true}else{config={preroll:scope.dfpPreroll,sting:scope.dfpSting,midroll:scope.dfpMidroll,postroll:scope.dfpPostroll,overlay:scope.dfpOverlay,overlayBottom:scope.dfpOverlayBottom,parameters:scope.dfpParameters,companionParameters:scope.companionParameters,skin:scope.skin,debug:!!scope.dfpDebug,locale:scope.dfpLocale,loadVideoTimeout:scope.dfpLoadVideoTimeout,bitrate:scope.dfpBitrate,setNumRedirects:scope.dfpSetNumRedirects,useRawAdUrl:scope.dfpUseRawAdUrl}}log("DFP enabled:",config)}return config}function getGoogleTagManagerConfig(){var config=null;if(scope.googleTagManagerEvents){config={events:scope.googleTagManagerEvents.reduce(function(events,eventName){events[eventName]=true;return events},{}),trackAds:scope.googleTagManagerTrackAds};if(scope.googleTagManagerDataLayerHandle){config.dataLayerHandle=scope.googleTagManagerDataLayerHandle}log("googleTagManager enabled:",config)}return config}function safeApply(){var phase=scope.$root.$$phase;if(phase!=="$apply"&&phase!=="$digest"){scope.$apply()}}function createSpieler(force){if(!scope.spieler||force){var conf=getConfig();scope.spieler=new Spieler($element[0],scope.resources,conf);if(Boolean(scope.spieler._state.playing)!==scope.playing){scope.playing=scope.spieler._state.playing===undefined?false:scope.spieler._state.playing}scope.muted=scope.spieler._state.muted;scope.volume=scope.spieler._state.volume;log("Instantiated Spieler for element",$element[0],"with resource: ",scope.resources?scope.resources:"none","with config",conf);if(scope.resources){currentResources=scope.resources}bindEvents(scope.spieler,function(eventName,data){scope.$emit(eventName,data,$element,scope.spieler)});createWatches();$element[0]._={spieler:scope.spieler,getAllSpielerEventNames:getAllSpielerEventNames}}}function createWatches(){scope.$watch("resources",function(value,oldValue){log("scope.resources are changing: ",value);if(value!==currentResources){if(scope.reinitOnResourceChange){scope.spieler.destroy();createSpieler(true)}else{try{scope.spieler.play(value);currentResources=value}catch(err){error("failed to load new resource:",value,err)}}if(value===currentResources){log("resource changed",value)}}});scope.$watch("currentTime",function(){watchguard("currentTime",function(){if(scope.currentTime!==null){scope.spieler.currentTime(scope.currentTime);log("seeked to position",scope.currentTime)}})});scope.$watch("playing",function(value,oldValue){if(value===oldValue){return}watchguard("playing",function(){log("scope.playing is changing: ",scope.playing);if(scope.playing!==undefined&&scope.playing!==Boolean(scope.spieler.playing())&&!scope.spieler._state.poking){scope.spieler[scope.playing?"play":"pause"]();log("play state changed",scope.playing)}})});scope.$watch("quality",function(value,oldValue){if(value===oldValue){return}watchguard("quality",function(){scope.spieler.quality(scope.quality);log("quality value changed",scope.quality)})});scope.$watch("volume",function(value){watchguard("volume",function(){if(parseFloat(value)!==scope.spieler.volume()){scope.spieler.volume(scope.volume);log("volume value changed: "+scope.volume)}})});scope.$watch("abs",function(){scope.spieler.abs(scope.abs);log("abs value changed")});scope.$watch("muted",function(){watchguard("muted",function(){scope.spieler.muted(scope.muted);log("muted value changed: "+scope.muted)})});scope.$watch("fullscreen",function(value,oldValue){watchguard("fullscreen",function(){if(value!==oldValue&&typeof value==="boolean"){scope.spieler.fullscreen(value);log("fullscreen changed: ",value,"was:",oldValue)}})});scope.$watch("playbackRate",function(){if(scope.playbackRate!==null){scope.spieler.playbackRate(scope.playbackRate)}});scope.$watch("dfpUpdateConfig",function(value){watchguard("dfpUpdateConfig",function(){if(value&&scope.spieler&&!scope.spieler.dfp){scope.spieler.laterUpdateConfig(value,scope.spieler._state.uninitialized)}else if(value&&scope.spieler&&scope.spieler.dfp){scope.spieler.dfp.updateConfig(value,scope.spieler._state.uninitialized);log("dfp config updated with value:",value)}})});scope.dfpDuration=function(){return scope.spieler.dfp.getDfpDuration()};scope.dfpTime=function(){return scope.spieler.dfp.getDfpTime()};scope.touchHandler=function(){scope.spieler.touchHandler()};scope.spieler.dispatcher.add(Spieler.events.FULLSCREEN,function(event,data){if(data){if(!data.feedback){var newValue=scope.fullscreen;if(data.enter){newValue=true}else if(data.exit){newValue=false}else if(data.toggle){newValue=!newValue}if(newValue!==scope.fullscreen){watchguards.fullscreen=true;scope.fullscreen=newValue}}else{var isInFullscreen=Spieler.browser.fs.isFullscreenElement($element[0].querySelector(scope.nativeFullscreen?"video":".ppMain"));if(scope.fullscreen!==isInFullscreen){watchguards.fullscreen=true;scope.fullscreen=isInFullscreen;log("updated fullscreen to "+scope.fullscreen+" (feedback)")}}safeApply()}});scope.spieler.dispatcher.add(Spieler.events.FULLSCREENERROR,function(event,data){$timeout(function(){watchguards.fullscreen=true;scope.fullscreen=false},100)});scope.spieler.dispatcher.add(Spieler.events.PLAY,function(event,data){if(!scope.playing){scope.playing=true;watchguards.playing=true;safeApply()}});scope.spieler.dispatcher.add(Spieler.events.GETSIZE,function(event,data){if(scope.playing!==Boolean(scope.spieler.playing())){scope.playing=!scope.playing;watchguards.playing=true;safeApply()}});scope.spieler.dispatcher.add(Spieler.events.PAUSE,function(event,data){if(scope.playing){scope.playing=false;watchguards.playing=true;safeApply()}});scope.spieler.dispatcher.add(Spieler.events.PLAYING,function(event,data){scope.playState="playing";safeApply()});scope.spieler.dispatcher.add(Spieler.events.PAUSED,function(event,data){scope.playState="paused";safeApply()});scope.spieler.dispatcher.add(Spieler.events.END,function(event,data){if(scope.playing){scope.playing=false;watchguards.playing=true}scope.playState="stopped";safeApply()});scope.spieler.dispatcher.add(Spieler.events.POSTCLIPDONE,function(event,data){if(scope.playing){scope.playing=false;watchguards.playing=true}scope.playState="stopped";safeApply()});scope.spieler.dispatcher.add(Spieler.events.TIMEUPDATE,function(event,data){scope.currentTime=data;watchguards.currentTime=true;safeApply()});scope.spieler.dispatcher.add(Spieler.events.VOLUMECHANGE,function(event,data){if(data!==scope.volume){scope.volume=data;watchguards.volume=true;safeApply()}});scope.spieler.dispatcher.add(Spieler.events.MUTEDCHANGE,function(event,data){if(data!==scope.muted){scope.muted=data;watchguards.muted=true;safeApply()}});scope.spieler.dispatcher.add(Spieler.events.DURATIONCHANGE,function(event,data){scope.quality=scope.spieler.quality();scope.abs=scope.spieler.abs();watchguards.abs=true;scope.qualities=scope.spieler.qualities();scope.absAvailable=scope.spieler.absAvailable();scope.mbsAvailable=scope.spieler.mbsAvailable();scope.qualitylist=scope.spieler.qualityList();safeApply()});scope.spieler.dispatcher.add(Spieler.events.QUALITY,function(event,data){scope.quality=scope.spieler.quality();scope.abs=scope.spieler.abs();watchguards.abs=true;safeApply()})}$element.on("$destroy",function(){if(scope.spieler!==undefined){scope.spieler.destroy();scope.spieler=undefined}});if(!scope.noinit){log("sync init");createSpieler()}else{scope.$watch("noinit",function(value){if(!value){$timeout(function(){log("delayed init");createSpieler()})}})}}}}])})();;
return Spieler;};
if (typeof module !== 'undefined') {
	var Spieler = spielerFactory();
	module.exports = Spieler;
	module.exports.default = Spieler;
	module.exports.Spieler = Spieler;
} else if (typeof window !== 'undefined' && !(window.Spieler && !window.SpielerOverride)) {
	window.Spieler = spielerFactory();
}
}('1.51.3'));