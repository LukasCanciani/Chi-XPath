(function(w){var t=window.AmazonUIPageJS||window.P,n=t._namespace||t.attributeErrors,H=n?n("VSECommonComponentAssets",""):t;H.guardFatal?H.guardFatal(w)(H,window):H.execute(function(){w(H,window)})})(function(w,t,n){(function(){function H(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})}function Z(a){return a}function ka(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,
c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function Db(a,b,c){b=Ba(b===n?a.length-1:b,0);return function(){for(var e=arguments,k=-1,d=Ba(e.length-b,0),g=Array(d);++k<d;)g[k]=e[b+k];k=-1;for(d=Array(b+1);++k<b;)d[k]=e[k];d[b]=c(g);return ka(a,this,d)}}function Eb(a){return function(){return a}}function O(a){if(null==a)return a===n?"[object Undefined]":"[object Null]";if(Ca&&Ca in Object(a)){var b=Fb.call(a,T),c=a[T];try{a[T]=n;var e=!0}catch(d){}var k=Gb.call(a);e&&(b?a[T]=
c:delete a[T]);a=k}else a=Hb.call(a);return a}function F(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)}function Da(a){if(!F(a))return!1;a=O(a);return"[object Function]"==a||"[object GeneratorFunction]"==a||"[object AsyncFunction]"==a||"[object Proxy]"==a}function I(a){if(null!=a){try{return Ib.call(a)}catch(b){}return a+""}return""}function J(a,b){a=null==a?n:a[b];b=!F(a)||Ea&&Ea in a?!1:(Da(a)?Jb:Kb).test(I(a));return b?a:n}function Fa(a){var b=0,c=0;return function(){var e=Lb(),
k=16-(e-c);c=e;if(0<k){if(800<=++b)return arguments[0]}else b=0;return a.apply(n,arguments)}}function U(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=la(a.prototype),b=a.apply(c,b);
return F(b)?b:c}}function Mb(a,b,c){function e(){return(this&&this!==x&&this instanceof e?d:a).apply(k?c:this,arguments)}var k=b&1,d=U(a);return e}function Ga(a,b,c,e){var k=-1,d=a.length,g=c.length,f=-1,h=b.length,u=Nb(d-g,0),m=Array(h+u);for(e=!e;++f<h;)m[f]=b[f];for(;++k<g;)if(e||k<d)m[c[k]]=a[k];for(;u--;)m[f++]=a[k++];return m}function Ha(a,b,c,e){var k=-1,d=a.length,g=-1,f=c.length,h=-1,u=b.length,m=Ob(d-f,0),n=Array(m+u);for(e=!e;++k<m;)n[k]=a[k];for(m=k;++h<u;)n[m+h]=b[h];for(;++g<f;)if(e||
k<d)n[m+c[g]]=a[k++];return n}function ma(){}function P(a){this.__wrapped__=a;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function Pb(){}function Q(a,b){this.__wrapped__=a;this.__actions__=[];this.__chain__=!!b;this.__index__=0;this.__values__=n}function K(a){return null!=a&&"object"==typeof a}function Ia(a,b){var c=-1,e=a.length;for(b||(b=Array(e));++c<e;)b[c]=a[c];return b}function aa(a){if(K(a)&&!y(a)&&!(a instanceof
P)){if(a instanceof Q)return a;if(Qb.call(a,"__wrapped__")){if(a instanceof P)a=a.clone();else{var b=new Q(a.__wrapped__,a.__chain__);b.__actions__=Ia(a.__actions__);b.__index__=a.__index__;b.__values__=a.__values__;a=b}return a}}return new Q(a)}function Rb(a,b){for(var c=-1,e=null==a?0:a.length;++c<e&&!1!==b(a[c],c,a););return a}function Sb(a,b){Rb(Tb,function(c){var e="_."+c[0];if(c=b&c[1]){if(c=null==a?0:a.length){if(e===e)a:{c=-1;for(var k=a.length;++c<k;)if(a[c]===e)break a;c=-1}else a:{c=a.length;
for(k=-1;++k<c;){var d=a[k];if(d!==d){c=k;break a}}c=-1}c=-1<c}c=!c}c&&a.push(e)});return a.sort()}function Ja(a,b,c){b+="";var e;e=(e=b.match(Ub))?e[1].split(Vb):[];c=Sb(e,c);if(e=c.length){var k=e-1;c[k]=(1<e?"\x26 ":"")+c[k];c=c.join(2<e?", ":" ");b=b.replace(Wb,"{\n/* [wrapped with "+c+"] */\n")}return Ka(a,b)}function La(a,b,c,e,k,d,g,f,h,u){var m=b&8,A=m?g:n;g=m?n:g;var r=m?d:n;d=m?n:d;b=(b|(m?32:64))&~(m?64:32);b&4||(b&=-4);k=[a,b,k,r,A,d,g,f,h,u];c=c.apply(n,k);b:for(f=a.name+"",h=Ma[f],u=
Xb.call(Ma,f)?h.length:0;u--;)if(m=h[u],A=m.func,null==A||A==a){f=m.name;break b}h=aa[f];"function"==typeof h&&f in P.prototype?a===h?f=!0:(f=Na(h),f=!!f&&a===f[0]):f=!1;f&&Oa(c,k);c.placeholder=e;return Ja(c,a,b)}function na(a,b){b=null==b?9007199254740991:b;return!!b&&("number"==typeof a||Yb.test(a))&&-1<a&&0==a%1&&a<b}function V(a,b){for(var c=-1,e=a.length,k=0,d=[];++c<e;){var g=a[c];if(g===b||"__lodash_placeholder__"===g)a[c]="__lodash_placeholder__",d[k++]=c}return d}function oa(a,b,c,e,k,d,
g,f,h,u){function m(){for(var C=arguments.length,B=Array(C),t=C;t--;)B[t]=arguments[t];if(q){var w=m.placeholder,y,t=B.length;for(y=0;t--;)B[t]===w&&++y}e&&(B=Ga(B,e,k,q));d&&(B=Ha(B,d,g,q));C-=y;if(q&&C<u)return w=V(B,w),La(a,b,oa,m.placeholder,c,B,w,f,h,u-C);w=r?c:this;t=p?w[a]:a;C=B.length;if(f){y=B.length;for(var pa=Zb(f.length,y),D=Ia(B);pa--;){var z=f[pa];B[pa]=na(z,y)?D[z]:n}}else $b&&1<C&&B.reverse();A&&h<C&&(B.length=h);this&&this!==x&&this instanceof m&&(t=v||U(t));return t.apply(w,B)}var A=
b&128,r=b&1,p=b&2,q=b&24,$b=b&512,v=p?n:U(a);return m}function ac(a,b,c){function e(){for(var d=arguments.length,g=Array(d),f=d,h=e.placeholder;f--;)g[f]=arguments[f];f=3>d&&g[0]!==h&&g[d-1]!==h?[]:V(g,h);d-=f.length;return d<c?La(a,b,oa,e.placeholder,n,g,f,n,n,c-d):ka(this&&this!==x&&this instanceof e?k:a,this,g)}var k=U(a);return e}function bc(a,b,c,e){function k(){for(var b=-1,h=arguments.length,u=-1,m=e.length,n=Array(m+h),r=this&&this!==x&&this instanceof k?g:a;++u<m;)n[u]=e[u];for(;h--;)n[u++]=
arguments[++b];return ka(r,d?c:this,n)}var d=b&1,g=U(a);return k}function ba(a){return"symbol"==typeof a||K(a)&&"[object Symbol]"==O(a)}function cc(a){if("number"==typeof a)return a;if(ba(a))return Pa;F(a)&&(a="function"==typeof a.valueOf?a.valueOf():a,a=F(a)?a+"":a);if("string"!=typeof a)return 0===a?a:+a;a=a.replace(dc,"");var b=ec.test(a);return b||fc.test(a)?gc(a.slice(2),b?2:8):hc.test(a)?Pa:+a}function Qa(a){a?(a=cc(a),a=a===Ra||a===-Ra?1.7976931348623157E308*(0>a?-1:1):a===a?a:0):a=0===a?a:
0;var b=a%1;return a===a?b?a-b:a:0}function ic(a,b,c,e){for(var k=-1,d=null==a?0:a.length;++k<d;){var g=a[k];b(e,g,c(g),a)}return e}function Sa(a){return K(a)&&"[object Arguments]"==O(a)}function jc(){return!1}function qa(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function kc(a){return K(a)&&qa(a.length)&&!!q[O(a)]}function lc(a){return function(b){return a(b)}}function Ta(a){return null!=a&&qa(a.length)&&!Da(a)}function ca(a){if(Ta(a)){var b=y(a),c=!b&&Ua(a),e=!b&&!c&&ra(a),k=
!b&&!c&&!e&&Va(a);if(b=b||c||e||k){for(var c=a.length,d=String,g=-1,f=Array(c);++g<c;)f[g]=d(g);c=f}else c=[];var d=c.length,h;for(h in a)!mc.call(a,h)||b&&("length"==h||e&&("offset"==h||"parent"==h)||k&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||na(h,d))||c.push(h);a=c}else if(h=a&&a.constructor,a===("function"==typeof h&&h.prototype||nc)){h=[];for(e in Object(a))oc.call(a,e)&&"constructor"!=e&&h.push(e);a=h}else a=pc(a);return a}function qc(a,b,c,e){rc(a,function(a,d,g){b(e,a,c(a),g)});return e}
function Wa(a,b){return a===b||a!==a&&b!==b}function da(a,b){for(var c=a.length;c--;)if(Wa(a[c][0],b))return c;return-1}function D(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var e=a[b];this.set(e[0],e[1])}}function L(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var e=a[b];this.set(e[0],e[1])}}function ea(a,b){a=a.__data__;var c=typeof b;return("string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==b:null===b)?a["string"==typeof b?"string":"hash"]:a.map}function z(a){var b=
-1,c=null==a?0:a.length;for(this.clear();++b<c;){var e=a[b];this.set(e[0],e[1])}}function E(a){this.size=(this.__data__=new D(a)).size}function fa(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new z;++b<c;)this.add(a[b])}function sc(a,b){for(var c=-1,e=null==a?0:a.length;++c<e;)if(b(a[c],c,a))return!0;return!1}function Xa(a,b,c,e,k,d){var g=c&1,f=a.length,h=b.length;if(f!=h&&!(g&&h>f))return!1;if((h=d.get(a))&&d.get(b))return h==b;var h=-1,u=!0,m=c&2?new fa:n;d.set(a,b);for(d.set(b,a);++h<f;){var A=
a[h],r=b[h];if(e)var p=g?e(r,A,h,b,a,d):e(A,r,h,a,b,d);if(p!==n){if(p)continue;u=!1;break}if(m){if(!sc(b,function(a,b){if(!m.has(b)&&(A===a||k(A,a,c,e,d)))return m.push(b)})){u=!1;break}}else if(A!==r&&!k(A,r,c,e,d)){u=!1;break}}d["delete"](a);d["delete"](b);return u}function tc(a){var b=-1,c=Array(a.size);a.forEach(function(a,d){c[++b]=[d,a]});return c}function uc(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=a});return c}function vc(a,b,c,e,d,l,g){switch(c){case "[object DataView]":if(a.byteLength!=
b.byteLength||a.byteOffset!=b.byteOffset)break;a=a.buffer;b=b.buffer;case "[object ArrayBuffer]":if(a.byteLength!=b.byteLength||!l(new Ya(a),new Ya(b)))break;return!0;case "[object Boolean]":case "[object Date]":case "[object Number]":return Wa(+a,+b);case "[object Error]":return a.name==b.name&&a.message==b.message;case "[object RegExp]":case "[object String]":return a==b+"";case "[object Map]":var f=tc;case "[object Set]":f||(f=uc);if(a.size!=b.size&&!(e&1))break;if(c=g.get(a))return c==b;e|=2;
g.set(a,b);b=Xa(f(a),f(b),e,d,l,g);g["delete"](a);return b;case "[object Symbol]":if(sa)return sa.call(a)==sa.call(b)}return!1}function Za(a,b,c){b=b(a);if(!y(a)){a=c(a);c=-1;for(var e=a.length,d=b.length;++c<e;)b[d+c]=a[c]}return b}function wc(a,b){for(var c=-1,e=null==a?0:a.length,d=0,l=[];++c<e;){var g=a[c];b(g,c,a)&&(l[d++]=g)}return l}function xc(){return[]}function R(a,b,c,e,d){if(a===b)return!0;if(null==a||null==b||!K(a)&&!K(b))return a!==a&&b!==b;a:{var l=y(a),g=y(b),f=l?"[object Array]":
$a(a),h=g?"[object Array]":$a(b),f="[object Arguments]"==f?"[object Object]":f,h="[object Arguments]"==h?"[object Object]":h,u="[object Object]"==f,g="[object Object]"==h;if((h=f==h)&&ra(a)){if(!ra(b)){b=!1;break a}l=!0;u=!1}if(h&&!u)d||(d=new E),b=l||Va(a)?Xa(a,b,c,e,R,d):vc(a,b,f,c,e,R,d);else{if(!(c&1)&&(l=u&&ab.call(a,"__wrapped__"),f=g&&ab.call(b,"__wrapped__"),l||f)){a=l?a.value():a;b=f?b.value():b;d||(d=new E);b=R(a,b,c,e,d);break a}if(h)b:if(d||(d=new E),l=c&1,f=Za(a,ca,bb),g=f.length,h=Za(b,
ca,bb).length,g==h||l){for(u=g;u--;){var m=f[u];if(!(l?m in b:yc.call(b,m))){b=!1;break b}}if((h=d.get(a))&&d.get(b))b=h==b;else{h=!0;d.set(a,b);d.set(b,a);for(var p=l;++u<g;){var m=f[u],r=a[m],t=b[m];if(e)var q=l?e(t,r,m,b,a,d):e(r,t,m,a,b,d);if(q===n?r!==t&&!R(r,t,c,e,d):!q){h=!1;break}p||(p="constructor"==m)}h&&!p&&(c=a.constructor,e=b.constructor,c!=e&&"constructor"in a&&"constructor"in b&&!("function"==typeof c&&c instanceof c&&"function"==typeof e&&e instanceof e)&&(h=!1));d["delete"](a);d["delete"](b);
b=h}}else b=!1;else b=!1}}return b}function zc(a,b,c,e){var d=c.length,l=d,g=!e;if(null==a)return!l;for(a=Object(a);d--;){var f=c[d];if(g&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++d<l;){var f=c[d],h=f[0],u=a[h],m=f[1];if(g&&f[2]){if(u===n&&!(h in a))return!1}else{f=new E;if(e)var p=e(u,m,h,a,b,f);if(p===n?!R(m,u,3,e,f):!p)return!1}}return!0}function Ac(a){for(var b=ca(a),c=b.length;c--;){var e=b[c],d=a[e];b[c]=[e,d,d===d&&!F(d)]}return b}function cb(a,b){return function(c){return null==c?!1:
c[a]===b&&(b!==n||a in Object(c))}}function Bc(a){var b=Ac(a);return 1==b.length&&b[0][2]?cb(b[0][0],b[0][1]):function(c){return c===a||zc(c,a,b)}}function ta(a,b){if(y(a))return!1;var c=typeof a;return"number"==c||"symbol"==c||"boolean"==c||null==a||ba(a)?!0:Cc.test(a)||!Dc.test(a)||null!=b&&a in Object(b)}function ua(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new TypeError("Expected a function");var c=function(){var e=arguments,d=b?b.apply(this,e):e[0],l=c.cache;if(l.has(d))return l.get(d);
e=a.apply(this,e);c.cache=l.set(d,e)||l;return e};c.cache=new (ua.Cache||z);return c}function db(a){if("string"==typeof a)return a;if(y(a)){for(var b=-1,c=null==a?0:a.length,e=Array(c);++b<c;)e[b]=db(a[b],b,a);return e+""}if(ba(a))return eb?eb.call(a):"";b=a+"";return"0"==b&&1/a==-Ec?"-0":b}function fb(a,b){return y(a)?a:ta(a,b)?[a]:Fc(null==a?"":db(a))}function ga(a){if("string"==typeof a||ba(a))return a;var b=a+"";return"0"==b&&1/a==-Gc?"-0":b}function gb(a,b){b=fb(b,a);for(var c=0,e=b.length;null!=
a&&c<e;)a=a[ga(b[c++])];return c&&c==e?a:n}function Hc(a,b){return ta(a)&&b===b&&!F(b)?cb(ga(a),b):function(c){var e;e=null==c?n:gb(c,a);e=e===n?void 0:e;var d;if(e===n&&e===b){if(e=null!=c){e=a;e=fb(e,c);for(var l=-1,g=e.length,f=!1;++l<g;){d=ga(e[l]);if(!(f=null!=c&&null!=c&&d in Object(c)))break;c=c[d]}f||++l!=g?e=f:(g=null==c?0:c.length,e=!!g&&qa(g)&&na(d,g)&&(y(c)||Ua(c)))}d=e}else d=R(b,e,3);return d}}function Ic(a){return function(b){return null==b?n:b[a]}}function Jc(a){return function(b){return gb(b,
a)}}t.vseFeatures=t.vseFeatures||{};var hb=t.gatedP||{register:function(a,b,c,e,d){void 0===d&&(d=t.vseFeatures);w.now(a).execute(a+"-prereg",function(l){l||d[b]||(d[b]=!0,e.resolve(c(e)).then(function(){w.now(a).execute(a+"-reg",function(c){c||(w.log("Gated registration failed to register module!","ERROR",a),d[b]=!1)})}))})},declare:function(a,b,c,e){void 0===e&&(e=t.vseFeatures);w.now(a).execute(a+"-prereg",function(d){d||e[b]||(e[b]=!0,w.declare(a,c))})}},M={count:function(a,b){var c=t.ue;c&&c.count("vse:csm:"+
a,b)},emitSushiMetric:function(a,b,c){var e=this;b=b||"https://unagi-na.amazon.com/1/events/com.amazon.eel.vse.metricstest.nexus";c=c||0;if(!(3<=c)){var d=JSON.stringify(a).replace(/\\\\/g,""),l={params:d,paramsFormat:"json",contentType:"application/json; charset\x3dutf-8",error:function(){e.emitSushiMetric(a,b,++c)}},g=navigator.userAgent.match(/iPhone/i),f=!1;w.now("mash").execute("vse-detect-mshop",function(){f=!0});var h=null!==g&&f;w.when("A").execute("Emit-VSE-Metrics",function(a){navigator&&
navigator.sendBeacon&&!h?navigator.sendBeacon(b,d):a.post(b,l)})}}},Kc={makeApplicationSushiPayloadBuilder:function(a,b){return function(c){var e={eventSource:b.eventSource,requestId:b.requestId,sessionId:b.sessionId,placementContext:b.placementContext,marketplaceId:b.marketplaceId,weblabIds:b.weblabIds,clientId:b.clientId,isInternal:b.isInternal.toString(),isRobot:b.isRobot.toString(),pageAsin:b.pageAsin,customerId:b.customerId,sessionType:b.sessionType||1,refMarkers:b.refMarkers,eventId:H(),timestamp:new Date,
userAgentData:navigator.userAgent,titleSessionId:0,videoAsin:0};return{events:[{data:a.$.extend(e,c)}]}}}},Lc={fetchLatestPageState:function(a,b){a.state.replace(b,JSON.parse(a.$("script[type\x3d'a-state'][data-a-state*\x3d"+b+"]").html()));return a.state(b)}},Mc=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a){function b(){}function c(a,b,c){this.fn=a;this.context=b;this.once=c||!1}function e(){this._events=new b;this._eventsCount=0}var d=Object.prototype.hasOwnProperty,
l="~";Object.create&&(b.prototype=Object.create(null),(new b).__proto__||(l=!1));e.prototype.eventNames=function(){var a=[],b,c;if(0===this._eventsCount)return a;for(c in b=this._events)d.call(b,c)&&a.push(l?c.slice(1):c);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(b)):a};e.prototype.listeners=function(a,b){a=this._events[l?l+a:a];if(b)return!!a;if(!a)return[];if(a.fn)return[a.fn];b=0;for(var c=a.length,e=Array(c);b<c;b++)e[b]=a[b].fn;return e};e.prototype.emit=function(a,
b,c,e,d,k){var r=l?l+a:a;if(!this._events[r])return!1;var r=this._events[r],p=arguments.length,t,q;if(r.fn){r.once&&this.removeListener(a,r.fn,n,!0);switch(p){case 1:return r.fn.call(r.context),!0;case 2:return r.fn.call(r.context,b),!0;case 3:return r.fn.call(r.context,b,c),!0;case 4:return r.fn.call(r.context,b,c,e),!0;case 5:return r.fn.call(r.context,b,c,e,d),!0;case 6:return r.fn.call(r.context,b,c,e,d,k),!0}q=1;for(t=Array(p-1);q<p;q++)t[q-1]=arguments[q];r.fn.apply(r.context,t)}else{var v=
r.length,C;for(q=0;q<v;q++)switch(r[q].once&&this.removeListener(a,r[q].fn,n,!0),p){case 1:r[q].fn.call(r[q].context);break;case 2:r[q].fn.call(r[q].context,b);break;case 3:r[q].fn.call(r[q].context,b,c);break;case 4:r[q].fn.call(r[q].context,b,c,e);break;default:if(!t)for(C=1,t=Array(p-1);C<p;C++)t[C-1]=arguments[C];r[q].fn.apply(r[q].context,t)}}return!0};e.prototype.on=function(a,b,e){b=new c(b,e||this);a=l?l+a:a;this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],b]:this._events[a].push(b):
(this._events[a]=b,this._eventsCount++);return this};e.prototype.once=function(a,b,e){b=new c(b,e||this,!0);a=l?l+a:a;this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],b]:this._events[a].push(b):(this._events[a]=b,this._eventsCount++);return this};e.prototype.removeListener=function(a,c,e,d){a=l?l+a:a;if(!this._events[a])return this;if(!c)return 0===--this._eventsCount?this._events=new b:delete this._events[a],this;var k=this._events[a];if(k.fn)k.fn!==c||d&&!k.once||e&&k.context!==
e||(0===--this._eventsCount?this._events=new b:delete this._events[a]);else{for(var n=0,p=[],q=k.length;n<q;n++)(k[n].fn!==c||d&&!k[n].once||e&&k[n].context!==e)&&p.push(k[n]);p.length?this._events[a]=1===p.length?p[0]:p:0===--this._eventsCount?this._events=new b:delete this._events[a]}return this};e.prototype.removeAllListeners=function(a){a?(a=l?l+a:a,this._events[a]&&(0===--this._eventsCount?this._events=new b:delete this._events[a])):(this._events=new b,this._eventsCount=0);return this};e.prototype.off=
e.prototype.removeListener;e.prototype.addListener=e.prototype.on;e.prototype.setMaxListeners=function(){return this};e.prefixed=l;e.EventEmitter=e;"undefined"!==typeof a&&(a.exports=e)}).EventEmitter,Nc=function(){function a(a,c){void 0===c&&(c={refTagRecorderEndPoint:"/gp/mobile/tag/",retryLimit:3});this.A=a;this.config=c}a.prototype.emitRefTag=function(a,c,e){void 0===e&&(e=0);if(!(e>=this.config.retryLimit)){var d=this;this.A.post(this.config.refTagRecorderEndPoint+"ref\x3d"+a+(c.enableAssociateTag?
"?tag\x3dospatk-20\x26linkCode\x3dvse\x26creativeASIN\x3d"+c.productAsin+"\x26ascsubtag\x3d"+c.contentId:""),{error:function(){d.emitRefTag(a,c,++e)}})}};return a}(),p=function(){function a(){}a.POSITIVE_VOTE="positive";a.NEGATIVE_VOTE="negative";a.NONE_VOTE="none";a.EMPTY_STRING="";return a}(),ib=function(){function a(a,c){this.element=a;this.videoVoteConfig=c;this.countsFetched=!1;this.positiveVoteCount=0;this.showPositiveVotes=!1;this.negativeVoteCount=0;this.showNegativeVotes=!1;this.prompt=a.find(".vse-vote-helpful-text");
this.positiveVoteText=a.find(".vse-vote-positive");this.positiveVoteIcon=a.find(".vse-vote-positive-icon");this.negativeVoteText=a.find(".vse-vote-negative");this.negativeVoteIcon=a.find(".vse-vote-negative-icon");this.previousVote=p.EMPTY_STRING}a.prototype.getVoteCount=function(a){return a===p.POSITIVE_VOTE?this.positiveVoteCount:a===p.NEGATIVE_VOTE?this.negativeVoteCount:0};a.prototype.setVoteCount=function(a,c){0>c&&(c=0);a===p.POSITIVE_VOTE?(this.positiveVoteCount=c,this.positiveVoteText.html(String(c))):
a===p.NEGATIVE_VOTE&&(this.negativeVoteCount=c,this.negativeVoteText.html(String(c)));this.element.addClass("updated")};a.prototype.getPreviousVote=function(){return this.previousVote};a.prototype.setPreviousVote=function(a){if(a===p.POSITIVE_VOTE)this.positiveVoteIcon.addClass("hasvoted"),this.negativeVoteIcon.removeClass("hasvoted"),0>=this.getVoteCount(p.POSITIVE_VOTE)&&this.setVoteCount(p.POSITIVE_VOTE,1);else if(a===p.NEGATIVE_VOTE)this.negativeVoteIcon.addClass("hasvoted"),this.positiveVoteIcon.removeClass("hasvoted"),
0>=this.getVoteCount(p.NEGATIVE_VOTE)&&this.setVoteCount(p.NEGATIVE_VOTE,1);else if(a===p.NONE_VOTE)this.negativeVoteIcon.removeClass("hasvoted"),this.positiveVoteIcon.removeClass("hasvoted");else return;this.previousVote=a};a.prototype.setContentId=function(a){this.contentId=a};a.prototype.getContentId=function(){return this.contentId};a.prototype.showOrHide=function(a,c,e,d){this.showPositiveVotes=a;this.showNegativeVotes=c;this.showPrompt=e;a?(this.positiveVoteText.addClass("show"),this.positiveVoteIcon.addClass("show")):
(this.positiveVoteText.removeClass("show"),this.positiveVoteIcon.removeClass("show"));c?(this.negativeVoteText.addClass("show"),this.negativeVoteIcon.addClass("show")):(this.negativeVoteText.removeClass("show"),this.negativeVoteIcon.removeClass("show"));e?this.prompt.addClass("show"):this.prompt.removeClass("show");d?this.element.addClass("show"):this.element.removeClass("show")};a.prototype.updateWithNewVote=function(a){if(a===p.POSITIVE_VOTE||a===p.NEGATIVE_VOTE){var c=a==p.POSITIVE_VOTE?p.NEGATIVE_VOTE:
p.POSITIVE_VOTE,e=this.getVoteCount(a),d=this.getVoteCount(c);a===this.getPreviousVote()?(this.setPreviousVote(p.NONE_VOTE),this.setVoteCount(a,e-1)):this.getPreviousVote()!==p.EMPTY_STRING&&this.getPreviousVote()!==p.NONE_VOTE?(this.setVoteCount(c,d-1),this.setVoteCount(a,e+1),this.setPreviousVote(a)):(this.setPreviousVote(a),this.setVoteCount(a,e+1))}};return a}(),Oc=function(){return function(a,b,c){this.contentId=a;this.positiveVoteCount=b;this.negativeVoteCount=c}}(),jb=function(){return function(a){this.name=
"InvalidArugmentsException";this.message=a}}(),kb=function(){function a(a,c){this.A=a;this.videoVoteConfig=c}a.prototype.createFromContent=function(a,c){a=this.A.$("#"+a).find("[.vse-video-votes][data-contentid\x3d"+c+"]");return new ib(a,this.videoVoteConfig)};a.prototype.createFromSelector=function(a){var c=this.A.$(""+a);if(!c)throw new jb("VideoVoteContainerFactory can not find selector by the name of "+a+".");return new ib(c,this.videoVoteConfig)};a.prototype.sendVoteToRemote=function(a,c,e){var d=
this,l=null,g=!1;this.videoVoteConfig.forceTreatment&&(l=[{name:"VSE_VIDEOVOTES_IMAGE_BLOCK_195012",assignment:"T1"}],g=!0);var f={contentId:e,placement:this.videoVoteConfig.placementContext,positive:a,negative:c,requestId:this.videoVoteConfig.requestId,sessionId:this.videoVoteConfig.sessionId,page:this.videoVoteConfig.page,experimentWeblab:this.videoVoteConfig.experimentWeblab,weblabContext:l,bypassLogin:g};return new this.videoVoteConfig.dependencies.promise(function(a,b){d.A.ajax("/vap/ew/subcomponent/votes/writing",
{params:f,paramsFormat:"json",crossDomain:!0,method:"POST",contentType:"application/json",success:function(b){a(b)},error:function(a){M.count("votecast:failed",1);b(a)}})})};a.prototype.fetchVoteHistory=function(a){var c=this,e=null,d=!1;this.videoVoteConfig.forceTreatment&&(e=[{name:"VSE_VIDEOVOTES_IMAGE_BLOCK_195012",assignment:"T1"}],d=!0);var l={contentId:a,placement:this.videoVoteConfig.placementContext,requestId:this.videoVoteConfig.requestId,sessionId:this.videoVoteConfig.sessionId,page:this.videoVoteConfig.page,
experimentWeblab:this.videoVoteConfig.experimentWeblab,weblabContext:e,bypassLogin:d};return new this.videoVoteConfig.dependencies.promise(function(a,b){c.A.ajax("/vap/ew/subcomponent/votes/status",{params:l,paramsFormat:"json",crossDomain:!0,method:"POST",contentType:"application/json",success:function(b){a(b)},error:function(a){M.count("votehistory:failed",1);b(a)}})})};a.prototype.convertPayloadToVoteData=function(a){var c=[],e;for(e in a)a.hasOwnProperty(e)&&c.push(new Oc(e,a[e].positive,a[e].negative));
return c};a.prototype.fetchVoteCounts=function(a){var c=this,e=null,d=!1;this.videoVoteConfig.forceTreatment&&(e=[{name:"VSE_VIDEOVOTES_IMAGE_BLOCK_195012",assignment:"T1"}],d=!0);var l={contentIds:a,placement:this.videoVoteConfig.placementContext,requestId:this.videoVoteConfig.requestId,sessionId:this.videoVoteConfig.sessionId,page:this.videoVoteConfig.page,experimentWeblab:this.videoVoteConfig.experimentWeblab,weblabContext:e,bypassLogin:d};return new this.videoVoteConfig.dependencies.promise(function(a,
b){c.A.ajax("/vap/ew/subcomponent/votes",{params:l,paramsFormat:"json",crossDomain:!0,method:"POST",contentType:"application/json",success:function(e){e=c.convertPayloadToVoteData(e);0<e.length&&a(e);b(e)},error:function(a){M.count("votegetcounts:failed",1);b(a)}})})};return a}(),Pc=function(){function a(a,c,e,d,l){var g=this;this.carouselFramework=c;this.A=e;this.contentCarouselConfig=d;this.deps=l;this.vseAssets=[];this.voteContainerIndex={};this.carouselPageSize=0;this.carouselPageNumber=1;var f=
e.$;this.activeCard=f([]);var h=this;this.auiCarousel=a;this.refTagRecorder=new Nc(e);f("#"+d.carouselName).find(".a-carousel-heading").after(f("#"+d.carouselName).find(".vse-upload-link").removeClass("aok-hidden"));f("#"+d.carouselName+" .vse-video-item").each(function(){h.vseAssets.push(h.getAssetSpec(f(this)))});this.vseAssetIndex=this.deps._keyBy(this.vseAssets,"contentId");d.videoVoteConfig&&(this.videoVoteContainerFactory=new kb(e,d.videoVoteConfig),e.each(this.vseAssetIndex,function(a){g.voteContainerIndex[a.contentId]=
g.videoVoteContainerFactory.createFromContent(g.contentCarouselConfig.carouselName,a.contentId);a.videoVoteContainer=g.voteContainerIndex[a.contentId]}));d.showAdPlacement||f("#"+d.carouselName).delegate(".a-carousel-card a","click",function(a){if(f(this).closest("li").hasClass("active"))a.preventDefault();else{var b=h.vseAssetIndex[f(this).closest("li").find(".vse-video-item").data("asin")];h.markPlaying(b);b.eventTimestamp=Date.now();e.trigger("vse:contentCarousel:"+d.carouselName+":click",b);var c=
h.findIndex(b);h.emitRefTag(c,h.contentCarouselConfig.refTagPrefix,b);d.isPreventDefault&&a.preventDefault()}});f("#"+d.carouselName+" .vse-carousel-item").each(function(a){var b=f(this);if(d.showAdPlacement){b.attr("href",b.data("redirect-url")+"?ref\x3ddp_vse_rva1_pc");var c=b.parent().data("asin");b.parent().delegate(".vse-carousel-item","click",function(a){e.trigger("vse:rva:carousel:"+d.carouselName+":productClick",{relatedProductAsin:c,name:"vse.related_video_advertising.productClick"})})}else b.attr("href",
b.data("redirect-url")+"?ref\x3d"+h.contentCarouselConfig.refTagPrefix+a)});e.off("a:carousel:"+d.carouselName+":change:pageSize");e.off("a:carousel:"+d.carouselName+":change:pageNumber");e.on("a:carousel:"+d.carouselName+":change:pageSize",function(){g.carouselPageSize=g.auiCarousel.getAttr("pageSize");g.activeAsset&&g.rotateTo(g.activeAsset)});e.trigger("a:carousel:"+d.carouselName+":change:pageSize");e.on("a:carousel:"+d.carouselName+":change:pageNumber",function(){g.carouselPageNumber=g.auiCarousel.getAttr("pageNumber");
e.trigger("a:carousel:"+d.carouselName+":scrollCarousel",g.carouselPageNumber,g.carouselPageSize)});e.trigger("a:carousel:"+d.carouselName+":updatePageIndex",this.carouselPageNumber,this.carouselPageSize)}a.prototype.getplaylist=function(){return this.vseAssets.slice()};a.prototype.getActiveAsset=function(){return this.activeAsset};a.prototype.scrollTo=function(){this.A.$("#"+this.contentCarouselConfig.carouselName).animate({scrollTop:this.activeCard.offset().top-this.A.$("#"+this.contentCarouselConfig.carouselName).offset().top+
this.A.$("#"+this.contentCarouselConfig.carouselName).scrollTop()})};a.prototype.rotateTo=function(a){this.markPlaying(a);this.contentCarouselConfig.isVerticalScroll&&this.scrollTo();0!==this.carouselPageSize&&(a=this.findIndex(a),-1!==a&&(a=Math.floor(a/this.carouselPageSize)+1,this.carouselPageNumber!=a&&this.auiCarousel.gotoPage(a)))};a.prototype.changeStartingCardTo=function(a){var c=this;this.listOffset=this.findIndex(a);if(!this.contentCarouselConfig.isVerticalScroll){this.carouselFramework.initializeAll();
this.carouselFramework.onInit(""+this.contentCarouselConfig.carouselName,function(){c.rotateTo(a)});var e=this;this.A.$("#"+this.contentCarouselConfig.carouselName+" .vse-carousel-item").each(function(a){var b=e.A.$(this);a=(a-e.listOffset+e.vseAssets.length)%e.vseAssets.length;b.attr("href",b.data("redirect-url")+"?ref\x3d"+e.contentCarouselConfig.refTagPrefix+a)})}};a.prototype.markPlaying=function(a){this.activeAsset=a;this.activeCard.removeClass("active");this.activeCard=this.vseAssetIndex[a.contentId].$el.closest("li").addClass("active")};
a.prototype.findIndex=function(a){return this.vseAssets.indexOf(this.vseAssetIndex[a.contentId])};a.prototype.emitRefTag=function(a,c,e){0<this.listOffset&&(a=(a-this.listOffset+this.vseAssets.length)%this.vseAssets.length);this.refTagRecorder.emitRefTag(c+a,e)};a.prototype.destroy=function(){this.A.$("#"+this.contentCarouselConfig.carouselName+" .a-carousel-card.active").removeClass("active")};a.prototype.updateVotingElements=function(a,c){var e=this;this.A.each(a,function(a){var b=e.vseAssetIndex[a.contentId].videoVoteContainer;
b.setVoteCount(p.POSITIVE_VOTE,a.positiveVoteCount);b.setVoteCount(p.NEGATIVE_VOTE,a.negativeVoteCount);b.countsFetched=!0;b.showOrHide(c,c,!1,c)})};a.prototype.getAssetSpec=function(a){var c=a.data(),e=a.find(".vse-video-image").data("img"),e=e.replace("SR160,90_BG0,0,0_PKvse-overlay-play2","").replace("SR320,180_BG0,0,0_PKvse-overlay-play2","");return{contentId:c.asin,title:c.title,vendorName:c.vendorName,vendorCode:c.vendorCode,referenceUrl:c.referenceUrl,referenceLinkTitle:c.referenceTitle,videoUrl:c.videoUrl,
$el:a,duration:c.duration,imageUrl:e,sponsored:c.sponsored,enableAssociateTag:c.enableAssociateTag,videoVoteContainer:this.voteContainerIndex[c.asin],productAsin:c.productAsin}};return a}(),Qc=function(){function a(a,c,e){this.carouselFramework=a;this.A=c;this.deps=e}a.prototype.create=function(a){var c=this.carouselFramework.getCarousel(this.A.$("#"+a.carouselName));if(!c)throw new jb("Carousel framework can not find carousel by the name of "+a.carouselName+".");return new Pc(c,this.carouselFramework,
this.A,a,this.deps)};return a}(),S=function(){function a(){}a.ELM_OTHER_OPTION=".vse-fb-other";a.ELM_RBTN_CHECKED='input[name\x3d"FeedbackInput"]:checked';a.ELM_CHECKBOX_CHECKED='input[type\x3d"checkbox"]:checked';a.DATA_REQ_MSG="requiredcommentmessage";a.DATA_OPTIONAL_MSG="optionalcommentmessage";a.ATTR_NAME_PLACEHOLDER="placeholder";return a}(),lb=n,mb=n;w.when("a-sheet").execute(function(a){lb=a});w.when("a-popover").execute(function(a){mb=a});var nb={getBottomSheet:function(){return lb},getPopoverFactory:function(){return mb}},
Rc=function(){function a(a){var c=this;this.config=a;this.activeVideoSource=this.activeVideo="VIDEO_NOT_SELECTED";this.isOtherSelected=this.registered=!1;this.setBottomSheetHeight=!0;this.internalRejectedVideo=!1;this.defaultBottomSheetHeight=400;this._submitErrorCallback=function(a){c.A.trigger("vse:"+c.id+":feedback:submitted:error")};this._submitSuccessCallback=function(a){c.A.trigger("vse:"+c.id+":feedback:submitted:success")};this.A=a.A;this.pageStateName=a.pageStateName;this.buttonApi=a.buttonApi;
this.id=this.config.id;this.A.state.parse();this.A.state.replace(this.pageStateName,JSON.parse(this.A.$("script[type\x3d'a-state'][data-a-state*\x3d"+this.pageStateName+"]").html()));a=this.A.state(this.pageStateName);this.feedbackSection=this.A.$("#"+this.id);this.feedbackForm=this.A.$("#"+this.id+"-form");this.commentBox=this.A.$("#"+this.id+"-comment-box");this.requiredCommentMessage=this.commentBox.parent().data(S.DATA_REQ_MSG);this.optionalCommentMessage=this.commentBox.parent().data(S.DATA_OPTIONAL_MSG);
this.thankYouSection=this.A.$("#"+this.id+"-ty-container");this.submitButton=this.buttonApi("#"+this.id+"-btn-submit");this.cancelButton=this.A.$("#"+this.id+"-btn-cancel");a&&this.validateFormElements()&&(this.isMobile=a.isMobile,this.endpoint=a.feedbackEndpoint,this.isInternal=a.isInternal,this.marketplaceId=a.marketplaceId,this.pageAsin=a.pageAsin,this.customerId=a.customerId,this.bottomSheetFactory=nb.getBottomSheet(),this.popoverFactory=nb.getPopoverFactory(),this.registered||(this.A.declarative(this.id+
"-options-choose","click",function(a){c.activeSelectionEvent=a;c.A.$(a)&&c.A.$(a.$target)&&(c.currentViolations=c.A.$(a.$target).closest(".vse-fb-option").find("input").val());c.otherSection=a.$target.closest(S.ELM_OTHER_OPTION);1===c.otherSection.length?(c.updatePlaceholderString(c.requiredCommentMessage),c.isOtherSelected=!0):(c.isOtherSelected=!1,c.updatePlaceholderString(c.optionalCommentMessage));c.submitButton.enable()}),this.A.declarative(this.id+"-andoncord-check","change",function(a){c.internalRejectedVideo=
a.$target.is(":checked")}),this.A.declarative(this.id+"-btn-close","click",function(){return c.closeFeedbackForm()}),this.A.declarative(this.id+"-btn-cancel","click",function(){return c.cancelFeedbackForm()}),this.A.declarative(this.id+"-btn-submit","click",function(){return c.submitFeedback()}),this.A.on("a:sheet:afterShow:"+this.id+"-sheet",function(a){c.defaultBottomSheetHeight=.75*c.A.$(t).height();c.changeBottomSheetHeight(a,c.defaultBottomSheetHeight);c.showFeedbackForm()}),this.A.on("a:sheet:afterHide:"+
this.id+"-sheet",function(a){c.resetFeedbackForm().hideThankYou();c.A.trigger("vse:"+c.id+":feedback:hidden")}),this.A.on("a:popover:afterShow:"+this.id+"-popover",function(a){c.showFeedbackForm()}),this.A.on("a:popover:afterHide:"+this.id+"-popover",function(a){c.hideFeedbackForm()}),this.registered=!0))}a.prototype.showFeedbackForm=function(a){this.A.trigger("vse:"+this.id+":feedback:shown");return this};a.prototype.hideFeedbackForm=function(){this.isMobile?this.getAndSetBottomSheetInstance()&&
this.bottomSheetInstance.hide():this.getAndSetPopoverInstance()&&this.popoverInstance.hide();this.resetFeedbackForm().hideThankYou();this.A.trigger("vse:"+this.id+":feedback:hidden");return this};a.prototype.setActiveVideoAndSource=function(a,c){this.activeVideo=a;this.activeVideoSource=c};a.prototype.submitFeedback=function(){if(this.isOtherSelected&&this.commentBox&&""===this.commentBox.val())this.commentBox.focus();else{var a={events:[{data:{feedback:{additionalComments:this.commentBox?this.commentBox.val():
"",playerVersion:"",asin:this.pageAsin,videoId:this.activeVideo,videoSource:this.activeVideoSource,violations:this.currentViolations,url:document.location.href,userAgent:t.navigator&&t.navigator.userAgent?t.navigator.userAgent:"window.navigator.userAgent not supported",feedbackTime:this.A.now(),customerId:this.customerId,isInternal:this.isInternal,feedbackWidgetVersion:"2",marketplace:this.marketplaceId,internalRejectedVideo:this.internalRejectedVideo}}}]};this.A.$.ajax({url:this.endpoint,data:JSON.stringify(a),
type:"POST",contentType:"application/json; charset\x3dutf-8",error:this._submitErrorCallback,success:this._submitSuccessCallback});this.A.trigger("vse:"+this.id+":feedback:submitted");this.resetFeedbackForm().showThankYou()}};a.prototype.cancelFeedbackForm=function(){this.resetFeedbackForm();this.A.trigger("vse:"+this.id+":feedback:cancelled")};a.prototype.closeFeedbackForm=function(){this.hideFeedbackForm();this.A.trigger("vse:"+this.id+":feedback:closed")};a.prototype.resetFeedbackForm=function(){this.submitButton.disable();
this.feedbackSection.find(S.ELM_RBTN_CHECKED).each(function(){this.checked=!1});this.updatePlaceholderString(this.optionalCommentMessage);this.commentBox.val("");this.internalRejectedVideo=!1;this.feedbackSection.find(S.ELM_CHECKBOX_CHECKED).each(function(){this.checked=!1});return this};a.prototype.showThankYou=function(){this.feedbackForm.fadeOut(200);this.thankYouSection.addClass("show").removeClass("aok-hidden").fadeIn(400);this.A.trigger("vse:"+this.id+":thank-you:shown");return this};a.prototype.hideThankYou=
function(){this.feedbackForm.fadeIn(10);this.thankYouSection.addClass("aok-hidden").removeClass("show").fadeOut(10);this.A.trigger("vse:"+this.id+":thank-you:hidden");return this};a.prototype.validateFormElements=function(){return this.feedbackSection.length&&this.commentBox.length&&this.thankYouSection.length&&this.submitButton.size()&&this.cancelButton.length&&this.feedbackForm.length};a.prototype.updatePlaceholderString=function(a){this.commentBox.attr(S.ATTR_NAME_PLACEHOLDER,a)};a.prototype.changeBottomSheetHeight=
function(a,c){this.setBottomSheetHeight&&(a.sheet.changeHeight({duration:.3,height:c}),this.setBottomSheetHeight=!1)};a.prototype.getAndSetBottomSheetInstance=function(){return this.bottomSheetFactory?this.bottomSheetInstance?this.bottomSheetInstance:this.bottomSheetInstance=this.bottomSheetFactory.get(this.id+"-sheet"):n};a.prototype.getAndSetPopoverInstance=function(){return this.popoverFactory?this.popoverInstance?this.popoverInstance:this.popoverInstance=this.popoverFactory.get(this.id+"-popover"):
n};return a}(),Sc=function(){function a(a){this.config=a;this.feedbackWidgets={}}a.prototype.create=function(a,c){c=this.feedbackWidgets[a]||new Rc({id:a,pageStateName:c,A:this.config.A,buttonApi:this.config.buttonApi});return this.feedbackWidgets[a]=c};a.prototype.get=function(a){return this.feedbackWidgets[a]};return a}(),Ba=Math.max,ob="object"==typeof global&&global&&global.Object===Object&&global,Tc="object"==typeof self&&self&&self.Object===Object&&self,x=ob||Tc||Function("return this")(),G=
x.Symbol,pb=Object.prototype,Fb=pb.hasOwnProperty,Gb=pb.toString,T=G?G.toStringTag:n,Hb=Object.prototype.toString,Ca=G?G.toStringTag:n,va=x["__core-js_shared__"],Ea=function(){var a=/[^.]+$/.exec(va&&va.keys&&va.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Ib=Function.prototype.toString,Kb=/^\[object .+?Constructor\]$/,Jb=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,
"$1.*?")+"$"),ha=function(){try{var a=J(Object,"defineProperty");a({},"",{});return a}catch(b){}}(),Lb=Date.now,Ka=Fa(ha?function(a,b){return ha(a,"toString",{configurable:!0,enumerable:!1,value:Eb(b),writable:!0})}:Z),W=J(x,"WeakMap"),ia=W&&new W,qb=ia?function(a,b){ia.set(a,b);return a}:Z,rb=Object.create,la=function(){function a(){}return function(b){if(!F(b))return{};if(rb)return rb(b);a.prototype=b;b=new a;a.prototype=n;return b}}(),Nb=Math.max,Ob=Math.max;P.prototype=la(ma.prototype);P.prototype.constructor=
P;var Na=ia?function(a){return ia.get(a)}:Pb,Ma={},Xb=Object.prototype.hasOwnProperty;Q.prototype=la(ma.prototype);Q.prototype.constructor=Q;var y=Array.isArray,Qb=Object.prototype.hasOwnProperty;aa.prototype=ma.prototype;aa.prototype.constructor=aa;var Oa=Fa(qb),Ub=/\{\n\/\* \[wrapped with (.+)\] \*/,Vb=/,? & /,Wb=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Tb=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Yb=/^(?:0|[1-9]\d*)$/,
Zb=Math.min,Uc=Math.min,Pa=0/0,dc=/^\s+|\s+$/g,hc=/^[-+]0x[0-9a-f]+$/i,ec=/^0b[01]+$/i,fc=/^0o[0-7]+$/i,gc=parseInt,Ra=1/0,sb=Math.max,wa=function(a,b){return Ka(Db(a,b,Z),a+"")}(function(a,b){var c=V(b,wa.placeholder),e=a,d=32,l=n,g=b,f=c,h=void 0,p=void 0;b=d&2;if(!b&&"function"!=typeof e)throw new TypeError("Expected a function");a=g?g.length:0;a||(d&=-97,g=f=n);h=h===n?h:sb(Qa(h),0);p=p===n?p:Qa(p);a-=f?f.length:0;if(d&64)var m=g,q=f,g=f=n;c=b?n:Na(e);m=[e,d,l,g,f,m,q,void 0,h,p];if(c&&(l=m[1],
e=c[1],d=l|e,q=128==e&&8==l||128==e&&256==l&&m[7].length<=c[8]||384==e&&c[7].length<=c[8]&&8==l,131>d||q)){e&1&&(m[2]=c[2],d|=l&1?0:4);if(l=c[3])q=m[3],m[3]=q?Ga(q,l,c[4]):l,m[4]=q?V(m[3],"__lodash_placeholder__"):c[4];if(l=c[5])q=m[5],m[5]=q?Ha(q,l,c[6]):l,m[6]=q?V(m[5],"__lodash_placeholder__"):c[6];(l=c[7])&&(m[7]=l);e&128&&(m[8]=null==m[8]?c[8]:Uc(m[8],c[8]));null==m[9]&&(m[9]=c[9]);m[0]=c[0];m[1]=d}e=m[0];d=m[1];l=m[2];g=m[3];f=m[4];p=m[9]=m[9]===n?b?0:e.length:sb(m[9]-a,0);!p&&d&24&&(d&=-25);
b=d&&1!=d?8==d||16==d?ac(e,d,p):32!=d&&33!=d||f.length?oa.apply(n,m):bc(e,d,l,g):Mb(e,d,l);return Ja((c?qb:Oa)(b,m),e,d)});wa.placeholder={};var Vc=function(a){return function(b,c,d){var k=-1,l=Object(b);d=d(b);for(var g=d.length;g--;){var f=d[a?g:++k];if(!1===c(l[f],f,l))break}return b}}(),tb=Object.prototype,Wc=tb.hasOwnProperty,Xc=tb.propertyIsEnumerable,Ua=Sa(function(){return arguments}())?Sa:function(a){return K(a)&&Wc.call(a,"callee")&&!Xc.call(a,"callee")},ub="object"==typeof exports&&exports&&
!exports.nodeType&&exports,vb=ub&&"object"==typeof module&&module&&!module.nodeType&&module,wb=vb&&vb.exports===ub?x.Buffer:n,ra=(wb?wb.isBuffer:n)||jc,q={};q["[object Float32Array]"]=q["[object Float64Array]"]=q["[object Int8Array]"]=q["[object Int16Array]"]=q["[object Int32Array]"]=q["[object Uint8Array]"]=q["[object Uint8ClampedArray]"]=q["[object Uint16Array]"]=q["[object Uint32Array]"]=!0;q["[object Arguments]"]=q["[object Array]"]=q["[object ArrayBuffer]"]=q["[object Boolean]"]=q["[object DataView]"]=
q["[object Date]"]=q["[object Error]"]=q["[object Function]"]=q["[object Map]"]=q["[object Number]"]=q["[object Object]"]=q["[object RegExp]"]=q["[object Set]"]=q["[object String]"]=q["[object WeakMap]"]=!1;var xb="object"==typeof exports&&exports&&!exports.nodeType&&exports,yb=xb&&"object"==typeof module&&module&&!module.nodeType&&module,xa=yb&&yb.exports===xb&&ob.process,ja;a:{try{ja=xa&&xa.binding&&xa.binding("util");break a}catch(a){}ja=void 0}var zb=ja&&ja.isTypedArray,Va=zb?lc(zb):kc,mc=Object.prototype.hasOwnProperty,
nc=Object.prototype,pc=function(a,b){return function(c){return a(b(c))}}(Object.keys,Object),oc=Object.prototype.hasOwnProperty,rc=function(a,b){return function(c,d){if(null==c)return c;if(!Ta(c))return a(c,d);for(var k=c.length,l=b?k:-1,g=Object(c);(b?l--:++l<k)&&!1!==d(g[l],l,g););return c}}(function(a,b){return a&&Vc(a,b,ca)}),Yc=Array.prototype.splice;D.prototype.clear=function(){this.__data__=[];this.size=0};D.prototype["delete"]=function(a){var b=this.__data__;a=da(b,a);if(0>a)return!1;a==b.length-
1?b.pop():Yc.call(b,a,1);--this.size;return!0};D.prototype.get=function(a){var b=this.__data__;a=da(b,a);return 0>a?n:b[a][1]};D.prototype.has=function(a){return-1<da(this.__data__,a)};D.prototype.set=function(a,b){var c=this.__data__,d=da(c,a);0>d?(++this.size,c.push([a,b])):c[d][1]=b;return this};var X=J(x,"Map"),Y=J(Object,"create"),Zc=Object.prototype.hasOwnProperty,$c=Object.prototype.hasOwnProperty;L.prototype.clear=function(){this.__data__=Y?Y(null):{};this.size=0};L.prototype["delete"]=function(a){a=
this.has(a)&&delete this.__data__[a];this.size-=a?1:0;return a};L.prototype.get=function(a){var b=this.__data__;return Y?(a=b[a],"__lodash_hash_undefined__"===a?n:a):Zc.call(b,a)?b[a]:n};L.prototype.has=function(a){var b=this.__data__;return Y?b[a]!==n:$c.call(b,a)};L.prototype.set=function(a,b){var c=this.__data__;this.size+=this.has(a)?0:1;c[a]=Y&&b===n?"__lodash_hash_undefined__":b;return this};z.prototype.clear=function(){this.size=0;this.__data__={hash:new L,map:new (X||D),string:new L}};z.prototype["delete"]=
function(a){a=ea(this,a)["delete"](a);this.size-=a?1:0;return a};z.prototype.get=function(a){return ea(this,a).get(a)};z.prototype.has=function(a){return ea(this,a).has(a)};z.prototype.set=function(a,b){var c=ea(this,a),d=c.size;c.set(a,b);this.size+=c.size==d?0:1;return this};E.prototype.clear=function(){this.__data__=new D;this.size=0};E.prototype["delete"]=function(a){var b=this.__data__;a=b["delete"](a);this.size=b.size;return a};E.prototype.get=function(a){return this.__data__.get(a)};E.prototype.has=
function(a){return this.__data__.has(a)};E.prototype.set=function(a,b){var c=this.__data__;if(c instanceof D){var d=c.__data__;if(!X||199>d.length)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new z(d)}c.set(a,b);this.size=c.size;return this};fa.prototype.add=fa.prototype.push=function(a){this.__data__.set(a,"__lodash_hash_undefined__");return this};fa.prototype.has=function(a){return this.__data__.has(a)};var Ya=x.Uint8Array,Ab=G?G.prototype:n,sa=Ab?Ab.valueOf:n,ad=Object.prototype.propertyIsEnumerable,
Bb=Object.getOwnPropertySymbols,bb=Bb?function(a){if(null==a)return[];a=Object(a);return wc(Bb(a),function(b){return ad.call(a,b)})}:xc,yc=Object.prototype.hasOwnProperty,ya=J(x,"DataView"),za=J(x,"Promise"),Aa=J(x,"Set"),bd=I(ya),cd=I(X),dd=I(za),ed=I(Aa),fd=I(W),N=O;if(ya&&"[object DataView]"!=N(new ya(new ArrayBuffer(1)))||X&&"[object Map]"!=N(new X)||za&&"[object Promise]"!=N(za.resolve())||Aa&&"[object Set]"!=N(new Aa)||W&&"[object WeakMap]"!=N(new W))N=function(a){var b=O(a);if(a=(a="[object Object]"==
b?a.constructor:n)?I(a):"")switch(a){case bd:return"[object DataView]";case cd:return"[object Map]";case dd:return"[object Promise]";case ed:return"[object Set]";case fd:return"[object WeakMap]"}return b};var $a=N,ab=Object.prototype.hasOwnProperty,Dc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cc=/^\w*$/;ua.Cache=z;var gd=/^\./,hd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,id=/\\(\\)?/g,Fc=function(a){a=ua(a,function(a){500===b.size&&
b.clear();return a});var b=a.cache;return a}(function(a){var b=[];gd.test(a)&&b.push("");a.replace(hd,function(a,d,k,l){b.push(k?l.replace(id,"$1"):d||a)});return b}),Ec=1/0,Cb=G?G.prototype:n,eb=Cb?Cb.toString:n,Gc=1/0,jd=function(a,b){return function(c,d){var k=y(c)?ic:qc,l=b?b():{};d="function"==typeof d?d:null==d?Z:"object"==typeof d?y(d)?Hc(d[0],d[1]):Bc(d):ta(d)?Ic(ga(d)):Jc(d);return k(c,a,d,l)}}(function(a,b,c){"__proto__"==c&&ha?ha(a,c,{configurable:!0,enumerable:!0,value:b,writable:!0}):
a[c]=b}),v=function(){function a(){}a.WIDTH_ASPECT_RATIO=1.77;a.EMPTY_STRING="";a.ibMetadata=".vse-ib-metadata";a.metaDataContainer=".vse-md-container";a.metaDataCustomerProfile=".vse-md-customer-profile";a.videoInformationContainer=".vse-md-container .vse-md-title .vse-title";a.titlePrefixContainer=".vse-md-container .vse-md-title .vse-title-prefix";a.currentItemPrefixContainer=".vse-video-title-prefix-text";a.reviewStarContainer=".vse-md-container .vse-reviewstar-container";a.reviewTextContainer=
".vse-md-container .vse-reviewText-container";a.ceVideoElement="vse-content-experiment-video";a.ceMobileMovableContainer=".vse-vb-movable-container";a.ceMobileVotesFeedbackContainer=".vse-v-f-container";a.vendorCRCode="AOD60";return a}(),d={vars:{A:{},isMobile:!1,relatedVideosCarousel:null,newHref:"",newrefTag:"dp_vse_ib",activeVideoVoteContainer:null,sushiMetricsConfig:null,buildSushiPayload:null,videoVoteContainerFactory:null,isContentExperiment:!1,showVotes:!1,forceMobileResize:!1,ibCarouselName:"#vse-ib-rvs"},
resizeMobilePopover:function(){var a=d.vars.A.$,b=a(t).height();if(d.vars.isContentExperiment||d.vars.forceMobileResize){var c=a(".vse-mobile-fixed-container").outerHeight(!0);a(".vse-vb-movable-container").css({"max-height":b-c,top:c});a(d.vars.ibCarouselName).removeAttr("style")}else{var c=a(".vse-airy-container").outerHeight(!0)+a(".immersive-view-back-button").outerHeight(!0)+a(".vse-md-container").outerHeight(!0),e=a(".vse-mobile-fixed-container").outerHeight(!0);a(d.vars.ibCarouselName).css({"max-height":b-
e,top:c})}},resizeImmersiveView:function(){var a=d.vars.A.$("#ivVideoBlock"),b=d.vars.A.$("#ivVideosTab").height();a.css("height",b);var c=a.find(".vse-video-block"),e=b-d.getDimension(a,"padding-top")-d.getDimension(a,"padding-bottom");c.css({"max-height":b,overflow:"hidden"});b=a.find(".vse-airy-container");a=a.find(".vse-ib-metadata");e=Math.floor(e-d.getDimension(a,"height"));c=Math.floor(e*v.WIDTH_ASPECT_RATIO);b.css({"max-height":e,"max-width":c});a.css("max-width",c)},updateCustomerProfileAndReview:function(a){var b=
d.vars.A.$(d.vars.ibCarouselName).find('[data-asin\x3d"'+a.contentId+'"]'),c=d.vars.A.$(v.metaDataContainer).find(v.metaDataCustomerProfile);d.vars.A.$(v.reviewStarContainer).children().remove();d.vars.A.$(v.reviewTextContainer).children().remove();d.vars.A.$(v.titlePrefixContainer).text("");c.children().remove();if(b.find(".vse-review-stars").length){var e=b.find(".vse-review-stars").clone(),k=b.find(".vse-review-text").clone();d.vars.A.$(v.reviewStarContainer).append(e);d.vars.A.$(v.reviewTextContainer).prepend(k);
d.vars.isMobile&&d.vars.A.$(v.titlePrefixContainer).text(b.find(v.currentItemPrefixContainer).text())}0<b.find(".vse-video-customer-profile").length?(d.vars.A.$(v.ibMetadata).removeClass("vse-ib-profile-hidden"),a=b.find(".vse-video-customer-profile").clone().removeClass("aok-hidden vse-hidden"),c.append(a),c.find(".a-profile-avatar img").attr("src",b.find(".a-profile-avatar img").attr("data-src")),d.vars.A.$(v.ibMetadata).find(".vse-md-vendor-name").hide()):(d.vars.A.$(v.ibMetadata).addClass("vse-ib-profile-hidden"),
d.vars.A.$(v.ibMetadata).find(".vse-md-vendor-name").text(a.vendorName).show())},updateMediaInfo:function(a){d.vars.A.$(v.videoInformationContainer).text(a.title);d.vars.A.$(v.ibMetadata).hasClass("vse-ib-customer-review")&&d.updateCustomerProfileAndReview(a);d.vars.showVotes&&(d.updateActiveVideoVoteContainer(a),d.vars.activeVideoVoteContainer.showOrHide(!0,!0,!0,!0));d.vars.isMobile?d.resizeMobilePopover():d.resizeImmersiveView()},updateActiveVideoVoteContainer:function(a){d.vars.showVotes&&(d.vars.activeVideoVoteContainer.setContentId(a.contentId),
d.vars.activeVideoVoteContainer.setVoteCount(p.POSITIVE_VOTE,a.videoVoteContainer.getVoteCount(p.POSITIVE_VOTE)),d.vars.activeVideoVoteContainer.setVoteCount(p.NEGATIVE_VOTE,a.videoVoteContainer.getVoteCount(p.NEGATIVE_VOTE)),d.fetchAndUpdateVotingCount(),d.fetchAndUpdateVotingHistory())},castVote:function(a){if(d.vars.videoVoteContainerFactory&&d.vars.videoVoteContainerFactory.videoVoteConfig){var b=d.vars.activeVideoVoteContainer.getPreviousVote(),c=a===p.POSITIVE_VOTE&&b!=p.POSITIVE_VOTE,b=a===
p.NEGATIVE_VOTE&&b!=p.NEGATIVE_VOTE;d.vars.activeVideoVoteContainer.updateWithNewVote(a);d.vars.videoVoteContainerFactory.sendVoteToRemote(c,b,d.vars.activeVideoVoteContainer.getContentId()).then(function(b){d.vars.videoVoteContainerFactory&&d.vars.videoVoteContainerFactory.videoVoteConfig&&d.vars.A.trigger(d.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-cast",a)},function(b){M.count("ibiv.videovote.votecastfailure",1);d.vars.activeVideoVoteContainer.updateWithNewVote(a)})}},
getDimension:function(a,b){a=parseInt(a.css(b),10);return isNaN(a)?0:a},isDefined:function(a){return"undefined"!==typeof a&&null!==a},appendDivider:function(a,b){var c=d.vars.A.$(".vse-video-block .vse-ib-divider-header-string").text()+(" ("+a+")");d.vars.A.$(".vse-video-block .vse-ib-divider-header-string").text(c);c=d.vars.A.$(".vse-video-block .vse-ib-divider-header-string");b.length>a&&d.vars.A.$(b[b.length-a-1]).append(c);c.removeClass("aok-hidden")},fetchAndUpdateVotingHistory:function(){var a=
d.vars.relatedVideosCarousel.getActiveAsset();a.videoVoteContainer&&(a.videoVoteContainer.getPreviousVote()!==p.EMPTY_STRING?d.vars.activeVideoVoteContainer.setPreviousVote(a.videoVoteContainer.getPreviousVote()):d.vars.videoVoteContainerFactory.fetchVoteHistory(a.contentId).then(function(b){d.vars.videoVoteContainerFactory===n||b!==p.POSITIVE_VOTE&&b!==p.NEGATIVE_VOTE&&b!==p.NONE_VOTE||(d.vars.activeVideoVoteContainer.setPreviousVote(b),a.videoVoteContainer.setPreviousVote(b))},function(a){M.count("ibiv.videovote.votehistoryfailure",
1)}))},fetchAndUpdateVotingCount:function(){var a=d.vars.relatedVideosCarousel.getActiveAsset();a.videoVoteContainer&&!a.videoVoteContainer.countsFetched&&d.vars.videoVoteContainerFactory.fetchVoteCounts([a.contentId]).then(function(b){d.vars.relatedVideosCarousel.updateVotingElements(b,!1);for(var c=0;c<b.length;c++)if(b[c].contentId===a.contentId){a.videoVoteContainer.setVoteCount(p.POSITIVE_VOTE,b[c].positiveVoteCount);a.videoVoteContainer.setVoteCount(p.NEGATIVE_VOTE,b[c].negativeVoteCount);a.videoVoteContainer.countsFetched=
!0;break}d.vars.activeVideoVoteContainer.countsFetched=!0;d.vars.activeVideoVoteContainer.showOrHide(!0,!0,!0,!0);d.vars.isMobile?d.resizeMobilePopover():d.resizeImmersiveView()},function(a){M.count("ibiv.videovote.votecountfailure",1);d.vars.A.trigger(d.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-hide-votes")})}},kd=function(){function a(a,c){this.brilaFactory=a;this.config=c}a.prototype.embed=function(){var a=this,c=document.getElementById(this.config.parentId),d=this.config.parentId+
"-element",k=document.createElement("video");k.id=d;k.className="video-js";k.setAttribute("playsinline","true");this.config.shouldDisableControls||k.setAttribute("controls","true");this.config.shouldAutoplay&&k.setAttribute("autoplay","true");this.config.shouldStartMuted&&k.setAttribute("muted","true");c.appendChild(k);this.videoJS=this.brilaFactory.embed(d,this.config);document.getElementById(d).setAttribute("style","width:100%; height:100%;");this.videoJS.src(this.config.mediaSourceInfo[0]);this.vseMetrics=
this.brilaFactory.metrics(this.videoJS);this.config.videoAds.isEngineEnabled&&(this.vseAds=this.brilaFactory.ads(this.videoJS));this.videoJS.on("play",function(){a.config.bindings.play()});this.videoJS.on("firstplay",function(){a.config.bindings.play()});this.videoJS.on("fullscreenchange",function(){a.videoJS.isFullscreen()?a.config.bindings.fullscreen():a.config.bindings.normalscreen()});return this.wrapper()};a.prototype.wrapper=function(){var a=this;return{attach:function(a){},isFullScreen:function(){return a.videoJS.isFullscreen()},
enterFullScreen:function(){a.videoJS.requestFullscreen()},enterFullWindow:function(){a.videoJS.enterFullWindow()},enterNormalScreen:function(){a.videoJS.exitFullscreen()},play:function(c){d.isDefined(c)&&d.isDefined(c.eventTimestamp)&&a.vseMetrics.setPageLoadStartTimestamp(c.eventTimestamp);return a.videoJS.play()},pause:function(){a.videoJS.pause()},loadMedia:function(c){var d=c.contentId;c=c.mediaSourceInfo[0];a.vseMetrics.setContentId(d);a.config.videoAds.isEngineEnabled&&a.vseAds.setContentId(d);
a.videoJS.src(c)},destroy:function(){a.videoJS.dispose()}}};return a}();try{var md=function(a){return new a(function(a,c){w.when("A","a-carousel-framework","3p-promise","a-button","ready").register("VSECommonComponentAssets",function(c,k,l,g){var f,h,n,m,q,r,y,x=!1;d.vars.A=c;var z;d.vars.A.on("vseAiry",function(){w.when("mash").execute("NilgiriService-Mash-Detection",function(a){d.vars.A.$(".vse-video-block").addClass("mshop");x=!0;m=a})});d.vars.A.on.orientationchange(function(a){if(0===a.orientation){a=
a.height;var b=d.vars.A.$(".vse-mobile-fixed-container").outerHeight(!0);d.vars.A.$("#"+n).css({"max-height":a-b,top:b})}});return{initCarousel:function(){try{d.vars.A.state.parse();d.vars.A.state.replace("dp_vse_rvc",JSON.parse(d.vars.A.$("script[type\x3d'a-state'][data-a-state*\x3ddp_vse_rvc]").html()));var a=d.vars.A.state("dp_vse_rvc");if(a){var b={gatedP:hb,_partial:wa,_keyBy:jd,EventEmitter:Mc,promise:l},g=new Qc(k,c,b);k.createAll();k.initializeAll();d.vars.relatedVideosCarousel=g.create(a);
d.vars.ibCarouselName="#"+a.carouselName;var m=c.$.extend({},a.videoVoteConfig);m.hasOwnProperty("placementContext")&&(m.dependencies=b,d.vars.videoVoteContainerFactory=new kb(c,m),d.vars.activeVideoVoteContainer=d.vars.videoVoteContainerFactory.createFromSelector("#vse-video-votes-lb-details-"+m.placementContext));n=a.carouselName;var q=d.vars.A.$(d.vars.ibCarouselName).find("."+v.ceVideoElement).parent("li");d.vars.isContentExperiment=0<q.length;if(d.vars.isContentExperiment){q.closest(d.vars.ibCarouselName).addClass(v.ceVideoElement+
"-container");y=d.vars.A.$(d.vars.ibCarouselName+" ol.a-carousel li");var w=q.length;q.each(function(a,b){d.vars.A.$(v.ibMetadata).addClass("vse-ib-customer-review")});d.appendDivider(w,y);d.vars.A.$(v.ceMobileVotesFeedbackContainer).css({opacity:1})}else if(d.vars.isMobile){var x=d.vars.A.$(d.vars.ibCarouselName).closest(""+v.ceMobileMovableContainer);d.vars.forceMobileResize=0<x.length;d.vars.forceMobileResize&&(d.vars.A.$(x).addClass("vse-no-ce"),d.vars.A.$(v.ceMobileVotesFeedbackContainer).remove())}d.vars.A.on("vse:contentCarousel:"+
n+":click",function(a){var b={mediaSourceInfo:[a.videoUrl],contentId:a.contentId};d.isDefined(f)&&(f.attach(h),f.loadMedia(b),f.play({isAsync:!0,eventTimestamp:(new Date).getTime()}),d.updateMediaInfo(a),d.isDefined(r)&&r.setActiveVideoAndSource(a.contentId,a.vendorCode))});var z=d.vars.relatedVideosCarousel.getplaylist()[0];d.vars.relatedVideosCarousel.markPlaying(z);var A=d.vars.relatedVideosCarousel.getActiveAsset();d.vars.showVotes=d.vars.videoVoteContainerFactory&&d.vars.videoVoteContainerFactory.videoVoteConfig&&
A&&A.videoVoteContainer&&!d.vars.videoVoteFailure&&(d.vars.isMobile||!d.vars.isContentExperiment);d.vars.showVotes&&(d.updateActiveVideoVoteContainer(d.vars.relatedVideosCarousel.getActiveAsset()),d.vars.A.on(d.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-hide-votes",function(){d.vars.activeVideoVoteContainer.showOrHide(!1,!1,!1,!1);d.vars.videoVoteFailure=!0}),d.vars.A.declarative(d.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-positive","click",function(){d.castVote(p.POSITIVE_VOTE)}),
d.vars.A.declarative(d.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-negative","click",function(){d.castVote(p.NEGATIVE_VOTE)}),d.vars.A.on(d.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-cast",function(a){var b=a===p.POSITIVE_VOTE?p.NEGATIVE_VOTE:p.POSITIVE_VOTE,c=d.vars.relatedVideosCarousel.getActiveAsset(),e=p.EMPTY_STRING;c&&c.videoVoteContainer&&(e=c.videoVoteContainer.getPreviousVote()===a?"cancel:"+a:c.videoVoteContainer.getPreviousVote()===p.POSITIVE_VOTE||
c.videoVoteContainer.getPreviousVote()===p.NEGATIVE_VOTE?"switch-"+b+"-to-"+a:a,c.videoVoteContainer.updateWithNewVote(a));d.vars.sushiMetricsConfig&&d.vars.sushiMetricsConfig.endpoint!==v.EMPTY_STRING&&(a=d.vars.buildSushiPayload({eventName:"ibiv.videovote.castvote:"+e,stringPayload:v.EMPTY_STRING,intPayload:1,videoAsin:c.contentId}),M.emitSushiMetric(a,d.vars.sushiMetricsConfig.endpoint))}));d.vars.isMobile&&d.updateMediaInfo(z)}}catch(ld){t.ueLogError&&t.ueLogError(ld,{logLevel:"FATAL",attribution:"vse-nilgiri-service",
message:"InitializeVSECarousel: "})}},initPlayer:function(){try{var a=!1;d.vars.A.state.parse();d.vars.A.state.replace("vse_dp_airy",JSON.parse(d.vars.A.$("script[type\x3d'a-state'][data-a-state*\x3dvse_dp_airy]").html()));var b=d.vars.A.state("vse_dp_airy");if(b){z={onScreenChange:function(){a=!1;d.vars.A.trigger("vsePlayerScreenChange",a);x&&m&&m.dispatchEvent({type:"appOverlays.Show"})},onFullScreen:function(){a=!0;x&&m&&m.dispatchEvent({type:"appOverlays.Hide"})},onPlay:function(){d.isDefined(f)&&
"true"===e.enableFullScreenByDefault.toLowerCase()&&!f.isFullScreen()&&(f.enterFullScreen({isAsync:!0}),x&&m&&m.dispatchEvent({type:"appOverlays.Hide"}))}};var c=b.foresterConfiguration,e=b.playerConfiguration;d.vars.isMobile=b.isMobile;var g={contentId:c.contentId,customerId:b.sushiMetricsConfig.customerId,foresterMetadataParams:{client:c.client,marketplaceId:c.marketplaceId,method:c.method,requestId:c.requestId,session:c.sessionId},mediaSourceInfo:[b.videoUrl],pageAsin:c.pageAsin,parentId:b.id,
bindings:{play:function(){return z.onPlay()},normalscreen:function(){return z.onScreenChange()},fullscreen:function(){return z.onFullScreen()}}};b.sushiMetricsConfig&&b.sushiMetricsConfig.endpoint!==v.EMPTY_STRING&&(g.sushiMetricsConfig=b.sushiMetricsConfig);h=b.id;w.when("brila").execute("NS-Brila-Player",function(a){d.isDefined(f)&&"function"===typeof f.destroy&&f.destroy();var b=d.vars.A.$.extend({},g,{videoAds:{isEngineEnabled:!1},shouldStartMuted:!1,shouldAutoplay:!1,shouldDisableControls:!1});
f=(new kd(a,b)).embed();d.vars.A.trigger("vseAiry",{airy:f,containerId:h});d.vars.A.declarative("a-secondary-view","click touch",function(a){"video-immersive-view"===a.data.name&&d.isDefined(f)&&!f.isFullScreen()&&(q=d.vars.A.$("#image-block li .vse-video-element").closest("a.video-data-wrapper").data(),("true"===e.enableFullScreenByDefault.toLowerCase()||d.isDefined(q)&&1===q.videoCount)&&f.enterFullScreen())})});var k=d.vars.A.$("#div-feedback");d.vars.A.$(".vse-md-details").append(k);var l=Lc.fetchLatestPageState(d.vars.A,
"videoInformation-vse_ib_iv");l&&l.sushiMetricsConfig&&(d.vars.sushiMetricsConfig=l.sushiMetricsConfig,d.vars.buildSushiPayload=Kc.makeApplicationSushiPayloadBuilder(d.vars.A,d.vars.sushiMetricsConfig))}}catch(n){t.ueLogError&&t.ueLogError(n,{logLevel:"FATAL",attribution:"vse-nilgiri-service",message:"InitializePlayer: "})}},initFeedback:function(){try{r=(new Sc({A:c,buttonApi:g})).create("vse_ib_iv-feedback","vse_ib_iv-feedback");var a=d.vars.A.state("vse_dp_airy").foresterConfiguration.contentId,
b=d.vars.A.state("vse_dp_airy").vendorCode;r.setActiveVideoAndSource(a,b)}catch(f){t.ueLogError&&t.ueLogError(f,{logLevel:"FATAL",attribution:"vse-nilgiri-service",message:"InitializeVSEFeedback: "})}},_noneFeature:a()}})})};w.when("A","3p-promise").execute("VSE-gatedP-register-ns-client",function(a,b){hb.register("VSECommonComponentAssets","VSE-NS-client-registered",md,b)})}catch(a){t.ueLogError&&t.ueLogError(a,{logLevel:"ERROR",attribution:"vse-nilgiri-service",message:"NSE: "})}})()});